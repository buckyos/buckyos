<mxfile host="Electron" modified="2024-12-06T07:19:51.764Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/22.1.2 Chrome/114.0.5735.289 Electron/25.9.4 Safari/537.36" etag="_zopRbGu1Z3RiElUF1ht" version="22.1.2" type="device" pages="14">
  <diagram id="oIMGCOtcYAl4cptAXmcz" name="Architecture">
    <mxGraphModel dx="2896" dy="1168" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="MFu4L8sQsqwjJeb4Q1V4-1" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" target="slN-2MWBcHAUPgdGicAb-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1120" y="730" as="sourcePoint" />
            <mxPoint x="201" y="729" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-2" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" source="MFu4L8sQsqwjJeb4Q1V4-2" target="slN-2MWBcHAUPgdGicAb-12" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1120" y="730" as="sourcePoint" />
            <mxPoint x="-130" y="732" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-36" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-12" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1120" y="732" as="sourcePoint" />
            <mxPoint x="-130" y="732" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-2" value="name service client&lt;br&gt;(zone config loader)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="164" y="795" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-3" value="etcd" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="830" y="872" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-5" target="slN-2MWBcHAUPgdGicAb-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-5" value="backup client" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="406" y="789" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-7" value="http backup&amp;nbsp;&lt;br&gt;client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="321" y="879" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-8" value="DMC backup&lt;br&gt;client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="446" y="879" width="139" height="40" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-9" value="system_config" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="830" y="804" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-10" target="slN-2MWBcHAUPgdGicAb-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="754" y="880" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-10" value="pkg_loader" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="649" y="790" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-14" value="http pkg repo client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="569" y="880" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.543;entryY=0.008;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-5" target="slN-2MWBcHAUPgdGicAb-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-17" value="cyfs pkg repo client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="690" y="879" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-22" value="app service container" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="616" y="430" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-23" value="app1 service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="626" y="470" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-24" value="kRPC" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="346" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-25" value="scheduler" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="631" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-26" value="app service container" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="486" y="430" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-27" value="app2 service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="496" y="470" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-30" value="app service vm" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="346" y="430" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-31" value="app3 service@vm" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="356" y="470" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-32" value="dfs&lt;br&gt;(glusterFS or dcfs)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="213" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-33" value="user-library" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="85" y="570" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-35" value="acl_config" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="830" y="740" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-37" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1120" y="540" as="sourcePoint" />
            <mxPoint x="-130" y="540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-38" value="k8s&lt;br&gt;(3rd service)" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="486" y="570" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-39" value="service-store" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="631" y="570" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-43" value="control-panel" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="820" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="jtHWyDhdxYCyiww5QqfK-1" value="&amp;nbsp;DNS client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="880" width="124" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jtHWyDhdxYCyiww5QqfK-2" value="&amp;nbsp;ENS client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="211" y="880" width="124" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jtHWyDhdxYCyiww5QqfK-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.437;entryY=0.001;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-2" target="jtHWyDhdxYCyiww5QqfK-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jtHWyDhdxYCyiww5QqfK-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.659;entryY=0.03;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-2" target="jtHWyDhdxYCyiww5QqfK-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-2" value="system-repair" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="980" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-4" value="kLog" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="481" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-6" value="smb" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="215" y="570" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-7" value="file-sync" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="346" y="570" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-8" value="BuckyOS Client" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;" parent="1" vertex="1">
          <mxGeometry x="1520" y="450" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-9" value="BuckyOS Mobile App" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;" parent="1" vertex="1">
          <mxGeometry x="1520" y="340" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-10" value="Web2.5 Gateway&lt;br&gt;(Gateway@Cloud)" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;" parent="1" vertex="1">
          <mxGeometry x="1510" y="550" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-11" value="Http Servers" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;" parent="1" vertex="1">
          <mxGeometry x="1520" y="650" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-12" value="cyfs-gateway" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="81" y="704" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-3" value="User Apps:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-129" y="430" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-4" value="System Frame（Kernel） Services:" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-140" y="544" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-5" value="Kernel Models:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-134" y="740" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-6" value="&lt;div&gt;The Kernel Models is not extensible.&amp;nbsp;The purpose of this layer is to prepare the operating environment of the Kernel Service&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As the most basic component of the system, it will enter a stable state as soon as possible, and modifications at this layer should be minimized.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Some basic components of this layer can load System Plugin to expand functions, such as pkg_loader can support new pkg download protocols through the pre-defined SystemPlugin.&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-134" y="763" width="194" height="257" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-3" value="node-reporter" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="980" y="704" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-1" value="machine_active_daemon" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="970" y="780" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-10" value="Frame-Service is a kernel-mode service of the system, which exposes the system functions to the user mode through the kernel RPC. &lt;br&gt;&lt;br&gt;It can be extended under the operation of the system administrator. The extension logic is similar to installing new kmods in Linux." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-134" y="566" width="215" height="140" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-11" value="Application services that are managed by users on a daily basis and run in user-mode." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-129" y="456" width="190" height="80" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-12" value="rdb？" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=8 8;" parent="1" vertex="1">
          <mxGeometry x="81" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-11" value="node_daemon" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="540" y="704" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="MFu4L8sQsqwjJeb4Q1V4-3" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-11" target="MFu4L8sQsqwjJeb4Q1V4-2" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="486" y="731" as="sourcePoint" />
            <mxPoint x="201" y="729" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MFu4L8sQsqwjJeb4Q1V4-2" value="name-service" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="215" y="704" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-1" value="Physical Cluster（Zone Root）" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="315" y="40" width="254" height="220" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-2" value="Zone A" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="324" y="70" width="105" height="140" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-3" value="Physical &lt;br&gt;ServerA" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="324" y="219" width="75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-4" value="Physical &lt;br&gt;ServerB" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="406" y="219" width="72" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-5" value="Physical &lt;br&gt;ServerC" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="485" y="219" width="74" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-6" value="Node1@ServerA" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="329" y="100" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-7" value="Node2@ServerB" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="329" y="134" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-8" value="Zone B" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="446" y="70" width="110" height="140" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-9" value="Node1@ServerB" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="455" y="100" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-10" value="Node2@ServerC" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="455" y="136" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-11" value="Node3@ServerC" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="329" y="168" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-12" value="Node3@ServerA" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="455" y="169" width="95" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="iOcJLOFx5TQZdEkecl_a" name="MainLoop">
    <mxGraphModel dx="2896" dy="1168" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="68Tao7XhbEayZiMnRGVD-14" value="cyfs-gateway Loop" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-810" y="333.25" width="170" height="253.5" as="geometry" />
        </mxCell>
        <mxCell id="JNShnxTUHkuAeDjjDzT3-16" value="node loop @node_daemon:" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="-740" y="40" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-12" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-2" target="w76EHTxTQfi9PKH68CeN-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-44" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-2" target="w76EHTxTQfi9PKH68CeN-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-620" y="234" />
              <mxPoint x="-620" y="234" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-2" value="load node_identity?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-600" y="190.5" width="150" height="87.5" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-3" target="68Tao7XhbEayZiMnRGVD-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-525" y="418" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-3" value="load zone config&lt;br&gt;from NameService" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-585" y="321" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-6" target="68Tao7XhbEayZiMnRGVD-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-8" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-6" target="w76EHTxTQfi9PKH68CeN-56" edge="1">
          <mxGeometry x="0.0076" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-410" y="608" />
              <mxPoint x="-410" y="355" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-6" value="run sys_config&lt;br&gt;on this node?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-600" y="563" width="150" height="90" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-21" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-8" target="w76EHTxTQfi9PKH68CeN-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-70" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-8" target="w76EHTxTQfi9PKH68CeN-69" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-630" y="975" />
              <mxPoint x="-630" y="975" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-8" value="try connect to that urls" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-600" y="933" width="150" height="90" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-10" target="w76EHTxTQfi9PKH68CeN-33" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-525" y="1180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-10" value="node boot OK!&lt;br&gt;enter node_main_loop" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-585" y="1070" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-25" target="w76EHTxTQfi9PKH68CeN-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-25" value="exec node_op_tasks" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-585" y="1479" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-26" target="w76EHTxTQfi9PKH68CeN-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-26" value="contrl frame_service at this node to target state" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-585" y="1579" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-27" target="w76EHTxTQfi9PKH68CeN-33" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-380" y="1709" />
              <mxPoint x="-380" y="1210" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-27" value="contrl app_service at this node to target state" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-585" y="1679" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-33" target="w76EHTxTQfi9PKH68CeN-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-33" value="update node_config&lt;br&gt;from etcd" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-585" y="1180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-50" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-34" target="w76EHTxTQfi9PKH68CeN-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-525" y="1369" />
              <mxPoint x="-525" y="1369" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-53" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-34" target="w76EHTxTQfi9PKH68CeN-33" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-640" y="1219" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-630" y="1320" />
              <mxPoint x="-630" y="1210" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-34" value="node running?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-590" y="1280" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-42" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-41" target="w76EHTxTQfi9PKH68CeN-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-41" value="start" style="strokeWidth=1;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-575" y="94" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-43" value="node need active!" style="strokeWidth=1;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-760" y="204.25" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-47" target="w76EHTxTQfi9PKH68CeN-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-47" value="update gateway config from node_config" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-585" y="1389" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-63" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-56" target="w76EHTxTQfi9PKH68CeN-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-64" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-56" target="w76EHTxTQfi9PKH68CeN-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-56" value="is etcd&#39;s data complete?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-310" y="310" width="150" height="90" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-57" target="68Tao7XhbEayZiMnRGVD-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-57" value="generate other etcd node url by zone_config" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-295" y="439" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-61" target="w76EHTxTQfi9PKH68CeN-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-61" value="recover etcd data from backup_server@zone_config" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="-105" y="325" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-69" value="node boot failed" style="strokeWidth=1;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-785" y="947" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-75" value="System(Zone) Topology Changed" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="329" y="202" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-76" value="Discover known faults through kLog" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="149" y="202" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-77" value="System Config Changed&lt;br&gt;(like new service installed)" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="509" y="202" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-86" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-78" target="w76EHTxTQfi9PKH68CeN-80" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-78" value="do kernel scheduling" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="319" y="342" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-87" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-80" target="w76EHTxTQfi9PKH68CeN-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-80" value="Generate new nodes_config&lt;br&gt;(sometimes node_op_task included)" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="309" y="450" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-89" value="Pass" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-81" target="w76EHTxTQfi9PKH68CeN-88" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="399" y="697" />
              <mxPoint x="399" y="697" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-96" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-81" target="w76EHTxTQfi9PKH68CeN-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-81" value="Check the nodes_config &lt;br&gt;with user-defined &lt;br&gt;post-processing logic." style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="291.5" y="567" width="215" height="110" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-82" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.471;exitY=0.997;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-76" target="w76EHTxTQfi9PKH68CeN-78" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="229" y="357" as="sourcePoint" />
            <mxPoint x="279" y="307" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.567;entryY=0.035;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-75" target="w76EHTxTQfi9PKH68CeN-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-85" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.8;entryY=0.02;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-77" target="w76EHTxTQfi9PKH68CeN-78" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="549" y="377" as="sourcePoint" />
            <mxPoint x="599" y="327" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-88" target="w76EHTxTQfi9PKH68CeN-91" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="109" y="25" as="targetPoint" />
            <Array as="points">
              <mxPoint x="759" y="755" />
              <mxPoint x="759" y="30" />
              <mxPoint x="409" y="30" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-99" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;" parent="1" source="w76EHTxTQfi9PKH68CeN-88" target="w76EHTxTQfi9PKH68CeN-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-88" value="update nodes_config to etcd" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="309" y="747" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-90" value="Call the system administrator for assistance." style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="599" y="582" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-91" target="w76EHTxTQfi9PKH68CeN-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-93" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-91" target="w76EHTxTQfi9PKH68CeN-75" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-94" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-91" target="w76EHTxTQfi9PKH68CeN-77" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-91" value="start&lt;br&gt;wait events" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="349" y="72" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-97" value="Nodes with changed node_config will execute actions according to the new status." style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="339" y="867" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-101" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;dashed=1;dashPattern=8 8;" parent="1" source="w76EHTxTQfi9PKH68CeN-97" target="w76EHTxTQfi9PKH68CeN-33" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-310" y="1010" as="sourcePoint" />
            <mxPoint x="-260" y="960" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-102" value="scheduling loop @scheduler service:" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="110" y="35" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="68Tao7XhbEayZiMnRGVD-1" target="w76EHTxTQfi9PKH68CeN-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="68Tao7XhbEayZiMnRGVD-1" target="68Tao7XhbEayZiMnRGVD-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-1" value="start cyfs-gateway&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-585" y="430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="68Tao7XhbEayZiMnRGVD-3" target="68Tao7XhbEayZiMnRGVD-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-3" value="generate sys_config urls by zone_config" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-585" y="677" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="68Tao7XhbEayZiMnRGVD-4" target="w76EHTxTQfi9PKH68CeN-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-4" value="ood_ip = read_from_config(zone_config)&lt;br&gt;ood_ip = mDNS.resolve(host_name)&lt;br&gt;ood_ip = 127.0.0.1,port=80&lt;br&gt;ood_ip = zone_config.sn.get_device_info(ood_name,zoneid)&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;http://ood_ip:sys_config" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-690" y="760" width="330" height="140" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.561;entryY=0.021;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="68Tao7XhbEayZiMnRGVD-9" target="68Tao7XhbEayZiMnRGVD-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-107" y="910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-9" value="http://$ood_host_name:etcd_port (no SN)&lt;br&gt;http://$ood_host_name.d.$zoneid:etcd_port (have SN-DNS)&lt;br&gt;bdt://$ood_device_id:etcd_port (not support yet)&lt;br&gt;&lt;br&gt;ood_ip = zone_config.sn.get_device_info(ood_name,zoneid)&lt;br&gt;http://device_ip:etcd_port" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-300" y="653" width="385" height="90" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-12" value="if this is ood&lt;br&gt;keep tunnel to other ood&#39;s cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-780" y="439" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-13" value="keep tunnel to ZoneGateway &#39;s cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-780" y="510" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="68Tao7XhbEayZiMnRGVD-17" target="w76EHTxTQfi9PKH68CeN-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-17" value="connect to sys_config@thisnode" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-175" y="933" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-19" value="if zone.sn exists,try register self to SN" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-780" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="68Tao7XhbEayZiMnRGVD-20" value="用bdt连接 sys_config?" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-800" y="790" width="80" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="q0N88BQaiHxRkIq5dT2b" name="App Container">
    <mxGraphModel dx="2896" dy="1168" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-7" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="180" y="1330" width="290" height="210" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-1" value="node_daemon根据App权限配置准备容器" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-2" value="启动App容器" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="360" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-3" value="配置环境变量&lt;br&gt;重要的权限Token" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="120" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-4" value="可选：根据APP权限&lt;br&gt;创建容器文件系统&lt;br&gt;local cache&lt;br&gt;app fs" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="190" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-5" value="&amp;nbsp;身份管理中心" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-6" value="申请Token(按需）" style="endArrow=classic;html=1;rounded=0;exitX=1.033;exitY=0.434;exitDx=0;exitDy=0;exitPerimeter=0;entryX=-0.031;entryY=0.424;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="mNxCDZtLirX5pciaZlv8-1" target="mNxCDZtLirX5pciaZlv8-5" edge="1">
          <mxGeometry x="0.1459" y="-4" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="260" y="100" as="sourcePoint" />
            <mxPoint x="310" y="50" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-1" value="可选：根据APP权限&lt;br&gt;创建容器网络" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="270" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-2" value="启动用户进程" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="430" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-3" value="初始化app sdk stub" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="500" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.002;entryY=0.584;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="mNxCDZtLirX5pciaZlv8-3" target="LHn_DE8s6H_Sm2WV2Dcl-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="60" y="145" />
              <mxPoint x="60" y="529" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-7" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="1" target="mNxCDZtLirX5pciaZlv8-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="260" y="520" as="sourcePoint" />
            <mxPoint x="310" y="470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-8" value="使用Token登陆，登陆成功返回session_key" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="LHn_DE8s6H_Sm2WV2Dcl-7" vertex="1" connectable="0">
          <mxGeometry x="-0.151" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-9" value="frame service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="650" y="580" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-10" target="LHn_DE8s6H_Sm2WV2Dcl-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-10" value="使用kRPC调用系统功能" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="580" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-14" value="通过session_key查询调用来源的身份信息&lt;br&gt;注意session_key与from endpoint的绑定" style="endArrow=classic;html=1;rounded=0;exitX=0.551;exitY=-0.016;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-9" target="mNxCDZtLirX5pciaZlv8-5" edge="1">
          <mxGeometry x="-0.1108" y="-5" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="450" as="sourcePoint" />
            <mxPoint x="610" y="400" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-15" value="从system config中读取app的 ACL信息，进行权限控制" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="690" y="660" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-16" value="frame service如何验证调用者身份：&lt;br&gt;1. 调用中含有一个系统Owner的签名，因为系统里只有Owner的公钥，不保存私钥，因此这个调用获得了一次性的提权&lt;br&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;2.通过标准的用户密码，可以为应用程序提供一些基于session的权限验证&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;3.通过上述公私钥&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="50" y="670" width="220" height="110" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-17" value="申请Token时的安全权限验证：&lt;br&gt;请求方:node_id，该node的签名&lt;br&gt;安全隐患：node 私钥的泄露" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="470" y="80" width="195" height="100" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-19" value="应用泄露token的风险：&lt;br&gt;Token和EP绑定（和IP绑定？）&lt;br&gt;每个Service容器都一个独立IP会不会很夸张？" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-170" y="475" width="195" height="100" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-20" value="frame service拥有内核（root）权限，安装不可靠的frame service有丢失所有数据的风险！" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="630" y="740" width="195" height="100" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-21" target="LHn_DE8s6H_Sm2WV2Dcl-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="160" y="910" />
              <mxPoint x="160" y="910" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-21" value="app client" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="890" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-26" value="确认client身份" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-22" target="LHn_DE8s6H_Sm2WV2Dcl-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-22" value="gateway&lt;br&gt;外部调用都过gateway" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="200" y="890" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-27" value="验证app权限" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-23" target="LHn_DE8s6H_Sm2WV2Dcl-24" edge="1">
          <mxGeometry x="0.0057" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="910" />
              <mxPoint x="540" y="910" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-23" value="app service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="890" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-24" value="frame-service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="590" y="890" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-28" value="Data" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="770" y="880" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-29" value="安全访问" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-24" target="LHn_DE8s6H_Sm2WV2Dcl-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-31" value="一个请求有两个身份：&lt;br&gt;1. appid&lt;br&gt;2. 当前用户&lt;br&gt;&lt;br&gt;都验证为可信调用&lt;br&gt;否则为匿名调用（并不可信）&lt;br&gt;&lt;br&gt;只有填写正确的appid才有机会访问app的服务&lt;br&gt;&lt;br&gt;未填写appid是访问系统服务，很多时候对权限会有更高的要求。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-40" y="1030" width="170" height="200" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-32" value="分离token验证，在请求中带session_key，以及对session_key的验证，可以根据系统需要，扩展更多对验证方式的支持。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="665" y="255" width="195" height="100" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-33" value="web2.5的身份验证逻辑：&lt;br&gt;支持app client用传统协议来传递身份。通过gateway隔离后，app service的开发者也不用处理新的协议" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="400" y="1000" width="170" height="160" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-1" value="kernel service container" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="200" y="1350" width="160" height="170" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-3" value="etcd" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="220" y="1450" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-4" value="dcfs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="220" y="1400" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-5" value="eth0&lt;br&gt;192.168.1.222" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="1400" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-6" value="docker0" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="1360" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-8" value="第一个添加的OOD是主VLAN&lt;br&gt;kernel service container直接用host网络（提高性能）,其它服务看到的就是一个很标准的，来自OOD的网络协议包" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="195" y="1560" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-9" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="180" y="1640" width="320" height="210" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-10" value="kernel service container" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="200" y="1660" width="190" height="170" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-11" value="etcd" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="215" y="1770" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-13" value="eth0&lt;br&gt;192.168.1.223" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="287.5" y="1710" width="82.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-14" value="docker0" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="410" y="1660" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-15" value="VPS上的第二OOD，容器使用NAT模式，通过host上的tunnel虚拟网卡，让容器加入了主OOD所在的局域网，能不能不动物理机的iptable?，局域网的其它服务，看到的是一个来自 第一OOD的另一块网卡的数据包" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="200" y="1870" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-16" value="dcfs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="215" y="1710" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-17" value="eht0&lt;br&gt;23.239.23.54" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="410" y="1710" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-20" value="tunnel" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-18" target="hjjSVfZwhBp0PWB6v3EA-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="1780" />
              <mxPoint x="540" y="1470" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-18" value="tun/tap&lt;br&gt;openvpn" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="410" y="1755" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-19" value="tun/tap&lt;br&gt;openvpn&lt;br&gt;192.168.1.223" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="1445" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-28" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="170" y="1960" width="320" height="210" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-29" value="kernel service container" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="190" y="1980" width="190" height="170" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-30" value="etcd" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="205" y="2090" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-31" value="eth0&lt;br&gt;192.168.1.221" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="277.5" y="2030" width="82.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-32" value="docker0" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="1980" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-33" value="dcfs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="205" y="2030" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-34" value="eht0&lt;br&gt;192.168.1.222" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="2030" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-35" value="tun/tap&lt;br&gt;openvpn" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="2075" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-36" value="另一个局域网的OOD，容器使用NAT模式，通过host上的tunnel虚拟网卡，让容器加入了主OOD所在的局域网。此时本局域网中的服务之间无法直接通信，需要绕行到" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="205" y="2200" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.012;entryY=0.63;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-35" target="hjjSVfZwhBp0PWB6v3EA-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="2100" />
              <mxPoint x="540" y="1786" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-39" target="hjjSVfZwhBp0PWB6v3EA-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-39" value="用户进程&lt;br&gt;send(target_ip,data)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-40" target="hjjSVfZwhBp0PWB6v3EA-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-40" value="内核network stack(iptable),进行路由" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1090" y="1370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-41" target="hjjSVfZwhBp0PWB6v3EA-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-41" value="根据路由结果找到网络设备,并将ip包写入设备的发送队列" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1275" y="1370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-44" target="hjjSVfZwhBp0PWB6v3EA-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-44" value="目标主机" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-46" target="hjjSVfZwhBp0PWB6v3EA-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-46" value="内核network stack(iptable),处理设备收到包，进行路由" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1090" y="1530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-47" target="hjjSVfZwhBp0PWB6v3EA-46" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-47" value="读取返回，写入设备的接收队列" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1270" y="1530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-51" value="用户进程&lt;br&gt;on_recv" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1530" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="1u5XhRc6Ss8xfa0_lFwo" name="kRPC">
    <mxGraphModel dx="2060" dy="1183" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-19" value="kRPC" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1VOikts_Fu2gLfuLLnL2-2" target="TtpUKM4LW4xhPhtb8Lpu-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1VOikts_Fu2gLfuLLnL2-2" value="Kernel Service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="305" y="300" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="1VOikts_Fu2gLfuLLnL2-3" value="App" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="305" y="150" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-5" value="kRPC" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="TtpUKM4LW4xhPhtb8Lpu-1" target="1VOikts_Fu2gLfuLLnL2-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=8 8;" parent="1" vertex="1">
          <mxGeometry x="282.5" y="100" width="165" height="130" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-2" value="App Runtime" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="282.5" y="110" width="102.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-4" value="HTTP" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="TtpUKM4LW4xhPhtb8Lpu-3" target="TtpUKM4LW4xhPhtb8Lpu-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-3" value="浏览器" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="630" y="135" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-7" value="浏览器" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="630" y="290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-8" value="HTTP" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.042;entryY=0.4;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="TtpUKM4LW4xhPhtb8Lpu-7" target="1VOikts_Fu2gLfuLLnL2-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-10" value="u:guest" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="713" y="172" width="30" height="50" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-11" value="u:root" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="282.5" y="320" width="30" height="50" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-15" value="u:appid" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="275" y="200" width="30" height="50" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-18" value="Kernel Service2" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="305" y="440" width="120" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="SMHiQNlAgZj_AsD7_GeZ" name="Gateway">
    <mxGraphModel dx="2567" dy="2086" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="R2tXztMVlqhcrjkz3c3H-148" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1472" y="-537" width="568" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-147" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="-535" width="510" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-144" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1540" y="190" as="sourcePoint" />
            <mxPoint x="1540" y="-470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-1" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1260" y="-980" width="170" height="290" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-2" value="&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 16px; line-height: 19px;&quot;&gt;基于url比如 https://$servicename.$zoneid/page1.html 来访问BuckyOS&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=default;labelBackgroundColor=none;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="870" y="-600" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-5" target="R2tXztMVlqhcrjkz3c3H-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-4" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-5" target="R2tXztMVlqhcrjkz3c3H-89" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="314.00000000000045" y="-365" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-5" value="cyfs-dns?&lt;br&gt;(cyfs-gateway的front)" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="-410" width="216" height="90" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-7" target="R2tXztMVlqhcrjkz3c3H-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-7" value="查询$zoneid的did document" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="398" y="-260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-8" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-10" target="R2tXztMVlqhcrjkz3c3H-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-9" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-10" target="R2tXztMVlqhcrjkz3c3H-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-10" value="可以直连？" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="-150" width="216" height="90" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-11" value="返回fake-ip&lt;br&gt;cyfs-gateway在该fake-ip上监听80/443" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="398" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-14" target="R2tXztMVlqhcrjkz3c3H-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-14" target="R2tXztMVlqhcrjkz3c3H-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-14" value="解析$zoneid" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="-465" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-15" value="基于端口映射" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-21" target="R2tXztMVlqhcrjkz3c3H-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-21" target="R2tXztMVlqhcrjkz3c3H-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-17" value="连接公网ip" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="R2tXztMVlqhcrjkz3c3H-16" vertex="1" connectable="0">
          <mxGeometry x="0.3966" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-21" target="R2tXztMVlqhcrjkz3c3H-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-21" target="R2tXztMVlqhcrjkz3c3H-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-20" value="连接fake-ip" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="R2tXztMVlqhcrjkz3c3H-19" vertex="1" connectable="0">
          <mxGeometry x="0.2285" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-21" value="连接ip:80/443" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-23" target="R2tXztMVlqhcrjkz3c3H-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-23" value="收到TCP连接请求" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="398" y="320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-24" value="返回gateway ip" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="190" y="-135" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-25" value="P2P协议" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#FF3333;" parent="1" source="R2tXztMVlqhcrjkz3c3H-26" target="R2tXztMVlqhcrjkz3c3H-87" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-26" value="根据fake-ip得到$zoneid,尝试建立到OOD的P2P连接（有端口映射会非常简单）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="398" y="430" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-27" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-29" target="R2tXztMVlqhcrjkz3c3H-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-28" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-29" target="R2tXztMVlqhcrjkz3c3H-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-29" value="有端口映射？" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="350" width="216" height="90" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-30" value="在SN上查询ZoneIP并返回" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="190" y="15" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-31" value="客户端浏览器" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="30" y="-520" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-32" value="cyfs-gateway@客户端" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="387" y="-520" width="142" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-33" value="cyfs-gateway@Gateway Node" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="808" y="-520" width="172" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-34" value="cyfs-gateway@OOD" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="1480.5" y="-520" width="122" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-35" value="如果$zoneid是buckyos.org的子域名，且支持端口映射，那么返回OOD外网IP" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="156" y="-300" width="156" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-36" value="收到TCP连接请求" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="833" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-38" target="R2tXztMVlqhcrjkz3c3H-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-38" value="返回连接成功" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="833" y="350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-40" target="R2tXztMVlqhcrjkz3c3H-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-40" value="SSL握手" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-42" target="R2tXztMVlqhcrjkz3c3H-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-42" value="处理SSL握手（可读取证书）" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="832" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-43" value="发送HTTP请求" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="780" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-45" target="R2tXztMVlqhcrjkz3c3H-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-45" value="根据URL路由配置分析HTTP请求" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="832" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-47" target="R2tXztMVlqhcrjkz3c3H-48" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-47" value="gateway上有Cache?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="812" y="880" width="162" height="90" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-48" value="返回Cache" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="730" y="1030" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-50" target="R2tXztMVlqhcrjkz3c3H-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-50" value="使用system-config查询相关服务的EP,$device-id" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="932" y="1030" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-52" target="R2tXztMVlqhcrjkz3c3H-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-52" value="使用内部协议连接$device-id" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="932" y="1140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#fa0000;" parent="1" source="R2tXztMVlqhcrjkz3c3H-56" target="R2tXztMVlqhcrjkz3c3H-82" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1540" y="1420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-54" value="P2P协议" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="R2tXztMVlqhcrjkz3c3H-53" vertex="1" connectable="0">
          <mxGeometry x="-0.1497" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-56" target="R2tXztMVlqhcrjkz3c3H-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-56" value="发送请求/等待回复&lt;br&gt;这里可以确定性的重试逻辑" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="932" y="1240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-57" value="返回请求" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="932" y="1340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-59" target="R2tXztMVlqhcrjkz3c3H-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-59" value="收到TCP连接请求" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1483" y="190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-61" target="R2tXztMVlqhcrjkz3c3H-63" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-61" value="返回连接成功" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1483" y="280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-63" target="R2tXztMVlqhcrjkz3c3H-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-63" value="处理SSL握手（可读取证书）" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1482.5" y="690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-65" target="R2tXztMVlqhcrjkz3c3H-67" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-65" value="根据URL路由配置分析HTTP请求" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1482.5" y="800" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-67" target="R2tXztMVlqhcrjkz3c3H-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-67" value="gateway上有Cache?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1461.5" y="920" width="162" height="90" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-68" value="返回Cache" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1379.5" y="1070" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-70" target="R2tXztMVlqhcrjkz3c3H-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-70" value="使用system-config查询相关服务的EP,$device-id" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1581.5" y="1070" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-71" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-72" target="R2tXztMVlqhcrjkz3c3H-74" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-72" value="直连 服务EP" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1581.5" y="1180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-74" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1910" y="1295" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-74" value="发送请求/等待回复&lt;br&gt;这里可以确定性的重试逻辑" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1581.5" y="1280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-75" value="http service$device" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="1912" y="-520" width="122" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-77" target="R2tXztMVlqhcrjkz3c3H-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-77" value="收到请求" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1912" y="1270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-78" value="处理并返回结果" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1913" y="1380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.654;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-67" target="R2tXztMVlqhcrjkz3c3H-70" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-80" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.559;entryY=-0.016;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-47" target="R2tXztMVlqhcrjkz3c3H-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-81" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-82" target="R2tXztMVlqhcrjkz3c3H-83" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-82" value="收到来自P2P协议的连接请求" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1483" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-83" value="转发成到$device-ip,port的直连" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1662" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-84" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.006;entryY=0.682;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-83" target="R2tXztMVlqhcrjkz3c3H-77" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.498;entryY=-0.05;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-36" target="R2tXztMVlqhcrjkz3c3H-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-86" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-87" target="R2tXztMVlqhcrjkz3c3H-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-87" value="收到来自P2P协议的连接请求" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1302.5" y="280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-88" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-89" target="R2tXztMVlqhcrjkz3c3H-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-89" value="返回Gateway Node IP" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="164" y="-395" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-90" value="如果支持端口映射，那么每1分钟刷新一次DDNS" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1472" y="-370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-91" value="这里还有一个规则引擎，本质上是一个运行在socks代理中的tunnel的选择器" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="590" y="490" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-93" target="R2tXztMVlqhcrjkz3c3H-95" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-93" value="Front1" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="152" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-94" value="P2P" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#b85450;fillColor=#f8cecc;" parent="1" source="R2tXztMVlqhcrjkz3c3H-95" target="R2tXztMVlqhcrjkz3c3H-105" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="752" y="-890" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-95" value="proxy@cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="272" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-96" value="Old service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1072" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-97" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-99" target="R2tXztMVlqhcrjkz3c3H-100" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-98" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-99" target="R2tXztMVlqhcrjkz3c3H-102" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-99" value="nginx" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="492" y="-850" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-100" value="cyfs-server" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="632" y="-850" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-101" value="P2P" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" source="R2tXztMVlqhcrjkz3c3H-102" target="R2tXztMVlqhcrjkz3c3H-105" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="832" y="-810" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-102" value="proxy@cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="632" y="-800" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-103" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-105" target="R2tXztMVlqhcrjkz3c3H-96" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-104" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-105" target="R2tXztMVlqhcrjkz3c3H-112" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-105" value="bdt-stack.forwoard" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="842" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-106" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-109" target="R2tXztMVlqhcrjkz3c3H-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-107" value="最常见" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="R2tXztMVlqhcrjkz3c3H-106" vertex="1" connectable="0">
          <mxGeometry x="-0.1542" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-108" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-109" target="R2tXztMVlqhcrjkz3c3H-93" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-109" value="OldClient" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="30" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-112" target="R2tXztMVlqhcrjkz3c3H-114" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-111" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-112" target="R2tXztMVlqhcrjkz3c3H-115" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-112" value="nginx" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="962" y="-855" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-113" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-114" target="R2tXztMVlqhcrjkz3c3H-126" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-114" value="cyfs-server" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="962" y="-760" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-115" value="Old service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1072" y="-855" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-116" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="452" y="-715" as="sourcePoint" />
            <mxPoint x="452" y="-965" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-117" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="772" y="-715" as="sourcePoint" />
            <mxPoint x="772" y="-965" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-118" value="Client Device" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="188" y="-1020" width="117" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-119" value="GatewayNode" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="542" y="-1020" width="117" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-120" value="OOD" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="925" y="-1020" width="117" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-121" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" source="R2tXztMVlqhcrjkz3c3H-122" target="R2tXztMVlqhcrjkz3c3H-114" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-122" value="NewClient" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="272" y="-760" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-123" value="P2P" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.675;entryY=0.944;entryDx=0;entryDy=0;entryPerimeter=0;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" source="R2tXztMVlqhcrjkz3c3H-132" target="R2tXztMVlqhcrjkz3c3H-105" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-124" value="端口映射" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-125" target="R2tXztMVlqhcrjkz3c3H-112" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-125" value="OldClient" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="212" y="-970" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-126" value="New Service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1072" y="-760" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-127" value="Service可以选择注册在bdt-forward上，nginx上，cyfs-server上" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="925" y="-710" width="188" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-128" value="&amp;nbsp;在理论上不能连通的环境里，通过配置bdt-sn让P2P协议通是P2P协议的细节。用户可以没有GatewayNode但有bdt-sn" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="530" y="-690" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-129" value="bdt-sn" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="610" y="-740" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-130" value="bdt-stack" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="360" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-131" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.675;entryY=0.944;entryDx=0;entryDy=0;entryPerimeter=0;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" source="R2tXztMVlqhcrjkz3c3H-122" target="R2tXztMVlqhcrjkz3c3H-132" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="352" y="-745" as="sourcePoint" />
            <mxPoint x="896" y="-877" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-132" value="bdt-stack" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="360" y="-760" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-133" value="bdt-stack是同一个" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="352" y="-825" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-134" value="proxy-core" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1285" y="-900" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-135" value="bdt-stack" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1285" y="-860" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-136" value="bdt-stack.forward" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1285" y="-820" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-137" value="cyfs-server" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1285" y="-780" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-138" value="cyfs-gatway" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1302.5" y="-973" width="85" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-139" value="cyfs-dns&lt;br&gt;（support ddns）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1285" y="-940" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-140" value="bdt-sn" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1285" y="-740" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-143" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-36" target="R2tXztMVlqhcrjkz3c3H-33" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="860" y="-300" as="sourcePoint" />
            <mxPoint x="910" y="-350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-146" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-77" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1972.29" y="170" as="sourcePoint" />
            <mxPoint x="1972.29" y="-490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-149" value="cyfs-gateway @ WLAN" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1910" y="-973" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-150" value="cyfs-gateway @ LAN" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2290" y="-973" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-151" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-149" target="R2tXztMVlqhcrjkz3c3H-150" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2100" y="-930" as="sourcePoint" />
            <mxPoint x="2150" y="-980" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-152" value="Tunnel" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="R2tXztMVlqhcrjkz3c3H-151" vertex="1" connectable="0">
          <mxGeometry x="0.2885" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-154" value="Tunnel" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="R2tXztMVlqhcrjkz3c3H-153" target="R2tXztMVlqhcrjkz3c3H-150" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-153" value="cyfs-stack@laptop&lt;br&gt;like OpenVPN Client" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1650" y="-900" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-155" value="协助" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" target="R2tXztMVlqhcrjkz3c3H-149" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1970" y="-870" as="sourcePoint" />
            <mxPoint x="2030" y="-830" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-156" value="Dispatch&amp;nbsp; Serivce Config&lt;br&gt;TCP/UDP/BDT : Port -&amp;gt; Target" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="100" y="1870" width="216" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-157" value="cyfs-dns&lt;br&gt;(support ddns)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="434" y="1630" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-158" value="cyfs-socks" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="433" y="1730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-159" value="device_id : port&lt;br&gt;(need tunnel)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="433" y="1920" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-160" value="ip : port" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="433" y="2000" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-161" value="hostname : port" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="434" y="2080" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-162" value="TunnelSelector.selet_tunnel" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="620" y="1730" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-163" value="tunnel mgr" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="902" y="1780" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-164" value="cyfs-warp&lt;br&gt;http engine" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="434" y="1830" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-165" value="RouterConfig&lt;br&gt;URL-&amp;gt; Up Stream target" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="620" y="1830" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-167" value="nginx&lt;br&gt;URL-&amp;gt;UpStream （）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-260" y="1870" width="216" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R2tXztMVlqhcrjkz3c3H-169" value="Target" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1255" y="1780" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-1" target="WfBOMLjH0p9CoCknMlKm-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-1" value="标准httpsURL（没有app_port）&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2120" y="1690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-2" target="WfBOMLjH0p9CoCknMlKm-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-2" target="WfBOMLjH0p9CoCknMlKm-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-2" target="WfBOMLjH0p9CoCknMlKm-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-2" value="域名解析" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2120" y="1810" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-3" target="WfBOMLjH0p9CoCknMlKm-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-51" value="要避免源和目标都是LAN设备，结果还走到WLAN绕了一圈" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="WfBOMLjH0p9CoCknMlKm-20">
          <mxGeometry x="0.0606" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-3" value="返回可直连的IP&lt;br&gt;GatewayNode IP&lt;br&gt;OOD IP" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1960" y="1960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-4" target="WfBOMLjH0p9CoCknMlKm-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-4" value="socks5@cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2320" y="2230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-5" value="dapp" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1960" y="2720" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-6" target="WfBOMLjH0p9CoCknMlKm-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-6" value="返回127.0.0.1&lt;br&gt;（cyfs-dns or cyfs-dns-client）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2120" y="1960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-7" target="WfBOMLjH0p9CoCknMlKm-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-7" value="返回fake_ip&lt;br&gt;(cyfs-dns or cyfs-dns-client,本地路由可识别）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2320" y="1960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-9" target="WfBOMLjH0p9CoCknMlKm-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-9" value="kRPC.select_service&lt;br&gt;必然可以使用cyfs基础设施" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2530" y="1550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-45" value="可以直连&lt;br&gt;URL中就有device_ip" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-10" target="WfBOMLjH0p9CoCknMlKm-5">
          <mxGeometry x="-0.0033" y="-30" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2590" y="1750" />
              <mxPoint x="2590" y="2765" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-10" target="WfBOMLjH0p9CoCknMlKm-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-47" value="不能直连&lt;br&gt;URL中是fake_ip" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="WfBOMLjH0p9CoCknMlKm-46">
          <mxGeometry x="0.628" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-10" target="WfBOMLjH0p9CoCknMlKm-18">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2650" y="2100" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2440" y="1720" />
              <mxPoint x="2440" y="1925" />
              <mxPoint x="2270" y="1925" />
              <mxPoint x="2270" y="2130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-53" value="不能直连,target_ip是127.0.0.1&lt;br&gt;http协议不需要app_port" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="WfBOMLjH0p9CoCknMlKm-49">
          <mxGeometry x="0.3266" y="-1" relative="1" as="geometry">
            <mxPoint x="169" y="-134" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-10" value="URL是target_ip:app_port" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2530" y="1690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-11" target="WfBOMLjH0p9CoCknMlKm-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-11" value="浏览器" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2120" y="1550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-18" target="WfBOMLjH0p9CoCknMlKm-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-32" value="不可直连&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;Tunnel转发" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="WfBOMLjH0p9CoCknMlKm-31">
          <mxGeometry x="-0.0889" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-18" target="WfBOMLjH0p9CoCknMlKm-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-34" value="可直连&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;转发 device_ip:port" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="WfBOMLjH0p9CoCknMlKm-33">
          <mxGeometry x="-0.3419" y="-1" relative="1" as="geometry">
            <mxPoint y="53" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-18" value="本机cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2120" y="2100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=-0.007;entryY=0.349;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-19" target="WfBOMLjH0p9CoCknMlKm-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-28" value="可直连&lt;br&gt;转发 device_ip:port&lt;br&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="WfBOMLjH0p9CoCknMlKm-25">
          <mxGeometry x="-0.3314" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-29" value="不可直连&lt;br&gt;Tunnel转发" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-19" target="WfBOMLjH0p9CoCknMlKm-21">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-19" value="cyfs-gateway@GatewayNode" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1750" y="2410" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-21" target="WfBOMLjH0p9CoCknMlKm-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-27" value="本机转发&lt;br&gt;device_id:port" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="WfBOMLjH0p9CoCknMlKm-26">
          <mxGeometry x="-0.1951" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-21" value="cyfs-gateway@ood" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1960" y="2570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-24" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-3" target="WfBOMLjH0p9CoCknMlKm-21">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1950" y="2220" as="sourcePoint" />
            <mxPoint x="2000" y="2170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="WfBOMLjH0p9CoCknMlKm-36" target="WfBOMLjH0p9CoCknMlKm-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-36" value="TUN-device逻辑&lt;br&gt;(TAP类似，也是把必要的包发到socks5)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2320" y="2100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-52" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1780" y="2320" as="sourcePoint" />
            <mxPoint x="2820" y="2320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-54" value="从安全角度，所有到dapp的直连也可以全部变成到cyfs_gatway@ood的直连，这样可以在流量到dapp前多一步通用的身份认证和权限控制" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2240" y="2710" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-55" value="注意所有的Gateway都要配置https证书" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1875" y="1760" width="165" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WfBOMLjH0p9CoCknMlKm-56" value="boot.get_sys_config_urls" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2370" y="1550" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c9E1ZpGCzoQJSTbrkEiL-1" value="ood的ip在zone_config里写了" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2330" y="1230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c9E1ZpGCzoQJSTbrkEiL-2" value="可以通过mDNS reslove得到(ood_hostname.local)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2480" y="1230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c9E1ZpGCzoQJSTbrkEiL-3" value="使用SN-DNS&lt;br&gt;ood_hostname.d.$zonename" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2850" y="1230" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c9E1ZpGCzoQJSTbrkEiL-4" value="使用 SN-HTTP api 查询" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2630" y="1230" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c9E1ZpGCzoQJSTbrkEiL-5" value="使用UDP广播（未实现）" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3070" y="1230" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c9E1ZpGCzoQJSTbrkEiL-7" value="cyfs-gateway基于 device_id的转发成功的前提&lt;br&gt;&lt;br&gt;1. 对方已经主动连上来了（已有）&lt;br&gt;2. 如果已经连上了system_config,则通过查询system_config里的信息可以知道怎么连&lt;br&gt;3. 如果没连上system_config,那么就要查询SN来尝试得到device的信息。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1499.5" y="2420" width="217" height="210" as="geometry" />
        </mxCell>
        <mxCell id="c9E1ZpGCzoQJSTbrkEiL-8" value="如何得到ood的IP?进而连接上system_config_service" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2580" y="1180" width="490" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="-r5Ze7tyJqIvGtKJbdpr" name="Web2.5 Gateway">
    <mxGraphModel dx="2060" dy="1183" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="TswZdNZvjIiPfdL7VVL8-2" target="TswZdNZvjIiPfdL7VVL8-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="TswZdNZvjIiPfdL7VVL8-2" target="TswZdNZvjIiPfdL7VVL8-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TswZdNZvjIiPfdL7VVL8-2" value="网页需要身份信息或授权" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="TswZdNZvjIiPfdL7VVL8-3" target="TswZdNZvjIiPfdL7VVL8-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TswZdNZvjIiPfdL7VVL8-3" value="Web2.5 SSO弹出授权确认" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="190" y="55" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="TswZdNZvjIiPfdL7VVL8-4" target="TswZdNZvjIiPfdL7VVL8-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TswZdNZvjIiPfdL7VVL8-4" value="插件弹出授权确认" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="190" y="205" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="TswZdNZvjIiPfdL7VVL8-5" target="TswZdNZvjIiPfdL7VVL8-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TswZdNZvjIiPfdL7VVL8-5" value="用户名密码登陆" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="55" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="TswZdNZvjIiPfdL7VVL8-6" target="TswZdNZvjIiPfdL7VVL8-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TswZdNZvjIiPfdL7VVL8-6" value="授权完成" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="550" y="55" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="TswZdNZvjIiPfdL7VVL8-7" target="TswZdNZvjIiPfdL7VVL8-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TswZdNZvjIiPfdL7VVL8-7" value="密码确认" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="205" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="TswZdNZvjIiPfdL7VVL8-8" target="TswZdNZvjIiPfdL7VVL8-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TswZdNZvjIiPfdL7VVL8-8" value="授权完成" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="550" y="205" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TswZdNZvjIiPfdL7VVL8-9" value="得到授权结果&lt;br&gt;（可服用的验证信息）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="700" y="130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="77g8CHzxrqSPtUL-fuaJ-10" target="77g8CHzxrqSPtUL-fuaJ-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-10" value="Zone Gateway" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="470" y="400" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-12" value="请求,带上验证信息" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="77g8CHzxrqSPtUL-fuaJ-11" target="77g8CHzxrqSPtUL-fuaJ-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-11" value="网页" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="400" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="77g8CHzxrqSPtUL-fuaJ-14" target="77g8CHzxrqSPtUL-fuaJ-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="77g8CHzxrqSPtUL-fuaJ-14" target="77g8CHzxrqSPtUL-fuaJ-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-14" value="验证信息" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="440" y="520" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="77g8CHzxrqSPtUL-fuaJ-15" target="77g8CHzxrqSPtUL-fuaJ-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-15" value="是相关身份的签名？&lt;br&gt;（提权操作）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="77g8CHzxrqSPtUL-fuaJ-16" target="77g8CHzxrqSPtUL-fuaJ-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-16" value="在认证中心验证session-key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="630" y="640" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-17" value="得到验证结果&lt;br&gt;userid:app" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="470" y="780" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77g8CHzxrqSPtUL-fuaJ-24" value="&lt;h1&gt;&lt;br&gt;&lt;/h1&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="50" y="940" width="190" height="120" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="1uNMX6mvBaSp4HqRDoat" name="典型拓扑图（无AI）">
    <mxGraphModel dx="2060" dy="2352" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="oj_82x6jqRfC_CBpTNMm-2" value="公网虚拟机，2C+2G+40G&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="640" y="-950" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="oj_82x6jqRfC_CBpTNMm-3" value="内网服务器，8C+8G+256G SSD + 12T HDD&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="320" y="-640" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="oj_82x6jqRfC_CBpTNMm-6" value="内网服务器，16C+16G+1T SSD+12T HDD&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="820" y="-720" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="oj_82x6jqRfC_CBpTNMm-7" value="内网NAS，4C+8G+480G SSD + 20T HDD&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="320" y="-520" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="oj_82x6jqRfC_CBpTNMm-8" value="内网NAS，2C+2G+240G SSD + 20T HDD&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="820" y="-600" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="oj_82x6jqRfC_CBpTNMm-11" value="内网PC_A" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="300" y="-740" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="oj_82x6jqRfC_CBpTNMm-12" value="内网PC_B" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="810" y="-810" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="oj_82x6jqRfC_CBpTNMm-13" value="摄像头A" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="430" y="-740" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="oj_82x6jqRfC_CBpTNMm-14" value="摄像头B" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="554" y="-740" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WS6oFyV8QBOQ3yGkfCg_-1" value="&amp;nbsp;公共wifi laptop" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="390" y="-1110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WS6oFyV8QBOQ3yGkfCg_-2" value="4G 手机" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="540" y="-1110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WS6oFyV8QBOQ3yGkfCg_-3" value="摄像头C" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="920" y="-810" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WS6oFyV8QBOQ3yGkfCg_-4" value="摄像头D" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="1040" y="-810" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WS6oFyV8QBOQ3yGkfCg_-5" value="智能TV A" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="-810" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WS6oFyV8QBOQ3yGkfCg_-6" value="一、在laptop浏览器里查看照片&lt;div&gt;二、手机里备份照片&lt;/div&gt;&lt;div&gt;三、在手机上查看摄像头B的实时视频&lt;/div&gt;&lt;div&gt;四、TV A浏览Zone内的所有视频&lt;/div&gt;&lt;div&gt;五、内网PC_A正在自动备份刚刚旅游回来的200G 照片&lt;/div&gt;&lt;div&gt;六、在laptop中编写代码，自动同步到内网PC_B上，并SSH到其上随时调试运行&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="325" y="-370" width="250" height="120" as="geometry" />
        </mxCell>
        <mxCell id="WS6oFyV8QBOQ3yGkfCg_-7" value="&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Zone的可访问性分为3级&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;1. HTTP可访问&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;2. P2P可访问&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;3. 不可访问&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;系统的HTTP可访问性的来源，在于系统里是否有一台有公网IP的服务器（通过端口映射可达的也算）&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;当系统只有P2P可访问性时，要求在客户端设备上安装访问网关，通过本地代理的方式访问&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="810" y="-430" width="230" height="170" as="geometry" />
        </mxCell>
        <mxCell id="DJexswNnpIkdy4-zwwvN-58" value="返回请求" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1642" y="3140" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="0Y17DWSzZZsquk_YFecL" name="Agent App 架构">
    <mxGraphModel dx="1686" dy="2239" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=8 8;" parent="1" vertex="1">
          <mxGeometry x="220" y="470" width="165" height="180" as="geometry" />
        </mxCell>
        <mxCell id="1hL2Gp-SP5Gqlcj0mtqj-1" value="AgentMsg Bus" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="365" y="290" width="135" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="dv2-v_jYuO4W5aKC8YRR-2" target="Ih0z0G4T_rDQ9Utei5Il-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dv2-v_jYuO4W5aKC8YRR-2" value="Agent2" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="440" y="160" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="dv2-v_jYuO4W5aKC8YRR-3" target="Ih0z0G4T_rDQ9Utei5Il-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dv2-v_jYuO4W5aKC8YRR-3" value="Agent3" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="160" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="dv2-v_jYuO4W5aKC8YRR-4" value="AI Compute Kernel" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="525" y="290" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dv2-v_jYuO4W5aKC8YRR-5" value="Compute Nodes&lt;br&gt;(System Plugin)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="625" y="330" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="dv2-v_jYuO4W5aKC8YRR-6" value="Tunnels&lt;br&gt;（System Plugins）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="260" y="330" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-1" value="Agent1" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="500" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-2" value="Environments&lt;br&gt;(App Services)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="525" y="230" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-4" value="System AI Functions&lt;br&gt;(System Plugins)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="760" y="290" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-5" target="RtljSQaqW_wrNChCsR5C-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-5" value="Agent&lt;br&gt;Msg" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="110" y="760" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-7" target="RtljSQaqW_wrNChCsR5C-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-7" target="RtljSQaqW_wrNChCsR5C-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-7" value="LLM Process" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="250" y="770" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-8" target="RtljSQaqW_wrNChCsR5C-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-8" target="oH5CQoW2K4tSOn_9oIRQ-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-8" value="Compute Kernel" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="250" y="900" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-13" target="RtljSQaqW_wrNChCsR5C-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-13" target="RtljSQaqW_wrNChCsR5C-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-13" value="Execute Functions" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="415" y="770" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-17" target="RtljSQaqW_wrNChCsR5C-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-17" value="System Services&lt;br&gt;(Knowledge,etc)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="415" y="900" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-22" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="90" y="870" as="sourcePoint" />
            <mxPoint x="700" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-24" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="220" y="720" width="340" height="130" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-25" value="Agent1 Process" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="240" y="730" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-26" value="Agent" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="420" y="530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-7" value="Agent Msg&lt;div&gt;cyfs://&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-27" target="oH5CQoW2K4tSOn_9oIRQ-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-27" value="AgentMsg Bus" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="420" y="630" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.209;entryY=1.03;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-27" target="RtljSQaqW_wrNChCsR5C-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.6;entryY=0.007;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-26" target="RtljSQaqW_wrNChCsR5C-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.665;entryY=0.003;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-27" target="RtljSQaqW_wrNChCsR5C-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-32" value="Kernel" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="110" y="870" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-33" value="使用内核(服务）的方法是kRPC" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1090" y="710" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-1" value="除内核外，扩展系统功能的4种模块&lt;br&gt;App Services:&lt;br&gt;Compents:加载到App空间使用的组件&lt;br&gt;Pulgins:加载到System Service里使用&lt;br&gt;System Service:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="985" y="475" width="290" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-4" value="Memory" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="232.5" y="550" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-5" value="Workspace" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="307.5" y="550" width="65" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-6" value="LLM&amp;nbsp; Process" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="232.5" y="590" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-7" value="Agent Runtime" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="230" y="470" width="97.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-8" value="Memory,Workspace,LLM Process可以看成Agent Framework Lib. 在系统看来,Agent 是一个触发机制稍有特殊的进程" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="230" y="-30" width="245" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-9" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=8 8;" parent="1" vertex="1">
          <mxGeometry x="780" y="118" width="180" height="90" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-10" value="Workflow Runtime" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="780" y="128" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-14" value="Workspace" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="800" y="158" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-18" value="Ageng2,Agent3有权限访问Workflow的workspace" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="570" y="98" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-1" value="Local&amp;nbsp;&lt;div&gt;Grpahic Card&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="180" y="990" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-2" value="LLM Cloud" style="shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="295" y="990" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-3" value="DFS" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="475" y="982.5" width="60" height="65" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-4" value="DMC" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="620" y="982.5" width="60" height="65" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-5" value="Backup" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="oH5CQoW2K4tSOn_9oIRQ-3" target="oH5CQoW2K4tSOn_9oIRQ-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-6" value="Other Zone" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="680" y="620" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.605;entryY=-0.04;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-8" target="oH5CQoW2K4tSOn_9oIRQ-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram name="整体拓扑图" id="p2P2LeGknYOb5AMSB5fG">
    <mxGraphModel dx="2896" dy="2268" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="WxojViiRUoVEC4uaUHlK-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-2" target="WxojViiRUoVEC4uaUHlK-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-2" value="Zone Boot Loader Config" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-5" target="WxojViiRUoVEC4uaUHlK-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-5" target="WxojViiRUoVEC4uaUHlK-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-5" value="Zone Boot Loader&lt;br&gt;启动/连上ETCD" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-6" value="Zone Loader Config配置保存在区块链或其它可靠的配置管理系统上。是整个系统的Bootup, 其配置和可访问性不受到任何Zone内Device的影响" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="320" y="1020" width="250" height="95" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-7" value="根据NameSerice里的配置，Zone内需要引导启动etcd.对Zone内的 Server Node来说，boot后的首要任务就是读取Zone Name Service，并根据配置尝试连接etcd或运行etcd服务" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="560" y="822.5" width="250" height="95" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-12" target="WxojViiRUoVEC4uaUHlK-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="470" y="690" />
              <mxPoint x="700" y="690" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-12" target="WxojViiRUoVEC4uaUHlK-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.106;exitY=0.017;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitPerimeter=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-12" target="WxojViiRUoVEC4uaUHlK-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="393" y="690" />
              <mxPoint x="370" y="690" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="WxojViiRUoVEC4uaUHlK-12" target="WxojViiRUoVEC4uaUHlK-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-12" value="Apply Node Config" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-13" value="根据etcd里的信息，应用最新的Node Config。该Config可以比较复杂，配置了在一个Node上会允许哪些 Service/容器/VM. 该配置文件的设计应该重点参考kubernetes" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="560" y="720" width="250" height="95" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-15" target="WxojViiRUoVEC4uaUHlK-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-15" value="Join / Host K8S" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="570" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-16" value="Control Service" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="570" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-17" value="Control Container" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="310" y="570" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-19" target="WxojViiRUoVEC4uaUHlK-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-19" value="Control VM" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="570" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-20" value="SDN Control" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="190" y="840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-21" value="尽管网络中使用新的协议，用zone/device&amp;nbsp; object进行寻址，但为了向前兼容，也必须Apply典型的网络拓扑" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-10" y="855" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-22" value="加入另一个Zone" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-23" value="兼容现有k8s应用" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-24" value="网络拓扑配置（SDN?)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="620" y="1540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-25" value="正确配置物理机，磁盘（做好故障分区）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="460" y="1540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-26" value="电力" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="770" y="1540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-27" value="物理集群1" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-28" value="物理集群2" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="390" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-29" value="物理集群3" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="620" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-30" value="逻辑集群" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="200" y="1340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-31" value="逻辑集群" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="1340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-32" value="App1" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="210" y="1260" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-33" value="App1" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="1260" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-34" value="App2" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="1190" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-35" value="App1" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="1260" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-36" value="App2" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="1190" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-37" value="App1" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="630" y="1350" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-38" value="App2" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="630" y="1280" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-39" value="App3" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="1130" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-40" value="逻辑集群" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="470" y="1340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-41" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=1;entryDx=0;entryDy=0;" parent="1" target="WxojViiRUoVEC4uaUHlK-29" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="1540" as="sourcePoint" />
            <mxPoint x="480" y="1500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-42" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-29" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="820" y="1530" as="sourcePoint" />
            <mxPoint x="940" y="1540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-43" value="1. 一个集群（Zone）是一个BuckyOS instance&lt;br&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;2.多个物理集群可以编织成1个逻辑集群，一个物理集群可以承载多个逻辑集群(n*m)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;3.物理集群的构成既可以是专业运维的方式，也可是由一系列接入互联网的共主设备构成&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;4.通过可选的（但绝对存在）的Internet(web3)基础设施，可以在可靠的成本下，安全的对集群本身的改变进行支持。解决循环依赖问题&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-210" y="1530" width="480" height="70" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-44" value="Internet (Web3) Infra , 可以简化集群的配置" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="270" y="1650" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-45" value="DFS（部分依赖Object Storage）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="315" y="160" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-46" value="etcd" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="495" y="300" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-47" value="system config(对etcd的简单封装）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="230" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-48" value="system logs" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="410" y="80" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-49" value="pkg manager" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="80" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-50" value="Object Storage" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="495" y="160" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-51" value="Gateway/BUS" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="785" y="80" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-53" value="DFS的实现要不要依赖Gateway?" style="strokeWidth=1;shadow=0;dashed=0;align=center;html=1;shape=mxgraph.mockup.text.stickyNote2;fontColor=#666666;mainText=;fontSize=17;whiteSpace=wrap;fillColor=#ffffcc;strokeColor=#F62E00;" parent="1" vertex="1">
          <mxGeometry x="1450" y="150" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-54" value="Knowledge Base&lt;br&gt;（几乎是本地搜索引擎）" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="595" y="80" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-55" value="Local Cache" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="680" y="160" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-56" value="Schedulor" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="300" y="-10" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-57" value="App（Service） Runtime" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="495" y="-10" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-58" value="System Services（可扩展）&lt;br&gt;比如装一个Redis" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="690" y="-10" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-59" value="ACL" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="590" y="230" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-60" target="WxojViiRUoVEC4uaUHlK-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-60" value="CI/CD" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-130" y="80" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-62" value="App1" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="530" y="-90" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-63" value="App2" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="460" y="-160" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-64" value="运行在App容器里的是标准APP。&lt;br&gt;运行在Service 容器中的（通常是k8s兼容）是兼容Service" style="strokeWidth=1;shadow=0;dashed=0;align=center;html=1;shape=mxgraph.mockup.text.stickyNote2;fontColor=#666666;mainText=;fontSize=17;whiteSpace=wrap;fillColor=#ffffcc;strokeColor=#F62E00;" parent="1" vertex="1">
          <mxGeometry x="-380" y="-370" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-65" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-185" y="-20" as="sourcePoint" />
            <mxPoint x="1325" y="-20" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-66" value="UserMode" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-100" y="-50" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-67" value="KernelMode" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-100" y="-20" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-68" value="D-RDB,D-VDB&lt;br&gt;通过System Service扩展" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="940" y="-10" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-70" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-58" target="WxojViiRUoVEC4uaUHlK-68" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="890" y="40" as="sourcePoint" />
            <mxPoint x="940" y="-10" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-71" value="k8s的高可用RDB配置在我们的系统里如何配置？会不会有更好的表现" style="strokeWidth=1;shadow=0;dashed=0;align=center;html=1;shape=mxgraph.mockup.text.stickyNote2;fontColor=#666666;mainText=;fontSize=17;whiteSpace=wrap;fillColor=#ffffcc;strokeColor=#F62E00;" parent="1" vertex="1">
          <mxGeometry x="1420" y="-80" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="UW_UZQUzNR0JYxidc_pB-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="1" source="UW_UZQUzNR0JYxidc_pB-1" target="WxojViiRUoVEC4uaUHlK-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UW_UZQUzNR0JYxidc_pB-1" value="Backup Provider" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="220" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UW_UZQUzNR0JYxidc_pB-2" value="Name Service" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="530" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UW_UZQUzNR0JYxidc_pB-4" value="Pkg Repo" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="680" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rTdR6_QgMSp6Smcmj7B9-1" value="AgentA" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="585" y="-160" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="rTdR6_QgMSp6Smcmj7B9-2" value="AgentB" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="700" y="-160" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="rTdR6_QgMSp6Smcmj7B9-3" value="WorkspaceA" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="650" y="-230" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Ql8OTb-lViOZywzSRGM0-1" value="kRPC&lt;br&gt;(System-Call)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="-50" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Rz-CEfaY1QC__uy7RfOJ" name="系统组件图">
    <mxGraphModel dx="2896" dy="1168" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="sXJHHGRh78HDzlqQBdKx-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="fQbEntED_hgijbA0nxCI-1" target="sXJHHGRh78HDzlqQBdKx-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fQbEntED_hgijbA0nxCI-1" value="node_daemon&lt;br&gt;(亚星）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fQbEntED_hgijbA0nxCI-2" value="pkg repo server" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fQbEntED_hgijbA0nxCI-3" value="zone name service&lt;br&gt;（DNS兼容）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="360" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-1" value="backup server&lt;br&gt;(DMC Miner)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="205" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-2" value="k8s service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="180" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-3" value="ceph" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="260" y="490" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-4" value="dcfs" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="185" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-5" value="docker mgr" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="235" y="650" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-6" value="vm mgr" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="355" y="650" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-7" value="service mgr" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="115" y="650" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-8" value="backup client" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="205" y="780" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-9" value="zone name client&lt;br&gt;（国仁）" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="365" y="780" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-10" value="pkg mgr&lt;br&gt;（lzc设计+松哥）" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="780" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-11" value="CyberChat App&lt;br&gt;(Zone Mgr)" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="645" y="850" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-12" value="Zone Mgr Cli" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="645" y="780" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-13" value="ETH" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="200" y="920" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-14" value="DNS?" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="315" y="920" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-15" value="cyfs web3 bridge" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="425" y="920" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-16" value="DMC20" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="85" y="920" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="sXJHHGRh78HDzlqQBdKx-17" target="sXJHHGRh78HDzlqQBdKx-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="sXJHHGRh78HDzlqQBdKx-17" target="fQbEntED_hgijbA0nxCI-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-18" value="machine_daemon(OEM可修改）&lt;br&gt;(该进程是通用的激活进程，不会和node_daemon同时运行）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="575" y="680" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-19" value="Zong Mgr WebUI" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="920" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-21" value="etcd" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-250" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="g8mHNLGIDdJ0_Dwjakep-1" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" source="UwzjYA9SK8VwgR3xvNyD-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-35" y="440" as="sourcePoint" />
            <mxPoint x="765" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="g8mHNLGIDdJ0_Dwjakep-2" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-180" y="760" as="sourcePoint" />
            <mxPoint x="920" y="759.66" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jlFWFTiqVMc-uzdDFwOW-1" value="kLog&lt;br&gt;(振爷)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-410" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UwzjYA9SK8VwgR3xvNyD-2" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" target="UwzjYA9SK8VwgR3xvNyD-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-35" y="440" as="sourcePoint" />
            <mxPoint x="765" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UwzjYA9SK8VwgR3xvNyD-1" value="kRPC&lt;br&gt;(lzc)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-100" y="410" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TzMTU6Jy_J-msooE1Wl0-1" value="sys_config&lt;br&gt;(欣乐)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-560" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TzMTU6Jy_J-msooE1Wl0-2" value="app" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-560" y="210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TzMTU6Jy_J-msooE1Wl0-3" value="kRPC" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-560" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TzMTU6Jy_J-msooE1Wl0-5" value="etcd.a" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-560" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TzMTU6Jy_J-msooE1Wl0-6" value="sys_acl" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-710" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="o1zVtTipv5lU6a80Wlv1-1" value="BuckyOS Kernel" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="580" y="550" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="o1zVtTipv5lU6a80Wlv1-2" value="BuckyOS App" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="570" y="350" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="69FT-Gw5U4DT3xUlIVEL-1" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" target="sXJHHGRh78HDzlqQBdKx-17" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-70" y="760" as="sourcePoint" />
            <mxPoint x="780" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-17" value="cyfs gateway" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-60" y="730" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="JvShwL8G7op1oZlSJPBe" name="一些流程">
    <mxGraphModel dx="2046" dy="1168" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-1" value="用户扩展的App的运行逻辑" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1290" y="1070" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-3" target="Uhl6TVcSV4RiziGJbxAS-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-3" value="内核启动应用" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1330" y="1160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;dashPattern=8 8;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-5" target="Uhl6TVcSV4RiziGJbxAS-64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-5" value="从系统应用安装配置中读取应用的拓扑配置，并修改ETCD" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1330" y="1260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-7" target="Uhl6TVcSV4RiziGJbxAS-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-7" value="app process start" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-9" target="Uhl6TVcSV4RiziGJbxAS-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-9" value="从系统的/etc/dapp_id/目录下读取核心配置" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1580" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-11" target="Uhl6TVcSV4RiziGJbxAS-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-11" value="初始化，通过DFS读取数据并校验" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1685" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-13" target="Uhl6TVcSV4RiziGJbxAS-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-13" value="读取/更新 Local Cache（可选）" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1810" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-14" value="调用系统服务" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-15" target="Uhl6TVcSV4RiziGJbxAS-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-15" value="提供APP服务" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1930" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-17" target="Uhl6TVcSV4RiziGJbxAS-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-17" value="更新新的ETCD配置" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="960" y="175" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-19" target="Uhl6TVcSV4RiziGJbxAS-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-19" value="node启动，读取内核配置，准备ETCD数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="960" y="275" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-21" target="Uhl6TVcSV4RiziGJbxAS-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-21" value="从已知的备份路径下载并校验" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="770" y="275" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-22" value="数据校验通过，启动ETCD" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="960" y="365" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-24" target="Uhl6TVcSV4RiziGJbxAS-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-24" value="BIOS阶段：机器等待激化（Zone信息）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1210" y="130" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-25" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-26" target="Uhl6TVcSV4RiziGJbxAS-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-26" value="buckyos引导阶段: Zone完成引导，成为可用的Zone" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1210" y="270" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-28" target="Uhl6TVcSV4RiziGJbxAS-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-28" value="各个System Service开始初始化" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1210" y="410" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-29" value="系统启动成功，可以运行用户态的软件" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1217.5" y="550" width="135" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-30" value="当系统发生较大变化后，集群有可能会重启。这个阶段出现问题，一般需要物理机操作进行修复" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1380" y="285" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-31" value="系统发生较大变化后，SystemService也需要较长时间初始化。这个阶段出现问题，可以用 OS CLI进行修复（）" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1385" y="405" width="170" height="65" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-32" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;rotation=-180;" parent="1" vertex="1">
          <mxGeometry x="1140" y="250" width="50" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-34" target="Uhl6TVcSV4RiziGJbxAS-70" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-34" value="内核调度器确认故障&lt;br&gt;（故障的发现是可扩展的）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1925" y="220" width="157.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-70" target="Uhl6TVcSV4RiziGJbxAS-67" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1997.5" y="542.5" as="sourcePoint" />
            <mxPoint x="1997.5" y="637.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-37" target="Uhl6TVcSV4RiziGJbxAS-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-37" value="产生系统警告，系统进入黄色状态" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2142.5" y="425" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-39" target="Uhl6TVcSV4RiziGJbxAS-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-39" value="系统停机，进入维修诊断（只读）状态" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1742.5" y="435" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-41" target="Uhl6TVcSV4RiziGJbxAS-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-41" value="系统配置更新（Scale）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="210" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-42" value="完成修复后，手工重新启动系统" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1742.5" y="550" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-43" value="等待修复完成后（更新配置），手工标记故障排除" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="2142.5" y="545" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-45" target="Uhl6TVcSV4RiziGJbxAS-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-45" value="配置改变工具会尽力构造一次安全的配置更新" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2620" y="210" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-47" target="Uhl6TVcSV4RiziGJbxAS-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-47" value="创建 维护Task（可选）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="320" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-49" target="Uhl6TVcSV4RiziGJbxAS-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-49" value="等待阻塞维护任务完成" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="420" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-50" value="所有维护任务完成" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-51" target="Uhl6TVcSV4RiziGJbxAS-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-51" value="系统正常运行&lt;br&gt;（维护任务在后台运行）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="520" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-52" value="系统正常运行" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="640" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-53" style="edgeStyle=none;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-54" target="Uhl6TVcSV4RiziGJbxAS-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-54" value="etcd故障" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1730" y="72.5" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-55" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-56" target="Uhl6TVcSV4RiziGJbxAS-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-56" value="租约协议故障？&lt;br&gt;严格控制租约的使用" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1930" y="72.5" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-57" style="edgeStyle=none;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.797;entryY=0.017;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-58" target="Uhl6TVcSV4RiziGJbxAS-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-58" value="内核日志与应用日志" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2125" y="72.5" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-60" target="Uhl6TVcSV4RiziGJbxAS-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-60" value="根据拓扑配置在一些node上启动容器(Docer/VM)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1365" width="120" height="55" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-62" target="Uhl6TVcSV4RiziGJbxAS-64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-62" value="node_daemon循环" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-64" target="Uhl6TVcSV4RiziGJbxAS-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-64" value="读取etcd,发现node配置改变" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-65" value="内核服务" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1330" y="1930" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-66" value="我们鼓励App开发者使用基于Object Storage的DFS来提高服务的，性能，可靠性和可用性&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1350" y="1700" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-67" value="内核调度器尝试修改运行配置（可选）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1925" y="425" width="157.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-70" target="Uhl6TVcSV4RiziGJbxAS-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-70" target="Uhl6TVcSV4RiziGJbxAS-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-70" value="故障决策" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1925" y="330" width="157.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-71" value="Zone的启动流程" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="950" y="70" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-72" value="Zone的故障处理" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1742.5" y="20" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-74" target="Uhl6TVcSV4RiziGJbxAS-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-74" value="Zone拓扑改变" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2620" y="110" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-75" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-76" target="Uhl6TVcSV4RiziGJbxAS-80" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-76" value="备份开始" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-77" value="备份&lt;br&gt;对于有3个物理节点的Zone来说，数据是基本可靠的保持在DFS上的。备份行为指的是定期的Zone外冷备份（存在丢一小部分数据的可能性）。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="3360" y="43" width="220" height="67" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-78" value="从备份中恢复&lt;br&gt;1.手工触发&lt;br&gt;2. Zone重建" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="3850" y="40" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-80" target="Uhl6TVcSV4RiziGJbxAS-84" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-80" value="系统进入只读状态（可选）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-81" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-82" target="Uhl6TVcSV4RiziGJbxAS-86" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-82" value="打包系统保存在dcfs上的数据（各个system service同步备份）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="480" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-84" target="Uhl6TVcSV4RiziGJbxAS-82" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-84" value="打包etcd的所有数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-86" target="Uhl6TVcSV4RiziGJbxAS-88" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-86" value="备份上述数据到backup server" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="590" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-88" target="Uhl6TVcSV4RiziGJbxAS-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-88" value="逐个应用备份数据&lt;br&gt;（并行备份）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="710" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-89" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-90" target="Uhl6TVcSV4RiziGJbxAS-91" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-90" value="备份完成" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-91" value="在NameService(Meta-Chain)上保存备份结果（可选）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="930" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-93" target="Uhl6TVcSV4RiziGJbxAS-95" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-93" value="开始恢复" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-94" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-95" target="Uhl6TVcSV4RiziGJbxAS-105" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-95" value="系统进入未引导状态" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-96" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-97" target="Uhl6TVcSV4RiziGJbxAS-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-97" value="恢复etcd数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="560" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-98" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-99" target="Uhl6TVcSV4RiziGJbxAS-101" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-99" value="启动etcd" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-100" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-101" target="Uhl6TVcSV4RiziGJbxAS-107" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-101" value="恢复保存在DFS上的系统数据数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-102" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-103" target="Uhl6TVcSV4RiziGJbxAS-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-103" value="从备份服务器上获取备份" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-104" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-105" target="Uhl6TVcSV4RiziGJbxAS-103" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-105" value="得到待恢复备份数据的元信息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="360" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-106" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-107" target="Uhl6TVcSV4RiziGJbxAS-108" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-107" value="恢复保存在DFS上的应用数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="860" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-108" value="恢复完成，进入Zone的引导逻辑" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="950" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-109" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-110" target="Uhl6TVcSV4RiziGJbxAS-112" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-110" value="安装应用" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1100" y="1160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-111" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-112" target="Uhl6TVcSV4RiziGJbxAS-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-112" value="根据Zone的拓扑，自动构建启动拓扑配置并保存" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1100" y="1260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-113" value="和k8s不同，我们并不在小的Zone里启用“编排”，而是更多以固定配置来运行应用服务" style="strokeWidth=1;shadow=0;dashed=0;align=center;html=1;shape=mxgraph.mockup.text.stickyNote2;fontColor=#666666;mainText=;fontSize=17;whiteSpace=wrap;fillColor=#ffffcc;strokeColor=#F62E00;" parent="1" vertex="1">
          <mxGeometry x="1180" y="1370" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-1" target="tug6-lGKLGd_aUpJzQRX-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-1" value="read zone_name from node_identifiy" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="130" y="130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-2" target="tug6-lGKLGd_aUpJzQRX-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-2" target="tug6-lGKLGd_aUpJzQRX-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-2" value="zone_name is did?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="110" y="255" width="160" height="95" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-3" value="zone_cofing = name_client.resolve_did(zone_id)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="510" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-4" target="tug6-lGKLGd_aUpJzQRX-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-4" value="name_info = name_client.resolve_name(zone_name)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="330" y="277.5" width="260" height="50" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-6" target="tug6-lGKLGd_aUpJzQRX-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-6" value="parser name_info, &lt;br&gt;get zone_id&lt;br&gt;might get zone_did_document&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="375" y="510" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-7" target="tug6-lGKLGd_aUpJzQRX-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-7" value="zone_id = zone_name" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="130" y="407.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tug6-lGKLGd_aUpJzQRX-16" target="tug6-lGKLGd_aUpJzQRX-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-16" value="provider do query and verify result" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="375" y="380" width="170" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="8X-4KyuMmUJfdoSqHJU_" name="url解析流程">
    <mxGraphModel dx="1168" dy="667" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="jOEf7tCecbJKnrepLAmB-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="xWmjOJX_WQBPB9I7HeY5-1" target="jOEf7tCecbJKnrepLAmB-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xWmjOJX_WQBPB9I7HeY5-1" value="zone_gateway_ip = resolve($nameid)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="130" y="140" width="155" height="70" as="geometry" />
        </mxCell>
        <mxCell id="xWmjOJX_WQBPB9I7HeY5-2" value="https://$nameid/index.html" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="120" y="50" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jOEf7tCecbJKnrepLAmB-1" value="zone_gateway_ip = resolve($nameid)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="130" y="280" width="155" height="70" as="geometry" />
        </mxCell>
        <mxCell id="jOEf7tCecbJKnrepLAmB-2" value="标准浏览器" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="160" y="10" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jOEf7tCecbJKnrepLAmB-3" value="CYFS浏览器" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="530" y="10" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jOEf7tCecbJKnrepLAmB-4" value="https://$nameid/index.html" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="487.5" y="50" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jOEf7tCecbJKnrepLAmB-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="jOEf7tCecbJKnrepLAmB-5" target="jOEf7tCecbJKnrepLAmB-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jOEf7tCecbJKnrepLAmB-5" value="did_doc = resolve_did($nameid)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="495" y="110" width="155" height="70" as="geometry" />
        </mxCell>
        <mxCell id="jOEf7tCecbJKnrepLAmB-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="jOEf7tCecbJKnrepLAmB-6" target="jOEf7tCecbJKnrepLAmB-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jOEf7tCecbJKnrepLAmB-6" value="zone_doc = resolve_did(did_doc.default_zoneid)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="465" y="230" width="215" height="70" as="geometry" />
        </mxCell>
        <mxCell id="jOEf7tCecbJKnrepLAmB-7" value="resolve backend &lt;br&gt;may be ETH" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="740" y="90" width="180" height="90" as="geometry" />
        </mxCell>
        <mxCell id="jOEf7tCecbJKnrepLAmB-8" value="read zone_gateway_ip from zone_doc" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="495" y="350" width="155" height="70" as="geometry" />
        </mxCell>
        <mxCell id="jOEf7tCecbJKnrepLAmB-12" value="verfiy did-doc &lt;br&gt;after resolve&lt;br&gt;did &amp;lt;-&amp;gt; doc&lt;br&gt;doc.proof" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="735" y="230" width="190" height="100" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="yT246MxJrNwgLdexHOI-" name="Page-13">
    <mxGraphModel dx="2896" dy="1168" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="soKJ22ut9W6iChpHjKMU-1" value="安装app&lt;br&gt;bpm install buckyos-filebrowser" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="65" y="80" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-2" value="升级frame&lt;br&gt;bpm upgrade dfs" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-200" y="80" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-3" value="升级系统&lt;br&gt;bpm upgrade" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-470" y="80" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-4" value="自动执行，bpm update&lt;br&gt;同步pakcage index&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="220" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-5" value="repo server&lt;br&gt;（other repo）" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="620" y="200" width="160" height="90" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.999;entryY=0.433;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="soKJ22ut9W6iChpHjKMU-5" target="soKJ22ut9W6iChpHjKMU-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-7" value="得到buckyos-filebrowser的defualt 版本id" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="330" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-8" value="发起下载任务,并等待任务结束" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="430" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-13" value="更新zone repo中的 index,让buckyos-filebrowser的版本号指向新版本" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="530" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-14" value="zone-repo-server的操作完成" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="630" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="soKJ22ut9W6iChpHjKMU-15" target="soKJ22ut9W6iChpHjKMU-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-17" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="50" y="170" width="260" height="550" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-15" value="oods&lt;br&gt;(other repo)" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="610" y="415" width="160" height="90" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-18" value="repo install pkg" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="130" y="180" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-19" value="Bucky Store.install app" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="50" y="770" width="260" height="320" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-21" value="询问zone-repo 对应的pkg是否已经就绪" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="820" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-22" value="等待用户Confirm Install (有参数配置)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="890" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-23" value="写入SystemConfig" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="960" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-24" value="由repo server组成的network" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="380" y="330" width="195" height="30" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-25" value="唤醒调度器，调度器构造node-config" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="1020" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-26" value="node_daemon&lt;br&gt;&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="50" y="1150" width="260" height="350" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-27" value="启动app service(有更精细的pkgid)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="1190" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-28" value="尝试load 指定版本的pkg" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="1270" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-29" value="如load 失败，则去本地的repo-server上下载pkg" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="1350" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0.998;entryY=0.37;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="soKJ22ut9W6iChpHjKMU-17" target="soKJ22ut9W6iChpHjKMU-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-31" value="再次尝试启动" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="1430" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-32" value="一个应用的安装，会给系统里添加多个pkg" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="365" y="1240" width="155" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="i7rDc_Y2ZXbLJ_Izxtpt" name="ndn-lib">
    <mxGraphModel dx="1411" dy="1906" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="VGbAvs_T3tfYimthB3y_-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-1" target="VGbAvs_T3tfYimthB3y_-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-1" target="VGbAvs_T3tfYimthB3y_-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-1" target="VGbAvs_T3tfYimthB3y_-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-1" value="Pull Chunk&lt;br&gt;类似tokio::copy" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="150" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-2" target="VGbAvs_T3tfYimthB3y_-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-2" target="VGbAvs_T3tfYimthB3y_-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-2" value="1. Open Writer&lt;br&gt;允许断点续传?" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="70" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-17" value="否" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-6" target="VGbAvs_T3tfYimthB3y_-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-6" value="Chunk&lt;br&gt;Exist?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="425" y="60" width="145" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-8" target="VGbAvs_T3tfYimthB3y_-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-8" value="3. Try open reader with offset" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-9" value="Return Writer" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="630" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-11" target="VGbAvs_T3tfYimthB3y_-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-21" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="VGbAvs_T3tfYimthB3y_-20">
          <mxGeometry x="0.1468" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-22" value="可以" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-11" target="VGbAvs_T3tfYimthB3y_-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-11" value="通过quickhash验证判断可以断点续传?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="605" y="130" width="185" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-13" value="删除旧文件并Return Writer" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="840" y="70" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-14" value="Seek and Return Writer" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="990" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-15" target="VGbAvs_T3tfYimthB3y_-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-15" value="读取进度" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="810" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-19" value="是" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.025;entryY=0.497;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-6" target="VGbAvs_T3tfYimthB3y_-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-26" value="2.know progress" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="170" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-29" value="4.边下边验证边保存进度(针对不同大小有不同的默认行为)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-34" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-31" target="VGbAvs_T3tfYimthB3y_-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-36" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-31" target="VGbAvs_T3tfYimthB3y_-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-31" value="Chunk&lt;br&gt;Exist?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="425" y="290" width="145" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-32" value="Return Reader" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="570" y="230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-35" value="Return Error" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="580" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-39" value="常见的Chunk Reader和Chunk Writer的后端" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="80" y="490" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-40" target="VGbAvs_T3tfYimthB3y_-41">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-40" target="VGbAvs_T3tfYimthB3y_-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-40" value="Reader" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="125" y="630" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-41" value="FileReader" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-42" value="(Http) Stream Reader" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="670" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-43" target="VGbAvs_T3tfYimthB3y_-45">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-43" value="Write" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="860" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-44" value="File Write" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="310" y="800" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-45" value="(Http) Stream Appender" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="310" y="920" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=-0.027;entryY=0.429;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-43" target="VGbAvs_T3tfYimthB3y_-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-50" value="Chunk Builder: 基于现有数据,构建Chunk&lt;br&gt;普通文件:计算ChunkId和quickhash&lt;br&gt;大文件:构建chunklist&lt;br&gt;小文件:计算ChunkId,(并成为一个大chunk的一部分)&lt;br&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="610" y="495" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-53" target="VGbAvs_T3tfYimthB3y_-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-53" target="VGbAvs_T3tfYimthB3y_-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-53" value="URL is chunk?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="-170" width="145" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-56" value="Return Reader" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="-100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-57" target="VGbAvs_T3tfYimthB3y_-58">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-57" value="URL Point to&amp;nbsp; known named object" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="360" y="-230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-58" target="VGbAvs_T3tfYimthB3y_-59">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-58" value="parse named object" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="-230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VGbAvs_T3tfYimthB3y_-59" target="VGbAvs_T3tfYimthB3y_-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-59" value="get real chunk url url2" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="710" y="-230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-60" value="return Open Chunk&lt;br&gt;Reade By URL2" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="870" y="-230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-66" value="Open Chunk Reader By URL" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="85" y="-260" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-67" value="Pull Chunk必然是单源的" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="55" y="100" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-69" value="Put ChunkB" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1050" y="475" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-70" value="Put Named Object&lt;br&gt;Say : ChunkA is ChunkB" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1240" y="475" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
