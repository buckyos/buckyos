<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/26.0.16 Chrome/132.0.6834.196 Electron/34.2.0 Safari/537.36" version="26.0.16" pages="11">
  <diagram id="oIMGCOtcYAl4cptAXmcz" name="Architecture">
    <mxGraphModel dx="2908" dy="1198" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="MFu4L8sQsqwjJeb4Q1V4-1" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" target="slN-2MWBcHAUPgdGicAb-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1120" y="730" as="sourcePoint" />
            <mxPoint x="201" y="729" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-2" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" source="MFu4L8sQsqwjJeb4Q1V4-2" target="slN-2MWBcHAUPgdGicAb-12" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1120" y="730" as="sourcePoint" />
            <mxPoint x="-130" y="732" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-36" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-12" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1120" y="732" as="sourcePoint" />
            <mxPoint x="-130" y="732" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-2" value="name service client&lt;br&gt;(zone config loader)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="164" y="795" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-3" value="etcd" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="830" y="872" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-5" target="slN-2MWBcHAUPgdGicAb-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-5" value="backup client" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="406" y="789" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-7" value="http backup&amp;nbsp;&lt;br&gt;client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="321" y="879" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-8" value="DMC backup&lt;br&gt;client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="446" y="879" width="139" height="40" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-9" value="system_config" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="830" y="804" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-10" target="slN-2MWBcHAUPgdGicAb-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="754" y="880" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-10" value="pkg_loader" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="649" y="790" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-14" value="http pkg repo client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="569" y="880" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.543;entryY=0.008;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-5" target="slN-2MWBcHAUPgdGicAb-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-17" value="cyfs pkg repo client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="690" y="879" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-22" value="app service container" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="616" y="430" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-23" value="app1 service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="626" y="470" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-24" value="kRPC" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="346" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-25" value="scheduler" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="631" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-26" value="app service container" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="486" y="430" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-27" value="app2 service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="496" y="470" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-30" value="app service vm" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="346" y="430" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-31" value="app3 service@vm" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="356" y="470" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-32" value="dfs&lt;br&gt;(glusterFS or dcfs)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="213" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-33" value="user-library" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="85" y="570" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-35" value="acl_config" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="830" y="740" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-37" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1120" y="540" as="sourcePoint" />
            <mxPoint x="-130" y="540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-38" value="k8s&lt;br&gt;(3rd service)" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="486" y="570" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-39" value="service-store" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="631" y="570" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-43" value="control-panel" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="820" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="jtHWyDhdxYCyiww5QqfK-1" value="&amp;nbsp;DNS client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="880" width="124" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jtHWyDhdxYCyiww5QqfK-2" value="&amp;nbsp;ENS client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="211" y="880" width="124" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jtHWyDhdxYCyiww5QqfK-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.437;entryY=0.001;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-2" target="jtHWyDhdxYCyiww5QqfK-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jtHWyDhdxYCyiww5QqfK-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.659;entryY=0.03;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-2" target="jtHWyDhdxYCyiww5QqfK-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-2" value="system-repair" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="980" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-4" value="kLog" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="481" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-6" value="smb" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="215" y="570" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-7" value="file-sync" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="346" y="570" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-8" value="BuckyOS Client" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;" parent="1" vertex="1">
          <mxGeometry x="1520" y="450" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-9" value="BuckyOS Mobile App" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;" parent="1" vertex="1">
          <mxGeometry x="1520" y="340" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-10" value="Web2.5 Gateway&lt;br&gt;(Gateway@Cloud)" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;" parent="1" vertex="1">
          <mxGeometry x="1510" y="550" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-11" value="Http Servers" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;" parent="1" vertex="1">
          <mxGeometry x="1520" y="650" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-12" value="cyfs-gateway" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="81" y="704" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-3" value="User Apps:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-129" y="430" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-4" value="System Frame（Kernel） Services:" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-140" y="544" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-5" value="Kernel Models:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-134" y="740" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-6" value="&lt;div&gt;The Kernel Models is not extensible.&amp;nbsp;The purpose of this layer is to prepare the operating environment of the Kernel Service&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As the most basic component of the system, it will enter a stable state as soon as possible, and modifications at this layer should be minimized.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Some basic components of this layer can load System Plugin to expand functions, such as pkg_loader can support new pkg download protocols through the pre-defined SystemPlugin.&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-134" y="763" width="194" height="257" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-3" value="node-reporter" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="980" y="704" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LSNKY13j9HE2RUXXMu7w-1" value="machine_active_daemon" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="970" y="780" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-10" value="Frame-Service is a kernel-mode service of the system, which exposes the system functions to the user mode through the kernel RPC. &lt;br&gt;&lt;br&gt;It can be extended under the operation of the system administrator. The extension logic is similar to installing new kmods in Linux." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-134" y="566" width="215" height="140" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-11" value="Application services that are managed by users on a daily basis and run in user-mode." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-129" y="456" width="190" height="80" as="geometry" />
        </mxCell>
        <mxCell id="lFBDZCVjJiKcxowxsO6f-12" value="rdb？" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=8 8;" parent="1" vertex="1">
          <mxGeometry x="81" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slN-2MWBcHAUPgdGicAb-11" value="node_daemon" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="540" y="704" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="MFu4L8sQsqwjJeb4Q1V4-3" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" source="slN-2MWBcHAUPgdGicAb-11" target="MFu4L8sQsqwjJeb4Q1V4-2" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="486" y="731" as="sourcePoint" />
            <mxPoint x="201" y="729" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MFu4L8sQsqwjJeb4Q1V4-2" value="name-service" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="215" y="704" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-1" value="Physical Cluster（Zone Root）" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="315" y="40" width="254" height="220" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-2" value="Zone A" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="324" y="70" width="105" height="140" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-3" value="Physical &lt;br&gt;ServerA" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="324" y="219" width="75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-4" value="Physical &lt;br&gt;ServerB" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="406" y="219" width="72" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-5" value="Physical &lt;br&gt;ServerC" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="485" y="219" width="74" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-6" value="Node1@ServerA" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="329" y="100" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-7" value="Node2@ServerB" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="329" y="134" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-8" value="Zone B" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="446" y="70" width="110" height="140" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-9" value="Node1@ServerB" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="455" y="100" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-10" value="Node2@ServerC" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="455" y="136" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-11" value="Node3@ServerC" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="329" y="168" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MTX15wCB_O0uYmOtEpgj-12" value="Node3@ServerA" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="455" y="169" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-1" value="公网虚拟机，2C+2G+40G&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="318" y="1250" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-2" value="内网服务器，8C+8G+256G SSD + 12T HDD&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="-2" y="1560" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-3" value="内网服务器，16C+16G+1T SSD+12T HDD&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="498" y="1480" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-4" value="内网NAS，4C+8G+480G SSD + 20T HDD&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="-2" y="1680" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-5" value="内网NAS，2C+2G+240G SSD + 20T HDD&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="498" y="1600" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-6" value="内网PC_A" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="-22" y="1460" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-7" value="内网PC_B" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="488" y="1390" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-8" value="摄像头A" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="108" y="1460" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-9" value="摄像头B" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="232" y="1460" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-10" value="&amp;nbsp;公共wifi laptop" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="68" y="1090" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-11" value="4G 手机" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="218" y="1090" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-12" value="摄像头C" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="598" y="1390" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-13" value="摄像头D" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="718" y="1390" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-14" value="智能TV A" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="-2" y="1390" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-15" value="一、在laptop浏览器里查看照片&lt;div&gt;二、手机里备份照片&lt;/div&gt;&lt;div&gt;三、在手机上查看摄像头B的实时视频&lt;/div&gt;&lt;div&gt;四、TV A浏览Zone内的所有视频&lt;/div&gt;&lt;div&gt;五、内网PC_A正在自动备份刚刚旅游回来的200G 照片&lt;/div&gt;&lt;div&gt;六、在laptop中编写代码，自动同步到内网PC_B上，并SSH到其上随时调试运行&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="3" y="1830" width="250" height="120" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-16" value="&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Zone的可访问性分为3级&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;1. HTTP可访问&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;2. P2P可访问&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;3. 不可访问&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;系统的HTTP可访问性的来源，在于系统里是否有一台有公网IP的服务器（通过端口映射可达的也算）&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;当系统只有P2P可访问性时，要求在客户端设备上安装访问网关，通过本地代理的方式访问&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="488" y="1770" width="230" height="170" as="geometry" />
        </mxCell>
        <mxCell id="6-1yxfffDUMwKPKJ0_kN-17" value="返回请求" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1320" y="5340" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="iOcJLOFx5TQZdEkecl_a" name="kernel loop">
    <mxGraphModel dx="2074" dy="717" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-48" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="-695" y="2181" width="170" height="358.05" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-34" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="-10" y="1495.63" width="430" height="496.25" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-21" target="fsqWt6HOSnuXdC4bvL9f-3">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-585" y="1970" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-21" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="-730" y="1610" width="290" height="320" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-25" target="w76EHTxTQfi9PKH68CeN-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-25" value="exec node_op_tasks" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-405" y="2460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-26" target="w76EHTxTQfi9PKH68CeN-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-26" value="contrl frame_service at this node to target state" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-405" y="2560" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-27" target="w76EHTxTQfi9PKH68CeN-33" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-200" y="2690" />
              <mxPoint x="-200" y="2290" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-27" value="contrl app_service at this node to target state" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-405" y="2660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-33" target="w76EHTxTQfi9PKH68CeN-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-345" y="2360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-33" value="read node_config&lt;br&gt;from system_config_service" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-422.5" y="2260" width="155" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-47" target="w76EHTxTQfi9PKH68CeN-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="w76EHTxTQfi9PKH68CeN-47" target="fsqWt6HOSnuXdC4bvL9f-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-47" value="apply cyfs-gateway config from node_config" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-405" y="2370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-75" value="System(Zone) Topology Changed&lt;div&gt;（Node Changed)&lt;/div&gt;" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="189.95" y="2411.95" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-76" value="Discover known faults through kLog" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="9.949999999999989" y="2411.95" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-77" value="Pod Changed (like new service installed)&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="369.95" y="2411.95" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-86" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-78" target="w76EHTxTQfi9PKH68CeN-80" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-78" value="do kernel scheduling" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="179.95" y="2551.95" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-87" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-80" target="w76EHTxTQfi9PKH68CeN-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-80" value="Generate new nodes_config&lt;br&gt;(sometimes node_op_task included)" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="169.95" y="2659.95" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-89" value="Pass" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-81" target="w76EHTxTQfi9PKH68CeN-88" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="259.95" y="2906.95" />
              <mxPoint x="259.95" y="2906.95" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-96" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="w76EHTxTQfi9PKH68CeN-81" target="w76EHTxTQfi9PKH68CeN-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-81" value="Check the nodes_config &lt;br&gt;with user-defined &lt;br&gt;post-processing logic." style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="152.45" y="2776.95" width="215" height="110" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-82" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.471;exitY=0.997;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-76" target="w76EHTxTQfi9PKH68CeN-78" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="89.94999999999999" y="2566.95" as="sourcePoint" />
            <mxPoint x="139.95" y="2516.95" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.567;entryY=0.035;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-75" target="w76EHTxTQfi9PKH68CeN-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-85" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.8;entryY=0.02;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-77" target="w76EHTxTQfi9PKH68CeN-78" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="409.95" y="2586.95" as="sourcePoint" />
            <mxPoint x="459.95" y="2536.95" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-88" target="w76EHTxTQfi9PKH68CeN-91" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-30.05000000000001" y="2234.95" as="targetPoint" />
            <Array as="points">
              <mxPoint x="619.95" y="2964.95" />
              <mxPoint x="619.95" y="2239.95" />
              <mxPoint x="269.95" y="2239.95" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-99" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;" parent="1" source="w76EHTxTQfi9PKH68CeN-88" target="w76EHTxTQfi9PKH68CeN-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-88" value="update nodes_config to etcd" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="169.95" y="2956.95" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-90" value="Call the system administrator for assistance." style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="459.95" y="2791.95" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-91" target="w76EHTxTQfi9PKH68CeN-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-93" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-91" target="w76EHTxTQfi9PKH68CeN-75" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-94" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;" parent="1" source="w76EHTxTQfi9PKH68CeN-91" target="w76EHTxTQfi9PKH68CeN-77" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-91" value="start&lt;br&gt;wait events" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="209.95" y="2281.95" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-43" value="Update node_config" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;dashed=1;dashPattern=12 12;" edge="1" parent="1" source="w76EHTxTQfi9PKH68CeN-97" target="w76EHTxTQfi9PKH68CeN-33">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-50" y="3117" />
              <mxPoint x="-50" y="2275" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-97" value="Nodes with changed node_config will execute actions according to the new status." style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="199.95" y="3076.95" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="w76EHTxTQfi9PKH68CeN-102" value="scheduling loop @scheduler service:" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="-29.05000000000001" y="2244.95" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-1" value="node loop @node_daemon:" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="-470" y="1090" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-2" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-4" target="lypH9cc-xeRXDXk-d7uY-5">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-3" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-4" target="lypH9cc-xeRXDXk-d7uY-8">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-440" y="1254.25" />
              <mxPoint x="-440" y="1254.25" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-4" value="load node_identity?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-420" y="1210.75" width="150" height="87.5" as="geometry" />
        </mxCell>
        <mxCell id="O63FZA-lGS3qpQbuYNQ6-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-5" target="O63FZA-lGS3qpQbuYNQ6-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-5" value="load zone_boot_config&lt;div&gt;from NameService&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="-405" y="1327.75" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-7" target="lypH9cc-xeRXDXk-d7uY-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-7" value="start" style="strokeWidth=1;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="-395" y="1114.25" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-8" value="node would enter wait active state" style="strokeWidth=1;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-580" y="1224.5" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-19" value="No! Looking for any OOD&lt;div&gt;(Cache enable)&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-10" target="lypH9cc-xeRXDXk-d7uY-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-10" target="lypH9cc-xeRXDXk-d7uY-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-10" value="Am I OOD?&lt;div&gt;Is Node in ooldlist&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-420" y="1510" width="150" height="87.5" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-13" value="OOD is not portable. LAN changes require rebuilding the device_config which need user&#39;s signature." style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="-650" y="1410" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-15" value="looking for Same-LAN OOD by UDP broadcast&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-720" y="1620" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-16" value="looking for OOD by local-DNS ($oodname.local)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-720" y="1700" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-17" value="looking for OOD by TCP scan" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-720" y="1780" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-18" value="&lt;div&gt;looking for OOD by Zone-Gateway&lt;/div&gt;rtcp://$zonegateway/$oodname:22080&lt;div&gt;rtcp://$sn/$oodname:22080&lt;br&gt;&lt;div&gt;resolve $zoneid support bns&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-720" y="1860" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-27" target="lypH9cc-xeRXDXk-d7uY-28">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-152.5" y="1690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-27" value="start system_config_service" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-225" y="1640" width="145" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-28" target="lypH9cc-xeRXDXk-d7uY-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-28" value="sync N+1 system_config service ready" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-225" y="1750" width="145" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-32" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-29" target="lypH9cc-xeRXDXk-d7uY-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-38" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-29" target="lypH9cc-xeRXDXk-d7uY-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-29" value="First Boot?&lt;div&gt;(check kv://boot/config)&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-241.25" y="1840" width="167.5" height="100" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-30" value="Automatic do sytem_config_service recovery?" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="-366.25" y="1637.5" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-31" target="lypH9cc-xeRXDXk-d7uY-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-31" value="do boot scheuler&lt;div&gt;create kv://boot/config&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-420" y="1860" width="145" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-37" value="Connect to local system_config_service and load ZoneConfig" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-230" y="2000" width="145" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-41" target="w76EHTxTQfi9PKH68CeN-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-41" value="Node&lt;div&gt;Boot OK&lt;/div&gt;" style="strokeWidth=1;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="-395" y="2100" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="fsqWt6HOSnuXdC4bvL9f-3" target="lypH9cc-xeRXDXk-d7uY-41">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-585" y="2040" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-37" target="lypH9cc-xeRXDXk-d7uY-41">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lypH9cc-xeRXDXk-d7uY-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=0.998;entryY=0.357;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="lypH9cc-xeRXDXk-d7uY-28" target="lypH9cc-xeRXDXk-d7uY-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-3" value="Connect to system_config_service and load ZoneConfig" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-645" y="2020" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-27" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="fsqWt6HOSnuXdC4bvL9f-5" target="fsqWt6HOSnuXdC4bvL9f-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-33" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="fsqWt6HOSnuXdC4bvL9f-5" target="fsqWt6HOSnuXdC4bvL9f-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-5" value="Is WLAN OOD?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="85" y="1550" width="150" height="87.5" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-30" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="fsqWt6HOSnuXdC4bvL9f-6" target="fsqWt6HOSnuXdC4bvL9f-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-31" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="fsqWt6HOSnuXdC4bvL9f-6" target="fsqWt6HOSnuXdC4bvL9f-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-6" value="Need SN?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="85" y="1700" width="150" height="87.5" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-7" value="boot阶段的cyfs-gateway作用：支持连接到system_config_service&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1. 非WLAN节点，让etcd有机会联通别的NAT后面的OOD&lt;/div&gt;&lt;div&gt;2. WLAN节点，特殊的zone-gateway,支持其它的OOD通过本节点，联通其它NAT后面的OOD&lt;/div&gt;&lt;div&gt;3. SN节点是外部的一个rtcp协议栈，不是zone内的OOD&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-5" y="1110" width="430" height="89" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-8" value="OOD3@WLAN" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="570" y="1164" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-10" value="OOD1@LAN1" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="1272" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-11" value="OOD5@LAN2" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="699" y="1272" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-12" value="OOD2@LAN1" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="1381" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-13" value="OOD4@LAN1" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="1481" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-14" value="N+1=3&lt;div&gt;每个OOD要连接至少2个OOD才能Boot成功&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="450" y="1211" width="111" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-16" value="OOD1: keep-tunnel with OOD3&lt;div&gt;Direct To OOD3,OOD2,OOD4&lt;/div&gt;&lt;div&gt;rtcp to OOD5&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;OOD2: keep-tunnel with OOD3&lt;div&gt;Direct To OOD3,OOD2,OOD4&lt;/div&gt;&lt;div&gt;rtcp to OOD5&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;OOD4: keep-tunnel with OOD3&lt;div&gt;Direct To OOD3,OOD2,OOD4&lt;/div&gt;&lt;div&gt;rtcp to OOD5&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;OOD3:&lt;/div&gt;&lt;div&gt;rtcp to OOD1,OOD2,OOD4,OOD5&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;OOD5:keep tunel with OOD3&lt;/div&gt;&lt;div&gt;Direct To OOD3&lt;/div&gt;&lt;div&gt;rtcp to OOD1,OOD2,OOD5&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="638.5" y="1381" width="221" height="290" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-17" value="SN@WLAN" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="590" y="1710" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-18" value="OOD1@LAN1" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="1811" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-19" value="OOD3@LAN2" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="699" y="1811" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-20" value="OOD2@LAN1" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="1920" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-22" value="N+1=2&lt;div&gt;每个OOD要连接至少2个OOD才能Boot成功&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="450" y="1750" width="111" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-23" value="OOD1: keep-tunnel with SN&lt;div&gt;Direct To OOD2&lt;/div&gt;&lt;div&gt;rtcp to OOD3&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;OOD2: keep-tunnel with SN&lt;div&gt;Direct To OOD3,OOD2,OOD4&lt;/div&gt;&lt;div&gt;rtcp to OOD5&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;OOD4: keep-tunnel with OOD3&lt;div&gt;Direct To OOD3,OOD2,OOD4&lt;/div&gt;&lt;div&gt;rtcp to OOD5&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;OOD3:&lt;/div&gt;&lt;div&gt;rtcp to OOD1,OOD2,OOD4,OOD5&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;OOD5:keep tunel with OOD3&lt;/div&gt;&lt;div&gt;Direct To OOD3&lt;/div&gt;&lt;div&gt;rtcp to OOD1,OOD2,OOD5&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="620" y="1920" width="221" height="290" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-24" value="create dispatch config:&lt;div&gt;local port -&amp;gt; rtcp://$sn/$oodid:20080&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry y="1910" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="O63FZA-lGS3qpQbuYNQ6-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="fsqWt6HOSnuXdC4bvL9f-25" target="fsqWt6HOSnuXdC4bvL9f-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-25" value="keep tunnel to SN" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry y="1820" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="O63FZA-lGS3qpQbuYNQ6-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="fsqWt6HOSnuXdC4bvL9f-28" target="fsqWt6HOSnuXdC4bvL9f-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-28" value="keep tunnel to WLAN OOD（zone-gateway)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="214" y="1822.5" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-29" value="create dispatch config:&lt;div&gt;local port -&amp;gt; rtcp://$zonegateway/$oodid:20080&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="214" y="1910" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-32" value="create dispatch config:&lt;div&gt;local port -&amp;gt; rtcp:///$oodid:20080&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="285" y="1563.75" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FtUDA4jLs7bKUEtVHcqN-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="fsqWt6HOSnuXdC4bvL9f-36" target="fsqWt6HOSnuXdC4bvL9f-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-36" value="cyfs-gateway Loop" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="85" y="1211" width="170" height="253.5" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-37" value="if this is ood&lt;br&gt;keep tunnel to SN/WLAN OOD" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="115" y="1316.75" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-38" value="create tcp-&amp;gt;rtcp for kernel service" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="115" y="1387.75" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-39" value="if zone.sn exists,try register OOD to SN" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="115" y="1247.75" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-44" value="boot_gateway_config" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-675" y="2288.05" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-45" value="user_gateway_config" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-675" y="2209.05" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-46" value="node_gateway_config" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="-675" y="2369.05" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-47" value="post_gateway_config" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-675" y="2458.05" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fsqWt6HOSnuXdC4bvL9f-50" value="cyfs-gateway config rules" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-695" y="2187.05" width="155" height="15" as="geometry" />
        </mxCell>
        <mxCell id="O63FZA-lGS3qpQbuYNQ6-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="O63FZA-lGS3qpQbuYNQ6-1" target="lypH9cc-xeRXDXk-d7uY-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="O63FZA-lGS3qpQbuYNQ6-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="O63FZA-lGS3qpQbuYNQ6-1" target="fsqWt6HOSnuXdC4bvL9f-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="O63FZA-lGS3qpQbuYNQ6-1" value="start cyfs-gateway at boot-model (support system_config can be found)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-417.5" y="1420" width="145" height="60" as="geometry" />
        </mxCell>
        <mxCell id="yaLFH_EoCBhOSX-8fva--1" value="boot阶段用ood string初始化rtcp tunnel的身份问题？" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="-110" y="1238.25" width="130" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="1u5XhRc6Ss8xfa0_lFwo" name="Service &amp; kRPC">
    <mxGraphModel dx="1470" dy="856" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-19" value="kRPC" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1VOikts_Fu2gLfuLLnL2-2" target="TtpUKM4LW4xhPhtb8Lpu-18" edge="1">
          <mxGeometry x="0.3333" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-15" value="http&lt;div&gt;4.1&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="TtpUKM4LW4xhPhtb8Lpu-19">
          <mxGeometry x="-0.3476" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1VOikts_Fu2gLfuLLnL2-2" value="Kernel Service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="790" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="1VOikts_Fu2gLfuLLnL2-3" value="App" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="640" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-5" value="4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="TtpUKM4LW4xhPhtb8Lpu-1" target="1VOikts_Fu2gLfuLLnL2-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-14" value="http" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="TtpUKM4LW4xhPhtb8Lpu-5">
          <mxGeometry x="-0.3653" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-9" value="5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="TtpUKM4LW4xhPhtb8Lpu-1" target="-N7vmcvN1w1kGffq8Vgl-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-16" value="http 5" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="-N7vmcvN1w1kGffq8Vgl-9">
          <mxGeometry x="-0.0472" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=8 8;" parent="1" vertex="1">
          <mxGeometry x="117.5" y="590" width="165" height="130" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-2" value="App Runtime" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="117.5" y="600" width="102.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-11" value="u:root" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="117.5" y="810" width="30" height="50" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-15" value="u:appid" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="110" y="690" width="30" height="50" as="geometry" />
        </mxCell>
        <mxCell id="TtpUKM4LW4xhPhtb8Lpu-18" value="Kernel Service2" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="930" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="bFMGxiHM1td_q0ntUE2M-1" value="&lt;b&gt;kRPC的权限管理&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1. 服务开发者总是要对session token进行校验&lt;/div&gt;&lt;div&gt;2. 基本原则：zone内可以直连，zone外需要通过zone-gateway连接&lt;/div&gt;&lt;div style=&quot;&quot;&gt;3. 公网OOD的app服务通常是绑定127.0.0.1的，这样可以利用cyfs-gateway做防火墙，防止直接暴露. 非公网OOD的服务也只有内网有机会访问&lt;/div&gt;&lt;div&gt;4. 应用服务总是运行在逻辑容器中，这样即使出现漏洞，其能泄露的数据也可以控制在App范围内。&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="590" y="10" width="310" height="170" as="geometry" />
        </mxCell>
        <mxCell id="jygwpOhVrun2l0I2vdN9-1" value="1.服务发现&lt;div&gt;2. 服务的公网URL&lt;/div&gt;&lt;div&gt;3.服务的基本安全机制&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;服务发现&lt;/b&gt;是指系统提供的一种标准机制，能根据系统的当前配置，将请求路由到正确的node上的app/frame service中。标准的服务发现依赖可用的system_config服务，并根据当前的系统状况，跳过失效的node,并根据node实时负载情况，调整无状态服务的请求的投递权重。&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Zone内访问服务的方法&lt;/b&gt;&lt;/div&gt;&lt;div&gt;1. 使用标准的服务client访问，系统有机会让该调用变成一个进程内的function call&lt;/div&gt;&lt;div&gt;2. 基于 http://127.0.0.1:$service_port/ 建立krcp client，并发起访问，绝对没有跨node的网络流量。该请求直接到service&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;3. 兼容性最好：基于 http://127.0.0.1/kapi/$servicename 建立krpc client, cyfs-gateway会在内部实现服务发现，并自动基于rtcp://实现跨nat的服务访问 .该请求可能会进过2-3次转发到达service&lt;/div&gt;&lt;div&gt;（优先实现）&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;4. 基于buckyos-sdk的服务发现api建立krpclient （cyfs-gateway内部也使用这个api)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;5. 使用公网的 https://zonegateway/kapi/$servicename 建立krpc client&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Zone外访问服务的方法&lt;/b&gt;&lt;/div&gt;&lt;div&gt;https://$appid.$zoneid/&lt;/div&gt;&lt;div&gt;&lt;div&gt;https://$zoneid/kapi/$servicename (需要支持跨域？）&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;https://$appid.$zoneid/kapi/$servicename (不需要跨域，但app需要声明自己的app page需要访问的服务）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="118" y="22" width="367" height="482" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-10" value="6 rtcp" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="-N7vmcvN1w1kGffq8Vgl-1" target="-N7vmcvN1w1kGffq8Vgl-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-1" value="OOD1 cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="790" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-2" value="Kernel Service" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="870" y="790" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-7" value="2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="-N7vmcvN1w1kGffq8Vgl-3" target="-N7vmcvN1w1kGffq8Vgl-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-12" value="rtcp" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="-N7vmcvN1w1kGffq8Vgl-7">
          <mxGeometry x="-0.5023" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-18" value="7 rtcp" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="-N7vmcvN1w1kGffq8Vgl-3" target="-N7vmcvN1w1kGffq8Vgl-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-3" value="zone-gateway" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="460" y="630" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-5" value="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="-N7vmcvN1w1kGffq8Vgl-4" target="-N7vmcvN1w1kGffq8Vgl-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-11" value="http" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="-N7vmcvN1w1kGffq8Vgl-5">
          <mxGeometry x="0.3333" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-4" value="浏览器" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="670" y="630" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-8" value="3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=1.006;entryY=0.539;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="-N7vmcvN1w1kGffq8Vgl-1" target="TtpUKM4LW4xhPhtb8Lpu-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-13" value="http" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="-N7vmcvN1w1kGffq8Vgl-8">
          <mxGeometry x="-0.3571" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-19" value="http" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="-N7vmcvN1w1kGffq8Vgl-17" target="-N7vmcvN1w1kGffq8Vgl-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-17" value="OOD2 cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="670" y="790" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-N7vmcvN1w1kGffq8Vgl-20" value="浏览器发起一个请求，达到App处理，处理过程中访问了2个系统服务" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="340" y="910" width="250" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="q0N88BQaiHxRkIq5dT2b" name="App Container">
    <mxGraphModel dx="2074" dy="717" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-7" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="180" y="1330" width="290" height="210" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-1" value="node_daemon根据App权限配置准备容器" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-2" value="启动App容器" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="360" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-3" value="配置环境变量&lt;br&gt;重要的权限Token" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="120" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-4" value="可选：根据APP权限&lt;br&gt;创建容器文件系统&lt;br&gt;local cache&lt;br&gt;app fs" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="190" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-5" value="&amp;nbsp;身份管理中心" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mNxCDZtLirX5pciaZlv8-6" value="申请Token(按需）" style="endArrow=classic;html=1;rounded=0;exitX=1.033;exitY=0.434;exitDx=0;exitDy=0;exitPerimeter=0;entryX=-0.031;entryY=0.424;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="mNxCDZtLirX5pciaZlv8-1" target="mNxCDZtLirX5pciaZlv8-5" edge="1">
          <mxGeometry x="0.1459" y="-4" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="260" y="100" as="sourcePoint" />
            <mxPoint x="310" y="50" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-1" value="可选：根据APP权限&lt;br&gt;创建容器网络" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="270" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-2" value="启动用户进程" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="430" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-3" value="初始化app sdk stub" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="500" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.002;entryY=0.584;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="mNxCDZtLirX5pciaZlv8-3" target="LHn_DE8s6H_Sm2WV2Dcl-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="60" y="145" />
              <mxPoint x="60" y="529" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-7" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="1" target="mNxCDZtLirX5pciaZlv8-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="260" y="520" as="sourcePoint" />
            <mxPoint x="310" y="470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-8" value="使用Token登陆，登陆成功返回session_key" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="LHn_DE8s6H_Sm2WV2Dcl-7" vertex="1" connectable="0">
          <mxGeometry x="-0.151" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-9" value="frame service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="650" y="580" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-10" target="LHn_DE8s6H_Sm2WV2Dcl-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-10" value="使用kRPC调用系统功能" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="580" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-14" value="通过session_key查询调用来源的身份信息&lt;br&gt;注意session_key与from endpoint的绑定" style="endArrow=classic;html=1;rounded=0;exitX=0.551;exitY=-0.016;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-9" target="mNxCDZtLirX5pciaZlv8-5" edge="1">
          <mxGeometry x="-0.1108" y="-5" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="450" as="sourcePoint" />
            <mxPoint x="610" y="400" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-15" value="从system config中读取app的 ACL信息，进行权限控制" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="690" y="660" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-16" value="frame service如何验证调用者身份：&lt;br&gt;1. 调用中含有一个系统Owner的签名，因为系统里只有Owner的公钥，不保存私钥，因此这个调用获得了一次性的提权&lt;br&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;2.通过标准的用户密码，可以为应用程序提供一些基于session的权限验证&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;3.通过上述公私钥&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="50" y="670" width="220" height="110" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-17" value="申请Token时的安全权限验证：&lt;br&gt;请求方:node_id，该node的签名&lt;br&gt;安全隐患：node 私钥的泄露" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="470" y="80" width="195" height="100" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-19" value="应用泄露token的风险：&lt;br&gt;Token和EP绑定（和IP绑定？）&lt;br&gt;每个Service容器都一个独立IP会不会很夸张？" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-170" y="475" width="195" height="100" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-20" value="frame service拥有内核（root）权限，安装不可靠的frame service有丢失所有数据的风险！" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="630" y="740" width="195" height="100" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-21" target="LHn_DE8s6H_Sm2WV2Dcl-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="160" y="910" />
              <mxPoint x="160" y="910" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-21" value="app client" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="890" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-26" value="确认client身份" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-22" target="LHn_DE8s6H_Sm2WV2Dcl-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-22" value="gateway&lt;br&gt;外部调用都过gateway" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="200" y="890" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-27" value="验证app权限" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-23" target="LHn_DE8s6H_Sm2WV2Dcl-24" edge="1">
          <mxGeometry x="0.0057" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="910" />
              <mxPoint x="540" y="910" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-23" value="app service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="890" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-24" value="frame-service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="590" y="890" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-28" value="Data" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="770" y="880" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-29" value="安全访问" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="LHn_DE8s6H_Sm2WV2Dcl-24" target="LHn_DE8s6H_Sm2WV2Dcl-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-31" value="一个请求有两个身份：&lt;br&gt;1. appid&lt;br&gt;2. 当前用户&lt;br&gt;&lt;br&gt;都验证为可信调用&lt;br&gt;否则为匿名调用（并不可信）&lt;br&gt;&lt;br&gt;只有填写正确的appid才有机会访问app的服务&lt;br&gt;&lt;br&gt;未填写appid是访问系统服务，很多时候对权限会有更高的要求。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-40" y="1030" width="170" height="200" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-32" value="分离token验证，在请求中带session_key，以及对session_key的验证，可以根据系统需要，扩展更多对验证方式的支持。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="665" y="255" width="195" height="100" as="geometry" />
        </mxCell>
        <mxCell id="LHn_DE8s6H_Sm2WV2Dcl-33" value="web2.5的身份验证逻辑：&lt;br&gt;支持app client用传统协议来传递身份。通过gateway隔离后，app service的开发者也不用处理新的协议" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="400" y="1000" width="170" height="160" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-1" value="kernel service container" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="200" y="1350" width="160" height="170" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-3" value="etcd" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="220" y="1450" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-4" value="dcfs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="220" y="1400" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-5" value="eth0&lt;br&gt;192.168.1.222" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="1400" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-6" value="docker0" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="1360" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-8" value="第一个添加的OOD是主VLAN&lt;br&gt;kernel service container直接用host网络（提高性能）,其它服务看到的就是一个很标准的，来自OOD的网络协议包" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="195" y="1560" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-9" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="180" y="1640" width="320" height="210" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-10" value="kernel service container" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="200" y="1660" width="190" height="170" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-11" value="etcd" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="215" y="1770" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-13" value="eth0&lt;br&gt;192.168.1.223" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="287.5" y="1710" width="82.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-14" value="docker0" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="410" y="1660" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-15" value="VPS上的第二OOD，容器使用NAT模式，通过host上的tunnel虚拟网卡，让容器加入了主OOD所在的局域网，能不能不动物理机的iptable?，局域网的其它服务，看到的是一个来自 第一OOD的另一块网卡的数据包" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="200" y="1870" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-16" value="dcfs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="215" y="1710" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-17" value="eht0&lt;br&gt;23.239.23.54" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="410" y="1710" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-20" value="tunnel" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-18" target="hjjSVfZwhBp0PWB6v3EA-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="1780" />
              <mxPoint x="540" y="1470" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-18" value="tun/tap&lt;br&gt;openvpn" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="410" y="1755" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-19" value="tun/tap&lt;br&gt;openvpn&lt;br&gt;192.168.1.223" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="1445" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-28" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="170" y="1960" width="320" height="210" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-29" value="kernel service container" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="190" y="1980" width="190" height="170" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-30" value="etcd" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="205" y="2090" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-31" value="eth0&lt;br&gt;192.168.1.221" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="277.5" y="2030" width="82.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-32" value="docker0" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="1980" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-33" value="dcfs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="205" y="2030" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-34" value="eht0&lt;br&gt;192.168.1.222" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="2030" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-35" value="tun/tap&lt;br&gt;openvpn" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="2075" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-36" value="另一个局域网的OOD，容器使用NAT模式，通过host上的tunnel虚拟网卡，让容器加入了主OOD所在的局域网。此时本局域网中的服务之间无法直接通信，需要绕行到" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="205" y="2200" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.012;entryY=0.63;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-35" target="hjjSVfZwhBp0PWB6v3EA-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="2100" />
              <mxPoint x="540" y="1786" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-39" target="hjjSVfZwhBp0PWB6v3EA-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-39" value="用户进程&lt;br&gt;send(target_ip,data)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-40" target="hjjSVfZwhBp0PWB6v3EA-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-40" value="内核network stack(iptable),进行路由" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1090" y="1370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-41" target="hjjSVfZwhBp0PWB6v3EA-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-41" value="根据路由结果找到网络设备,并将ip包写入设备的发送队列" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1275" y="1370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-44" target="hjjSVfZwhBp0PWB6v3EA-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-44" value="目标主机" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-46" target="hjjSVfZwhBp0PWB6v3EA-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-46" value="内核network stack(iptable),处理设备收到包，进行路由" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1090" y="1530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hjjSVfZwhBp0PWB6v3EA-47" target="hjjSVfZwhBp0PWB6v3EA-46" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-47" value="读取返回，写入设备的接收队列" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1270" y="1530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hjjSVfZwhBp0PWB6v3EA-51" value="用户进程&lt;br&gt;on_recv" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IwOimf6YcgUWfVzcZBG_-1" value="device用自己私钥构造service的启动token" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-750" y="100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IwOimf6YcgUWfVzcZBG_-2" value="service启动后，用该token与verify-hub通信，执行login操作" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-750" y="190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IwOimf6YcgUWfVzcZBG_-3" value="登录成功后得到一个由verify-hub签名的sesison-token" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-750" y="280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IwOimf6YcgUWfVzcZBG_-4" value="登录成功后得到一个由verify-hub签名的sesison-token" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-750" y="380" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="0Y17DWSzZZsquk_YFecL" name="Agent App">
    <mxGraphModel dx="2058" dy="2298" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=8 8;" parent="1" vertex="1">
          <mxGeometry x="220" y="470" width="165" height="180" as="geometry" />
        </mxCell>
        <mxCell id="1hL2Gp-SP5Gqlcj0mtqj-1" value="AgentMsg Bus" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="365" y="290" width="135" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="dv2-v_jYuO4W5aKC8YRR-2" target="Ih0z0G4T_rDQ9Utei5Il-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dv2-v_jYuO4W5aKC8YRR-2" value="Agent2" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="440" y="160" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="dv2-v_jYuO4W5aKC8YRR-3" target="Ih0z0G4T_rDQ9Utei5Il-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dv2-v_jYuO4W5aKC8YRR-3" value="Agent3" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="160" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="dv2-v_jYuO4W5aKC8YRR-4" value="AI Compute Kernel" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="525" y="290" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dv2-v_jYuO4W5aKC8YRR-5" value="Compute Nodes&lt;br&gt;(System Plugin)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="625" y="330" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="dv2-v_jYuO4W5aKC8YRR-6" value="Tunnels&lt;br&gt;（System Plugins）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="260" y="330" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-1" value="Agent1" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="500" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-2" value="Environments&lt;br&gt;(App Services)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="525" y="230" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-4" value="System AI Functions&lt;br&gt;(System Plugins)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="760" y="290" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-5" target="RtljSQaqW_wrNChCsR5C-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-5" value="Agent&lt;br&gt;Msg" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="110" y="760" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-7" target="RtljSQaqW_wrNChCsR5C-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-7" target="RtljSQaqW_wrNChCsR5C-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-7" value="LLM Process" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="250" y="770" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-8" target="RtljSQaqW_wrNChCsR5C-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-8" target="oH5CQoW2K4tSOn_9oIRQ-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-8" value="Compute Kernel" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="250" y="900" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-13" target="RtljSQaqW_wrNChCsR5C-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-13" target="RtljSQaqW_wrNChCsR5C-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-13" value="Execute Functions" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="415" y="770" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-17" target="RtljSQaqW_wrNChCsR5C-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-17" value="System Services&lt;br&gt;(Knowledge,etc)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="415" y="900" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-22" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="90" y="870" as="sourcePoint" />
            <mxPoint x="700" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-24" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="220" y="720" width="340" height="130" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-25" value="Agent1 Process" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="240" y="730" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-26" value="Agent" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="420" y="530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-7" value="Agent Msg&lt;div&gt;cyfs://&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-27" target="oH5CQoW2K4tSOn_9oIRQ-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-27" value="AgentMsg Bus" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="420" y="630" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.209;entryY=1.03;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-27" target="RtljSQaqW_wrNChCsR5C-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.6;entryY=0.007;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-26" target="RtljSQaqW_wrNChCsR5C-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.665;entryY=0.003;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-27" target="RtljSQaqW_wrNChCsR5C-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-32" value="Kernel" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="110" y="870" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="RtljSQaqW_wrNChCsR5C-33" value="使用内核(服务）的方法是kRPC" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1090" y="710" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-1" value="除内核外，扩展系统功能的4种模块&lt;br&gt;App Services:&lt;br&gt;Compents:加载到App空间使用的组件&lt;br&gt;Pulgins:加载到System Service里使用&lt;br&gt;System Service:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="985" y="475" width="290" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-4" value="Memory" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="232.5" y="550" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-5" value="Workspace" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="307.5" y="550" width="65" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-6" value="LLM&amp;nbsp; Process" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="232.5" y="590" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-7" value="Agent Runtime" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="230" y="470" width="97.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-8" value="Memory,Workspace,LLM Process可以看成Agent Framework Lib. 在系统看来,Agent 是一个触发机制稍有特殊的进程" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="230" y="-30" width="245" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-9" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=8 8;" parent="1" vertex="1">
          <mxGeometry x="780" y="118" width="180" height="90" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-10" value="Workflow Runtime" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="780" y="128" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-14" value="Workspace" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="800" y="158" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ih0z0G4T_rDQ9Utei5Il-18" value="Ageng2,Agent3有权限访问Workflow的workspace" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="570" y="98" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-1" value="Local&amp;nbsp;&lt;div&gt;Grpahic Card&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="180" y="990" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-2" value="LLM Cloud" style="shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="295" y="990" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-3" value="DFS" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="475" y="982.5" width="60" height="65" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-4" value="DMC" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="620" y="982.5" width="60" height="65" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-5" value="Backup" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="oH5CQoW2K4tSOn_9oIRQ-3" target="oH5CQoW2K4tSOn_9oIRQ-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-6" value="Other Zone" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="680" y="620" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="oH5CQoW2K4tSOn_9oIRQ-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.605;entryY=-0.04;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="RtljSQaqW_wrNChCsR5C-8" target="oH5CQoW2K4tSOn_9oIRQ-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram name="整体拓扑图" id="p2P2LeGknYOb5AMSB5fG">
    <mxGraphModel dx="2896" dy="2268" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="WxojViiRUoVEC4uaUHlK-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-2" target="WxojViiRUoVEC4uaUHlK-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-2" value="Zone Boot Loader Config" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-5" target="WxojViiRUoVEC4uaUHlK-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-5" target="WxojViiRUoVEC4uaUHlK-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-5" value="Zone Boot Loader&lt;br&gt;启动/连上ETCD" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-6" value="Zone Loader Config配置保存在区块链或其它可靠的配置管理系统上。是整个系统的Bootup, 其配置和可访问性不受到任何Zone内Device的影响" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="320" y="1020" width="250" height="95" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-7" value="根据NameSerice里的配置，Zone内需要引导启动etcd.对Zone内的 Server Node来说，boot后的首要任务就是读取Zone Name Service，并根据配置尝试连接etcd或运行etcd服务" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="560" y="822.5" width="250" height="95" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-12" target="WxojViiRUoVEC4uaUHlK-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="470" y="690" />
              <mxPoint x="700" y="690" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-12" target="WxojViiRUoVEC4uaUHlK-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.106;exitY=0.017;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitPerimeter=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-12" target="WxojViiRUoVEC4uaUHlK-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="393" y="690" />
              <mxPoint x="370" y="690" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="WxojViiRUoVEC4uaUHlK-12" target="WxojViiRUoVEC4uaUHlK-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-12" value="Apply Node Config" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-13" value="根据etcd里的信息，应用最新的Node Config。该Config可以比较复杂，配置了在一个Node上会允许哪些 Service/容器/VM. 该配置文件的设计应该重点参考kubernetes" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="560" y="720" width="250" height="95" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-15" target="WxojViiRUoVEC4uaUHlK-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-15" value="Join / Host K8S" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="570" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-16" value="Control Service" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="570" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-17" value="Control Container" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="310" y="570" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-19" target="WxojViiRUoVEC4uaUHlK-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-19" value="Control VM" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="570" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-20" value="SDN Control" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="190" y="840" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-21" value="尽管网络中使用新的协议，用zone/device&amp;nbsp; object进行寻址，但为了向前兼容，也必须Apply典型的网络拓扑" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-10" y="855" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-22" value="加入另一个Zone" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-23" value="兼容现有k8s应用" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-24" value="网络拓扑配置（SDN?)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="620" y="1540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-25" value="正确配置物理机，磁盘（做好故障分区）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="460" y="1540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-26" value="电力" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="770" y="1540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-27" value="物理集群1" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-28" value="物理集群2" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="390" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-29" value="物理集群3" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="620" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-30" value="逻辑集群" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="200" y="1340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-31" value="逻辑集群" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="1340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-32" value="App1" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="210" y="1260" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-33" value="App1" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="1260" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-34" value="App2" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="1190" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-35" value="App1" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="1260" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-36" value="App2" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="1190" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-37" value="App1" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="630" y="1350" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-38" value="App2" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="630" y="1280" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-39" value="App3" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="1130" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-40" value="逻辑集群" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="470" y="1340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-41" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=1;entryDx=0;entryDy=0;" parent="1" target="WxojViiRUoVEC4uaUHlK-29" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="1540" as="sourcePoint" />
            <mxPoint x="480" y="1500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-42" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-29" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="820" y="1530" as="sourcePoint" />
            <mxPoint x="940" y="1540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-43" value="1. 一个集群（Zone）是一个BuckyOS instance&lt;br&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;2.多个物理集群可以编织成1个逻辑集群，一个物理集群可以承载多个逻辑集群(n*m)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;3.物理集群的构成既可以是专业运维的方式，也可是由一系列接入互联网的共主设备构成&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;4.通过可选的（但绝对存在）的Internet(web3)基础设施，可以在可靠的成本下，安全的对集群本身的改变进行支持。解决循环依赖问题&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-210" y="1530" width="480" height="70" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-44" value="Internet (Web3) Infra , 可以简化集群的配置" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="270" y="1650" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-45" value="DFS（部分依赖Object Storage）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="315" y="160" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-46" value="etcd" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="495" y="300" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-47" value="system config(对etcd的简单封装）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="230" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-48" value="system logs" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="410" y="80" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-49" value="pkg manager" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="80" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-50" value="Object Storage" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="495" y="160" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-51" value="Gateway/BUS" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="785" y="80" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-53" value="DFS的实现要不要依赖Gateway?" style="strokeWidth=1;shadow=0;dashed=0;align=center;html=1;shape=mxgraph.mockup.text.stickyNote2;fontColor=#666666;mainText=;fontSize=17;whiteSpace=wrap;fillColor=#ffffcc;strokeColor=#F62E00;" parent="1" vertex="1">
          <mxGeometry x="1450" y="150" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-54" value="Knowledge Base&lt;br&gt;（几乎是本地搜索引擎）" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="595" y="80" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-55" value="Local Cache" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="680" y="160" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-56" value="Schedulor" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="300" y="-10" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-57" value="App（Service） Runtime" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="495" y="-10" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-58" value="System Services（可扩展）&lt;br&gt;比如装一个Redis" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="690" y="-10" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-59" value="ACL" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="590" y="230" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-60" target="WxojViiRUoVEC4uaUHlK-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-60" value="CI/CD" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-130" y="80" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-62" value="App1" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="530" y="-90" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-63" value="App2" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="460" y="-160" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-64" value="运行在App容器里的是标准APP。&lt;br&gt;运行在Service 容器中的（通常是k8s兼容）是兼容Service" style="strokeWidth=1;shadow=0;dashed=0;align=center;html=1;shape=mxgraph.mockup.text.stickyNote2;fontColor=#666666;mainText=;fontSize=17;whiteSpace=wrap;fillColor=#ffffcc;strokeColor=#F62E00;" parent="1" vertex="1">
          <mxGeometry x="-380" y="-370" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-65" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-185" y="-20" as="sourcePoint" />
            <mxPoint x="1325" y="-20" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-66" value="UserMode" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-100" y="-50" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-67" value="KernelMode" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-100" y="-20" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-68" value="D-RDB,D-VDB&lt;br&gt;通过System Service扩展" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="940" y="-10" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-70" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="WxojViiRUoVEC4uaUHlK-58" target="WxojViiRUoVEC4uaUHlK-68" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="890" y="40" as="sourcePoint" />
            <mxPoint x="940" y="-10" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WxojViiRUoVEC4uaUHlK-71" value="k8s的高可用RDB配置在我们的系统里如何配置？会不会有更好的表现" style="strokeWidth=1;shadow=0;dashed=0;align=center;html=1;shape=mxgraph.mockup.text.stickyNote2;fontColor=#666666;mainText=;fontSize=17;whiteSpace=wrap;fillColor=#ffffcc;strokeColor=#F62E00;" parent="1" vertex="1">
          <mxGeometry x="1420" y="-80" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="UW_UZQUzNR0JYxidc_pB-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="1" source="UW_UZQUzNR0JYxidc_pB-1" target="WxojViiRUoVEC4uaUHlK-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UW_UZQUzNR0JYxidc_pB-1" value="Backup Provider" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="220" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UW_UZQUzNR0JYxidc_pB-2" value="Name Service" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="530" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UW_UZQUzNR0JYxidc_pB-4" value="Pkg Repo" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="680" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rTdR6_QgMSp6Smcmj7B9-1" value="AgentA" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="585" y="-160" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="rTdR6_QgMSp6Smcmj7B9-2" value="AgentB" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="700" y="-160" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="rTdR6_QgMSp6Smcmj7B9-3" value="WorkspaceA" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="650" y="-230" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Ql8OTb-lViOZywzSRGM0-1" value="kRPC&lt;br&gt;(System-Call)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="-50" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Rz-CEfaY1QC__uy7RfOJ" name="系统组件图">
    <mxGraphModel dx="2896" dy="1168" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="sXJHHGRh78HDzlqQBdKx-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="fQbEntED_hgijbA0nxCI-1" target="sXJHHGRh78HDzlqQBdKx-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fQbEntED_hgijbA0nxCI-1" value="node_daemon&lt;br&gt;(亚星）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fQbEntED_hgijbA0nxCI-2" value="pkg repo server" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fQbEntED_hgijbA0nxCI-3" value="zone name service&lt;br&gt;（DNS兼容）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="360" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-1" value="backup server&lt;br&gt;(DMC Miner)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="205" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-2" value="k8s service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="180" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-3" value="ceph" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="260" y="490" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-4" value="dcfs" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="185" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-5" value="docker mgr" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="235" y="650" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-6" value="vm mgr" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="355" y="650" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-7" value="service mgr" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="115" y="650" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-8" value="backup client" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="205" y="780" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-9" value="zone name client&lt;br&gt;（国仁）" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="365" y="780" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-10" value="pkg mgr&lt;br&gt;（lzc设计+松哥）" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="780" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-11" value="CyberChat App&lt;br&gt;(Zone Mgr)" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="645" y="850" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-12" value="Zone Mgr Cli" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="645" y="780" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-13" value="ETH" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="200" y="920" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-14" value="DNS?" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="315" y="920" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-15" value="cyfs web3 bridge" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="425" y="920" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-16" value="DMC20" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="85" y="920" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="sXJHHGRh78HDzlqQBdKx-17" target="sXJHHGRh78HDzlqQBdKx-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="sXJHHGRh78HDzlqQBdKx-17" target="fQbEntED_hgijbA0nxCI-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-18" value="machine_daemon(OEM可修改）&lt;br&gt;(该进程是通用的激活进程，不会和node_daemon同时运行）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="575" y="680" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-19" value="Zong Mgr WebUI" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="920" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-21" value="etcd" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-250" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="g8mHNLGIDdJ0_Dwjakep-1" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" source="UwzjYA9SK8VwgR3xvNyD-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-35" y="440" as="sourcePoint" />
            <mxPoint x="765" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="g8mHNLGIDdJ0_Dwjakep-2" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-180" y="760" as="sourcePoint" />
            <mxPoint x="920" y="759.66" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jlFWFTiqVMc-uzdDFwOW-1" value="kLog&lt;br&gt;(振爷)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-410" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UwzjYA9SK8VwgR3xvNyD-2" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" target="UwzjYA9SK8VwgR3xvNyD-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-35" y="440" as="sourcePoint" />
            <mxPoint x="765" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UwzjYA9SK8VwgR3xvNyD-1" value="kRPC&lt;br&gt;(lzc)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-100" y="410" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TzMTU6Jy_J-msooE1Wl0-1" value="sys_config&lt;br&gt;(欣乐)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-560" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TzMTU6Jy_J-msooE1Wl0-2" value="app" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-560" y="210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TzMTU6Jy_J-msooE1Wl0-3" value="kRPC" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-560" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TzMTU6Jy_J-msooE1Wl0-5" value="etcd.a" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-560" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TzMTU6Jy_J-msooE1Wl0-6" value="sys_acl" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-710" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="o1zVtTipv5lU6a80Wlv1-1" value="BuckyOS Kernel" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="580" y="550" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="o1zVtTipv5lU6a80Wlv1-2" value="BuckyOS App" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="570" y="350" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="69FT-Gw5U4DT3xUlIVEL-1" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" target="sXJHHGRh78HDzlqQBdKx-17" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-70" y="760" as="sourcePoint" />
            <mxPoint x="780" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sXJHHGRh78HDzlqQBdKx-17" value="cyfs gateway" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-60" y="730" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="yT246MxJrNwgLdexHOI-" name="pkg system">
    <mxGraphModel dx="2908" dy="2298" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="soKJ22ut9W6iChpHjKMU-1" value="安装app&lt;br&gt;bpm install buckyos-filebrowser" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="65" y="80" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-2" value="升级frame&lt;br&gt;bpm upgrade dfs" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-200" y="80" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-3" value="升级系统&lt;br&gt;bpm upgrade" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-470" y="80" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-4" value="自动执行，bpm update&lt;br&gt;同步pakcage index&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="220" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-5" value="repo server&lt;br&gt;（other repo）" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="620" y="200" width="160" height="90" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.999;entryY=0.433;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="soKJ22ut9W6iChpHjKMU-5" target="soKJ22ut9W6iChpHjKMU-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-7" value="得到buckyos-filebrowser的defualt 版本id" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="330" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-8" value="发起下载任务,并等待任务结束" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="430" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-13" value="更新zone repo中的 index,让buckyos-filebrowser的版本号指向新版本" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="530" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-14" value="zone-repo-server的操作完成" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="630" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="soKJ22ut9W6iChpHjKMU-15" target="soKJ22ut9W6iChpHjKMU-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-17" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="50" y="170" width="260" height="550" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-15" value="oods&lt;br&gt;(other repo)" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="610" y="415" width="160" height="90" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-18" value="repo install pkg" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="130" y="180" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-19" value="Bucky Store.install app" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="50" y="770" width="260" height="320" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-21" value="询问zone-repo 对应的pkg是否已经就绪" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="820" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-22" value="等待用户Confirm Install (有参数配置)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="890" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-23" value="写入SystemConfig" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="960" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-24" value="由repo server组成的network" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="380" y="330" width="195" height="30" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-25" value="唤醒调度器，调度器构造node-config" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="1020" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-26" value="node_daemon&lt;br&gt;&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="50" y="1150" width="260" height="350" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-27" value="启动app service(有更精细的pkgid)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="1190" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-28" value="尝试load 指定版本的pkg" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="1270" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-29" value="如load 失败，则去本地的repo-server上下载pkg" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="1350" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0.998;entryY=0.37;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="soKJ22ut9W6iChpHjKMU-17" target="soKJ22ut9W6iChpHjKMU-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-31" value="再次尝试启动" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="1430" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="soKJ22ut9W6iChpHjKMU-32" value="一个应用的安装，会给系统里添加多个pkg" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="365" y="1240" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-1" value="可信的pkg db下载" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="950" y="210" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="lWEpS2572HMjW-OEhioc-3" target="lWEpS2572HMjW-OEhioc-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-3" value="源URL&lt;div&gt;FileObject&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="950" y="250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-4" value="pkg-DB&lt;div&gt;app-db?&lt;/div&gt;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="1170" y="240" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-5" value="1.通过一个非did:key:xxxx 的DID，如何可信的得到公钥?&amp;nbsp;&lt;div&gt;方案1：公钥保存在DNS TXT记录中，这个方案本质上还是依赖对&quot;DNS的拥有&quot;，流程上绕过了https的证书体系，只需要拥有DNS即可&lt;/div&gt;&lt;div&gt;方案2:&amp;nbsp; &amp;nbsp;公钥保存在某个智能合约中（BNS），如果BNS上有记录，则可信度超过DNS。对于用户（名字的拥有者）来说，必须同时拥有两者，99%的情况下这两个系统都会查询回相同的结果。当不同的时候，系统优先信任BNS。 但是建立可信的BNS查询需要同步区块，需要消耗较多的本地资源。&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;为了开发方便：本地的known_did的优先级总是最高的。&lt;/div&gt;&lt;div&gt;成功验证过的did_doc会放到local cache中。以降低查找频次。&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1290" y="170" width="280" height="250" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-6" value="1. 根据URL所在Zone的Trust Key list对FileObject进行验证.FileObject中包含了pkg-db的sha256 hash&lt;div&gt;2. 验证pkg-db的 hash&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="965" y="330" width="250" height="70" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-7" value="app-pkg-db中的可信app_doc" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="950" y="420" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-8" value="查询得到" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="lWEpS2572HMjW-OEhioc-9" target="lWEpS2572HMjW-OEhioc-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-9" value="app_id" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="950" y="460" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="lWEpS2572HMjW-OEhioc-11" target="lWEpS2572HMjW-OEhioc-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-11" value="app_doc,&lt;div&gt;由app_owner签名&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1150" y="460" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="lWEpS2572HMjW-OEhioc-13" target="lWEpS2572HMjW-OEhioc-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-13" value="通过app_owner的did得到必要的turst key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1330" y="460" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-14" value="用trust key验证app_doc的签名" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1510" y="460" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-15" value="app_doc中包含pkg_id,pkg_id中有sha:256信息" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="950" y="530" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-16" value="sha:256" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="950" y="590" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-17" value="pkg" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="1170" y="570" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="lWEpS2572HMjW-OEhioc-16" target="lWEpS2572HMjW-OEhioc-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-19" value="通过sha256下载chunk是不需要进行签名校验，且不需要https支持的。可以拼接2个URL进行下载&lt;div&gt;1. app_owner zone的链接&lt;/div&gt;&lt;div&gt;2. 源 zone的链接&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1290" y="570" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-20" value="上述流程的反向就是app的发布&lt;div&gt;1. 先本地build,打包，得到包的sha256&lt;/div&gt;&lt;div&gt;2.构造app新版本的 app_doc&lt;/div&gt;&lt;div&gt;3.用owner签名&lt;/div&gt;&lt;div&gt;4. 将pkg发布到自己zone的repo&amp;nbsp; or ndn mgr?&lt;/div&gt;&lt;div&gt;5.将签名的app_doc发的到处都是,包括自己的repo&lt;/div&gt;&lt;div&gt;6.源订阅的定期跟踪机制通过跟踪收录app_id的原始URL，可以看到app_doc的更新，验证后收入到pkg_db,并定时产生新的pkg-db&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="910" y="660" width="420" height="130" as="geometry" />
        </mxCell>
        <mxCell id="lWEpS2572HMjW-OEhioc-21" value="验证app_doc的流程与app_doc的获取无关&lt;div&gt;app_doc甚至可以是自验证的（发布者用did:key:xxxx)&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1237.5" y="500" width="305" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R2PdDVwk_Y7z2gshV6vo-1" value="通过NDN URL 发布内容，相当于将内容保存到系统里（URL不再与appid相关）&lt;div&gt;repo实现了订阅源&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;管理appid-&amp;gt;app_doc&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;管理pkg-db&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#CC0000;" parent="1" vertex="1">
          <mxGeometry x="1370" y="670" width="430" height="70" as="geometry" />
        </mxCell>
        <mxCell id="R2PdDVwk_Y7z2gshV6vo-3" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;NDN的url设计&lt;/h1&gt;&lt;p&gt;https://$base32objid.zoneid/inner_path.&amp;nbsp; 用objid公共发布内容. 一般是objid本身指向folder这种有容器的obj才会使用这种方式。 目前这种格式只有手工发布才会使用（系统目前不使用这种方法）&lt;/p&gt;&lt;p&gt;https://zoneid/ndn/$pub_path/$objid/obj_inner_path&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;https://zoneid/ndn/$pub_rpath&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;上述两种最常用，可以基于pub_path做一些更全局的权限控制&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;https://sys.$zoneid/ndn/&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;$pub_path/&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;$objid/inner_path&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;https://sys.zoneid/ndn/$pub_rpath&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;上面两种用于zone内访问。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;所有的zone内服务都可以通过访问default named mgr数据发布到zone 内&lt;/p&gt;&lt;p&gt;通过调用 sys.zoneid/publish.html ，用户确认后，可以将数据正式发布到公共的named mgr, 该named mgr的写入需要&lt;font style=&quot;color: rgb(204, 0, 0);&quot;&gt;普通用户的管理级别权限,ID是 userid&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;构造NDN URL意味着发布。发布后只保证数据获取的可校验性，数据的可确权性，不保护数据传输的私密性（允许监听），允许任何人保存。（发布后的数据原理上不可被彻底删除）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1930" y="140" width="460" height="510" as="geometry" />
        </mxCell>
        <mxCell id="R2PdDVwk_Y7z2gshV6vo-4" value="关于pkg-id&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;使用者总是倾向于用 “友好方式”使用pkg-id,完整的pkg-id包括&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;channel:namespace:pkgid:pkg-version:pkg-chunkid 这么多段落,&lt;/div&gt;&lt;div&gt;env.load(pkg_id)会根据当前env的默认配置来加载pkg-id&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;pkg-id因为会出现在域名中，所以和userid一样，只能使用域名有效字符。并不允许使用 _ （&lt;font style=&quot;color: rgb(153, 0, 77);&quot;&gt;系统里的各种id的统一可用字符标准&lt;/font&gt;）&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1000" y="-20" width="380" height="150" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="i7rDc_Y2ZXbLJ_Izxtpt" name="ndn-lib">
    <mxGraphModel dx="1894" dy="1901" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="VGbAvs_T3tfYimthB3y_-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-1" target="VGbAvs_T3tfYimthB3y_-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-1" target="VGbAvs_T3tfYimthB3y_-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-1" target="VGbAvs_T3tfYimthB3y_-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-1" value="Pull Chunk&lt;br&gt;类似tokio::copy" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="150" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-2" target="VGbAvs_T3tfYimthB3y_-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-2" target="VGbAvs_T3tfYimthB3y_-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-2" value="1. Open Writer&lt;br&gt;允许断点续传?" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="70" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-17" value="否" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-6" target="VGbAvs_T3tfYimthB3y_-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-6" value="Chunk&lt;br&gt;Exist?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="425" y="60" width="145" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-8" target="VGbAvs_T3tfYimthB3y_-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-8" value="3. Try open reader with offset" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-9" value="Return Writer" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="630" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-11" target="VGbAvs_T3tfYimthB3y_-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-21" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="VGbAvs_T3tfYimthB3y_-20" vertex="1" connectable="0">
          <mxGeometry x="0.1468" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-22" value="可以" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-11" target="VGbAvs_T3tfYimthB3y_-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-11" value="通过quickhash验证判断可以断点续传?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="605" y="130" width="185" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-13" value="删除旧文件并Return Writer" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="840" y="70" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-14" value="Seek and Return Writer" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="990" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-15" target="VGbAvs_T3tfYimthB3y_-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-15" value="读取进度" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="810" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-19" value="是" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.025;entryY=0.497;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-6" target="VGbAvs_T3tfYimthB3y_-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-26" value="2.know progress" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="170" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-29" value="4.边下边验证边保存进度(针对不同大小有不同的默认行为)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-34" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-31" target="VGbAvs_T3tfYimthB3y_-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-36" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-31" target="VGbAvs_T3tfYimthB3y_-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-31" value="Chunk&lt;br&gt;Exist?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="425" y="290" width="145" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-32" value="Return Reader" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="570" y="230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-35" value="Return Error" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-39" value="常见的Chunk Reader和Chunk Writer的后端" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="80" y="490" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-40" target="VGbAvs_T3tfYimthB3y_-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-40" target="VGbAvs_T3tfYimthB3y_-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-40" value="Reader" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="125" y="630" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-41" value="FileReader" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-42" value="(Http) Stream Reader" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="670" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-43" target="VGbAvs_T3tfYimthB3y_-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-43" value="Write" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="120" y="860" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-44" value="File Write" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="310" y="800" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-45" value="(Http) Stream Appender" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="310" y="920" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=-0.027;entryY=0.429;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-43" target="VGbAvs_T3tfYimthB3y_-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-50" value="Chunk Builder: 基于现有数据,构建Chunk&lt;br&gt;普通文件:计算ChunkId和quickhash&lt;br&gt;大文件:构建chunklist&lt;br&gt;小文件:计算ChunkId,(并成为一个大chunk的一部分)&lt;br&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="610" y="495" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-53" target="VGbAvs_T3tfYimthB3y_-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-53" target="VGbAvs_T3tfYimthB3y_-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-53" value="URL is chunk?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="160" y="-170" width="145" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-56" value="Return Reader" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="360" y="-100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-57" target="VGbAvs_T3tfYimthB3y_-58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-57" value="URL Point to&amp;nbsp; known named object" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="360" y="-230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-58" target="VGbAvs_T3tfYimthB3y_-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-58" value="parse named object" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="540" y="-230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VGbAvs_T3tfYimthB3y_-59" target="VGbAvs_T3tfYimthB3y_-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-59" value="get real chunk url url2" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="710" y="-230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-60" value="return Open Chunk&lt;br&gt;Reade By URL2" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="870" y="-230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-66" value="Open Chunk Reader By URL" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="85" y="-260" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-67" value="Pull Chunk必然是单源的" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="55" y="100" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-69" value="Put ChunkB" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1050" y="475" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VGbAvs_T3tfYimthB3y_-70" value="Put Named Object&lt;br&gt;Say : ChunkA is ChunkB" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1240" y="475" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="JvShwL8G7op1oZlSJPBe" name="一些流程">
    <mxGraphModel dx="2058" dy="1198" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-1" value="用户扩展的App的运行逻辑" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1290" y="1070" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-3" target="Uhl6TVcSV4RiziGJbxAS-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-3" value="内核启动应用" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1330" y="1160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;dashPattern=8 8;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-5" target="Uhl6TVcSV4RiziGJbxAS-64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-5" value="从系统应用安装配置中读取应用的拓扑配置，并修改ETCD" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1330" y="1260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-7" target="Uhl6TVcSV4RiziGJbxAS-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-7" value="app process start" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-9" target="Uhl6TVcSV4RiziGJbxAS-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-9" value="从系统的/etc/dapp_id/目录下读取核心配置" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1580" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-11" target="Uhl6TVcSV4RiziGJbxAS-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-11" value="初始化，通过DFS读取数据并校验" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1685" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-13" target="Uhl6TVcSV4RiziGJbxAS-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-13" value="读取/更新 Local Cache（可选）" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1810" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-14" value="调用系统服务" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-15" target="Uhl6TVcSV4RiziGJbxAS-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-15" value="提供APP服务" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1930" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-17" target="Uhl6TVcSV4RiziGJbxAS-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-17" value="更新新的ETCD配置" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="960" y="175" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-19" target="Uhl6TVcSV4RiziGJbxAS-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-19" value="node启动，读取内核配置，准备ETCD数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="960" y="275" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-21" target="Uhl6TVcSV4RiziGJbxAS-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-21" value="从已知的备份路径下载并校验" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="770" y="275" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-22" value="数据校验通过，启动ETCD" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="960" y="365" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-24" target="Uhl6TVcSV4RiziGJbxAS-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-24" value="BIOS阶段：机器等待激化（Zone信息）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1210" y="130" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-25" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-26" target="Uhl6TVcSV4RiziGJbxAS-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-26" value="buckyos引导阶段: Zone完成引导，成为可用的Zone" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1210" y="270" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-28" target="Uhl6TVcSV4RiziGJbxAS-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-28" value="各个System Service开始初始化" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1210" y="410" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-29" value="系统启动成功，可以运行用户态的软件" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1217.5" y="550" width="135" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-30" value="当系统发生较大变化后，集群有可能会重启。这个阶段出现问题，一般需要物理机操作进行修复" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1380" y="285" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-31" value="系统发生较大变化后，SystemService也需要较长时间初始化。这个阶段出现问题，可以用 OS CLI进行修复（）" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1385" y="405" width="170" height="65" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-32" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;rotation=-180;" parent="1" vertex="1">
          <mxGeometry x="1140" y="250" width="50" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-34" target="Uhl6TVcSV4RiziGJbxAS-70" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-34" value="内核调度器确认故障&lt;br&gt;（故障的发现是可扩展的）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1925" y="220" width="157.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-70" target="Uhl6TVcSV4RiziGJbxAS-67" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1997.5" y="542.5" as="sourcePoint" />
            <mxPoint x="1997.5" y="637.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-37" target="Uhl6TVcSV4RiziGJbxAS-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-37" value="产生系统警告，系统进入黄色状态" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2142.5" y="425" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-39" target="Uhl6TVcSV4RiziGJbxAS-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-39" value="系统停机，进入维修诊断（只读）状态" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1742.5" y="435" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-41" target="Uhl6TVcSV4RiziGJbxAS-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-41" value="系统配置更新（Scale）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="210" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-42" value="完成修复后，手工重新启动系统" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1742.5" y="550" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-43" value="等待修复完成后（更新配置），手工标记故障排除" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="2142.5" y="545" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-45" target="Uhl6TVcSV4RiziGJbxAS-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-45" value="配置改变工具会尽力构造一次安全的配置更新" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2620" y="210" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-47" target="Uhl6TVcSV4RiziGJbxAS-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-47" value="创建 维护Task（可选）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="320" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-49" target="Uhl6TVcSV4RiziGJbxAS-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-49" value="等待阻塞维护任务完成" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="420" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-50" value="所有维护任务完成" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-51" target="Uhl6TVcSV4RiziGJbxAS-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-51" value="系统正常运行&lt;br&gt;（维护任务在后台运行）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="520" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-52" value="系统正常运行" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="640" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-53" style="edgeStyle=none;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-54" target="Uhl6TVcSV4RiziGJbxAS-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-54" value="etcd故障" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1730" y="72.5" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-55" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-56" target="Uhl6TVcSV4RiziGJbxAS-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-56" value="租约协议故障？&lt;br&gt;严格控制租约的使用" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1930" y="72.5" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-57" style="edgeStyle=none;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.797;entryY=0.017;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-58" target="Uhl6TVcSV4RiziGJbxAS-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-58" value="内核日志与应用日志" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2125" y="72.5" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-60" target="Uhl6TVcSV4RiziGJbxAS-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-60" value="根据拓扑配置在一些node上启动容器(Docer/VM)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1365" width="120" height="55" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-62" target="Uhl6TVcSV4RiziGJbxAS-64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-62" value="node_daemon循环" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-64" target="Uhl6TVcSV4RiziGJbxAS-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-64" value="读取etcd,发现node配置改变" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-65" value="内核服务" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1330" y="1930" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-66" value="我们鼓励App开发者使用基于Object Storage的DFS来提高服务的，性能，可靠性和可用性&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1350" y="1700" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-67" value="内核调度器尝试修改运行配置（可选）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1925" y="425" width="157.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-70" target="Uhl6TVcSV4RiziGJbxAS-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-70" target="Uhl6TVcSV4RiziGJbxAS-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-70" value="故障决策" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1925" y="330" width="157.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-71" value="Zone的启动流程" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="950" y="70" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-72" value="Zone的故障处理" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1742.5" y="20" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-74" target="Uhl6TVcSV4RiziGJbxAS-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-74" value="Zone拓扑改变" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2620" y="110" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-75" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-76" target="Uhl6TVcSV4RiziGJbxAS-80" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-76" value="备份开始" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-77" value="备份&lt;br&gt;对于有3个物理节点的Zone来说，数据是基本可靠的保持在DFS上的。备份行为指的是定期的Zone外冷备份（存在丢一小部分数据的可能性）。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="3360" y="43" width="220" height="67" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-78" value="从备份中恢复&lt;br&gt;1.手工触发&lt;br&gt;2. Zone重建" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="3850" y="40" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-80" target="Uhl6TVcSV4RiziGJbxAS-84" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-80" value="系统进入只读状态（可选）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-81" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-82" target="Uhl6TVcSV4RiziGJbxAS-86" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-82" value="打包系统保存在dcfs上的数据（各个system service同步备份）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="480" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-84" target="Uhl6TVcSV4RiziGJbxAS-82" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-84" value="打包etcd的所有数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-86" target="Uhl6TVcSV4RiziGJbxAS-88" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-86" value="备份上述数据到backup server" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="590" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-88" target="Uhl6TVcSV4RiziGJbxAS-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-88" value="逐个应用备份数据&lt;br&gt;（并行备份）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="710" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-89" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-90" target="Uhl6TVcSV4RiziGJbxAS-91" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-90" value="备份完成" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-91" value="在NameService(Meta-Chain)上保存备份结果（可选）" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3360" y="930" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-93" target="Uhl6TVcSV4RiziGJbxAS-95" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-93" value="开始恢复" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-94" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-95" target="Uhl6TVcSV4RiziGJbxAS-105" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-95" value="系统进入未引导状态" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-96" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-97" target="Uhl6TVcSV4RiziGJbxAS-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-97" value="恢复etcd数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="560" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-98" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-99" target="Uhl6TVcSV4RiziGJbxAS-101" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-99" value="启动etcd" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-100" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-101" target="Uhl6TVcSV4RiziGJbxAS-107" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-101" value="恢复保存在DFS上的系统数据数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-102" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-103" target="Uhl6TVcSV4RiziGJbxAS-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-103" value="从备份服务器上获取备份" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-104" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-105" target="Uhl6TVcSV4RiziGJbxAS-103" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-105" value="得到待恢复备份数据的元信息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="360" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-106" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-107" target="Uhl6TVcSV4RiziGJbxAS-108" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-107" value="恢复保存在DFS上的应用数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="860" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-108" value="恢复完成，进入Zone的引导逻辑" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3840" y="950" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-109" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-110" target="Uhl6TVcSV4RiziGJbxAS-112" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-110" value="安装应用" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1100" y="1160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-111" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Uhl6TVcSV4RiziGJbxAS-112" target="Uhl6TVcSV4RiziGJbxAS-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-112" value="根据Zone的拓扑，自动构建启动拓扑配置并保存" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1100" y="1260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Uhl6TVcSV4RiziGJbxAS-113" value="和k8s不同，我们并不在小的Zone里启用“编排”，而是更多以固定配置来运行应用服务" style="strokeWidth=1;shadow=0;dashed=0;align=center;html=1;shape=mxgraph.mockup.text.stickyNote2;fontColor=#666666;mainText=;fontSize=17;whiteSpace=wrap;fillColor=#ffffcc;strokeColor=#F62E00;" parent="1" vertex="1">
          <mxGeometry x="1180" y="1370" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-1" target="tug6-lGKLGd_aUpJzQRX-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-1" value="read zone_name from node_identifiy" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="130" y="130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-2" target="tug6-lGKLGd_aUpJzQRX-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-2" target="tug6-lGKLGd_aUpJzQRX-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-2" value="zone_name is did?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="110" y="255" width="160" height="95" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-3" value="zone_cofing = name_client.resolve_did(zone_id)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="510" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-4" target="tug6-lGKLGd_aUpJzQRX-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-4" value="name_info = name_client.resolve_name(zone_name)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="330" y="277.5" width="260" height="50" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-6" target="tug6-lGKLGd_aUpJzQRX-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-6" value="parser name_info, &lt;br&gt;get zone_id&lt;br&gt;might get zone_did_document&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="375" y="510" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="tug6-lGKLGd_aUpJzQRX-7" target="tug6-lGKLGd_aUpJzQRX-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-7" value="zone_id = zone_name" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="130" y="407.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="tug6-lGKLGd_aUpJzQRX-16" target="tug6-lGKLGd_aUpJzQRX-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tug6-lGKLGd_aUpJzQRX-16" value="provider do query and verify result" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="375" y="380" width="170" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="UtNqsgmyMWqOYOfoDoeE" name="Page-15">
    <mxGraphModel dx="2908" dy="1198" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="khVfkF-Ww6TRZx32QxxV-1" value="Named Data/Object" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="365" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="khVfkF-Ww6TRZx32QxxV-2" value="Named Data Mgr" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="365" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="khVfkF-Ww6TRZx32QxxV-3" value="DCFS" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="500" y="180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="khVfkF-Ww6TRZx32QxxV-4" value="CYFS-Gateway" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="khVfkF-Ww6TRZx32QxxV-5" value="ETCD" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="670" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="khVfkF-Ww6TRZx32QxxV-6" value="Sysctem Config" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="670" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="khVfkF-Ww6TRZx32QxxV-7" value="Scheduler" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="670" y="280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="khVfkF-Ww6TRZx32QxxV-8" value="DRDB" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="840" y="180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="khVfkF-Ww6TRZx32QxxV-9" value="dApp Service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="660" y="50" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="khVfkF-Ww6TRZx32QxxV-10" value="CYFS-Gateway&lt;div&gt;（other-zone)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-110" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="khVfkF-Ww6TRZx32QxxV-11" value="包含的类似开源项目:&lt;div&gt;openclash / frp&lt;/div&gt;&lt;div&gt;ipfs&lt;/div&gt;&lt;div&gt;nginx&lt;/div&gt;&lt;div&gt;k8s&lt;/div&gt;&lt;div&gt;seaweed&lt;/div&gt;&lt;div&gt;git&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="20" y="480" width="250" height="120" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
