# BuckyOS System UI

本需求文档完整的讨论BuckyOS的所有System UI.

有一些System UI是以独立页面(系统应用）的形式存在的，但这不是系统默认应用。

## 目录
（暂时不包含AI基础设施）

- desktop.html
- jarvis.html 
- settings.html
  - general
  - zone mgr --> my_zone.html(My Home)
  - apperance
  - storage -> storage_mgr.html
  - AI Models
  - Groups -> contacts.html 对"联系人”实体管理，对AI真确理解非常重要
  - App & Permission -> service_detail.html
  - about
- my_zone.html (My Home)
- activity_center.html
  - task_mgr
  - inbox 
- dashboard.html
  - system monitor
  - event logs
  - 诊断
  - 开发者功能 --> sys_test app
- stoarge_mgr.html


## 默认桌面：面向普通用户的两个入口

我们未来给普通用户提供两个桌面入口。

**入口一：传统桌面（更保守的默认入口）** （desktop.html)
类似传统 NAS / PC 的使用习惯，但更贴近 **Android 桌面** 的形态：由一组排列整齐的**应用图标** + 一组**小部件（Widgets）**构成。
主要需要考虑：

* 图标如何摆放、布局如何调整；
* 从哪里读取/发现可用小部件；
* 小部件如何添加到桌面、如何拖拽移动等交互。

如果需求足够明确，应该有比较标准的 UI 库可以使用。

**入口二：AI 桌面（Jarvis / AI-native Desktop）** (jarvis.html)
通过一个**开关（Toggle）**切换到 AI 桌面。最简单的形态可以是：

* 一个很大的用户输入框（Chatbox）作为核心入口；
* 在用户输入前，展示最近的对话记录。

这个版本不需要把 AI 桌面的交互细节完全想清楚，但方向明确：未来希望用户不再面对传统“图标 + Widgets”的桌面，而是更 **AI-native**、以 **Chatbox 主导**的桌面体验。

---

## System Settings：（settings.html)

系统设置的定位与设计原则:

**系统设置（System Settings）** 

这个模块 UI 会非常多，但不是高频入口。用户会知道：复杂设置要来系统设置里找，但不会天天打开。

设计思路上，参考 Apple 的成熟方案即可，尤其考虑我们要 **mobile-first（移动优先）**：

* 左侧：大类分类（Category）
* 右侧：分类详情，再按段落（Section）平铺展开
  重点不在“每一项都极致交互”，而在**信息架构完整、可查找**。

此外：
**搜索必须有**，因为设置很多，需要通过搜索快速定位到某一个设置项。


### 当前系统（General）

用户需要简要的看到系统关键概况（尤其是硬件/集群信息/软件信息）：

* 集群里一共有几台设备；
* 每种类型设备各有多少台；
* 系统启动时间（Uptime）等集群概况。

在下面紧接着展示资源使用情况：

* CPU、内存、磁盘、网络吞吐等实时指标。

桌面上的 **System Stats 小部件**可以认为数据来自这里，但系统面板可以展示得更详细。
如果用户要进一步管理（例如设备管理），这里提供跳转入口即可。

### 软件版本与更新（Software Version / Update）

我们原理上允许集群内设备的 **RQS 设备端版本**不同，但目前不必暴露复杂性。
只需要站在集群角度展示核心系统版本即可，并提供“更新”入口：

* 默认自动更新；
* 可管理更新源等配置；
* 从这里跳转到“更新管理”模块。


### Zone Manage

作为集群操作系统，必须让用户在 UI 上强烈感受到：

* 这不仅是“买了一个 personal server 的设备”，
* 而是一个可以在互联网中作为平等节点存在的集群/域。

My Zone 是一个重要的创新入口，应该尽早把它的风格立起来。 System Settings里的Zone Mange应该能看到

- Zone 当前状态
- Zone 内设备管理
- Zone 内用户管理

然后可以点击跳转到My Zone 系统应用，查看更完整的功能。


### 用户与应用的权限管理（User & App Permission）

这个Settings内页的主要目的，是帮助用户管理App的权限。分成两个部分
- 系统的默认应用设置 （需要扩写）
- 列出已安装的全部应用，查看基础信息+基础权限，并可点击进入查看“已安装应用详情”，可以对应用权限进行详细调整
- 列出方式默认是按安装时间倒排的列表，也可改成按用户分组和按字母分组

---

## 应用详情 (service_detail.html)

- 应用基本信息
- 应用使用使用的资源统计
- 应用权限

权限方面会越来越复杂（参考 Android / iOS 经验），需要考虑向下兼容：
系统升级新增权限后，老应用如何默认赋权/如何提供入口让用户调整；
抽象成 value + description + type 的结构，内置常见类型编辑器；特殊类型可退化为字符串输入；
还应支持权限审计：应用曾经升级过哪些权限、权限变更记录。
- 应用日志
- 支持分享应用

##  Zone：域名、网络与访问、证书（面向 ToC 的一体化呈现）

### 域名与名称管理（Domain / Name）

从传统网站运营视角，My Zone 里首先显示“我的域名”，并提供域名相关管理（状态、费用等）。

用户有两种选择：

1. 使用我们体系内的域名（BS 域名）

* 用户通过智能合约完全拥有。
* 在 COS 协议大规模普及前，为兼容传统 HTTP，需要通过 **Web3 Gateway** 中转，所以看起来像标准二级域名。
* 用户实际拥有的是 DS 合约里的“顶层名字”（例如 Alice）。
  （示例：映射成类似 `Alice.gameweb3.RQS.ai`；DID 体系下类似 `SBS.DID`）

2. 接入用户自购的传统域名

* My Zone 提供面板，跳转到主流域名注册商。
* 若注册商提供 API，可辅助做域名运营管理：

  * 自动设置/查看 DNS 记录（例如 TXT Record 的设置与记录）

另外，“名字”可能还包含资产属性（产权/管理等），但在 My Zone 中主要强调“域名 → 集群”的视角即可。

### 设备管理与 Zone 视角整合

我们可以把原来的 Device Manager 思路升级为更“Zone 视角”的管理：

* 上面一大块：域名信息；
* 下面：设备信息；
* 用树形结构强化“域名下是一整个集群”的认知。

### 网络与访问链路（Connectivity / Access）

建议把传统“网络与访问”的设置集成到 My Zone。

My Zone 应清晰告诉用户：传统浏览器访问 Zone 是怎么走的：

* 直连：公网直达或端口映射
* SN 提供的中转服务
* 端口转发细节：

  * 优先转发 443、80、2980
  * 如果 TCP 端口不是默认 2980，自定义端口会影响 Zone 的 boot config

### 证书管理（Certificate）

不是所有 Zone 都必须对外提供 HTTP 服务，所以证书相关能力应按需启用。

对有对外 Web 服务的用户，证书管理与域名管理放在一起更符合 ToC 理解（而不是纯运维视角分散展示）。

需要区分“初级功能 vs 高级功能（专家模式）”：

* 初级：能自动做好的就不要让用户关心细节；
* 高级：提供足够信息用于排障与理解：

  * 证书下载到本地
  * 手动替换证书
  * 自动签发可开可关
  * 可查看最近一次 **ACME Challenge** 的日志信息


### 用户管理

单用户默认场景（管理员激活后默认安装应用）下，短域名不需要展示用户 ID。
但家庭多用户场景里：

普通用户账号需要在 PS 注册；

只要公钥/BS 名字不变，其他人添加好友、识别用户身份都可保持一致；

用户与 Zone 是一对多：用户可拥有多个 Zone，但有一个默认 Zone；

访问资源更多是“通过 Zone 访问”，URL 结构也倾向以 App ID 为主；App instance 和 Zone 绑定，而不是和用户绑定。

#### 两种用户模型

单应用多用户模型

只有管理员可以在 Zone 里安装应用；

应用通过 SDK/SSO 支持同一 APP Service 内的多用户数据；

APP Service 可访问所有使用该应用的用户数据（适合共享/整合型应用）。

强隔离模型

用户不想共享同一个 APP Service，可为自己安装独立的 APP Service，实现更强隔离。

默认策略：创建用户时，非高级用户默认没有安装应用权限；管理员可开启。

#### 用户创建/导入

添加用户两种方法：

创建新用户：在 BS 合约中创建新账号

标准用户：全网可见

受限用户（Guest）：仅 Zone 内可见、无需完整 user document 的临时用户

导入用户：用户已在 PS 注册，导入即可（体验类似 Windows 创建账号流程）

用户可以在 Zone 内删除/禁用，但不能越过规则直接从 BS 删除。

-- 

## 存储（Storage）：总览 + 独立管理应用 (storage_mgr.html)

存储是用户强关注项：空间还有多少、数据安不安全。

系统面板这里建议只做“整体总览”：

* 总空间/已用空间；
* 存储安全状态（是否满足设计的安全策略）；
* 备份相关：

  * 展示最后备份时间；
  * 估算两次备份之间可能新增的数据量；
  * 若超过阈值，提示“备份未完成，可能丢数据”的风险。

完整的存储工具应作为独立系统应用 **Storage Manager（存储管理）**，并单独写 PRD，覆盖：

* 存储池管理与扩展；
* 各设备存储明细；
* 备份与恢复管理等。

对恢复（Restore）的态度：
恢复应被定义为“重型操作”，通常需要先把系统抹掉到未激活状态，再进行恢复；流程长，不鼓励用户日常把恢复当成“回滚点”使用。备份应是日常主路径。

---


## 旁路由/网络行为管理：建议独立为 AI Content Manager

我们还有一类“网络行为管理”（传统旁路由）的能力。展开做会很复杂，Gateway Service 本身也可能是独立产品。

如果集群里有节点承担了旁路由能力，可以做两类核心功能：

1. 规则驱动的家长控制
   规则可以用自然语言描述，再由 AI 生成规则，普通用户容易理解和使用。

2. （偏专业）TLS/HTTPS 拦截后抓取本地 HTTP 内容
   将用户设备访问内容抓到本地，给本地 Agent 提供原始数据，用于比价、研究等能力（无需用户额外装爬虫）。

这块能力与“网络与访问链路（Connectivity）”不同，建议从 My Zone 剥离，独立成一个系统应用：**AI Content Manager**，不要塞进系统面板。

---


## 监控、事件与通知中心：System Monitor / Event Log (dashboard.html)

### System Monitor

运维视角的监控面板用于：

* 系统运行状态、硬件工作状态；
* 系统服务执行的后台逻辑（非用户触发）；
* 整合软件事件 + 硬件事件。

这类能力应该有一个图形化面板，建议把 System Monitor 与 System Event Log 合并为同一套组件/应用。

### 日志与诊断（Log / Diagnostics）

日志很关键，但系统面板不需要把“运维级细节”都展开。

更合理的做法是：

* 在面板里提供一个入口，让用户进入独立的“日志中心/系统日志应用”；
* 用户能快速看到“需要关注的问题”；
* 早期阶段要支持辅助排障：

  * 一键复制全部日志
  * 下载日志包
    方便用户发给开发者定位问题。

更完整的、类似 Windows Event Viewer 的日志中心能力，应该作为独立系统应用存在；系统面板保留入口即可。

---

## Activity Center （activity_center.html)

Task Manager + Inbox（用户可理解的动作与提醒）

传统 NAS 常见的 Inbox + Task Manager，可以合并成类似“通知中心”的独立系统应用。用户关心的是“能理解的大动作完成情况”，而不是原始日志。

**Task Manager（任务管理）**

* 常见场景：备份任务、计划任务、超长任务（可能持续数天甚至一周）。
* 面向 AI 工作流：Task 与 Subtask（子任务）关系；支持 workflow 视角与移动端“快速看进度”视角。
* 支持过滤：查看系统有哪些任务在跑，哪些任务占用 GPU 等稀缺资源。
* 鼓励 APP Service 用 SDK 投递任务；若任务可取消（cancel），提供统一一致的取消入口。

**Inbox（系统通知）**

* 这是“系统级提醒”，例如 GPT API Token / Cloud Token 快用完。
* 通知应分层：

  * 最底层：事无巨细的系统报告
  * 上一层：更可读的 event log / user log
  * 再上一层：必须关注的通知（Notification）
* 要吸取 iOS 通知容易被滥用成推广、导致用户不看的问题：

  * 借助系统 AI 做分级、合并、摘要
  * 例如每天汇总“过去一天新增通知里哪些需要重点关注”
* 通过明显入口（小红点/数字）让用户进入集中处理。
* 这里提到过：之前规划过类似 Message Hub（整合邮件等通信）的东西，但本处的 Inbox 更偏“Zone 运行与系统提醒”，不是同一类产品。

Activity Center 应作为独立系统应用，不要放进 System Settings。



