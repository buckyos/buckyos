<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/26.0.16 Chrome/132.0.6834.196 Electron/34.2.0 Safari/537.36" version="26.0.16">
  <diagram name="Page-1" id="BK3ONfATDbmIWESrvhGV">
    <mxGraphModel dx="2908" dy="2298" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ILIdesDGYVWNeA5FY_8v-1" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1472" y="-537" width="568" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-2" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="20" y="-535" width="510" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-3" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1540" y="190" as="sourcePoint" />
            <mxPoint x="1540" y="-470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-4" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1260" y="-980" width="170" height="290" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-5" value="&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 16px; line-height: 19px;&quot;&gt;基于url比如 https://$servicename.$zoneid/page1.html 来访问BuckyOS&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=default;labelBackgroundColor=none;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="870" y="-600" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-8" target="ILIdesDGYVWNeA5FY_8v-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-7" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-8" target="ILIdesDGYVWNeA5FY_8v-92">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="314.00000000000045" y="-365" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-8" value="cyfs-dns?&lt;br&gt;(cyfs-gateway的front)" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="-410" width="216" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-10" target="ILIdesDGYVWNeA5FY_8v-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-10" value="查询$zoneid的did document" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="398" y="-260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-11" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-13" target="ILIdesDGYVWNeA5FY_8v-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-12" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-13" target="ILIdesDGYVWNeA5FY_8v-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-13" value="可以直连？" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="-150" width="216" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-14" value="如果有透明路由，则返回fake-ip&lt;br&gt;cyfs-gateway在该fake-ip上监听80/443" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="398" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-17" target="ILIdesDGYVWNeA5FY_8v-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-17" target="ILIdesDGYVWNeA5FY_8v-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-17" value="解析$zoneid" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="20" y="-465" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-18" value="基于端口映射" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-24" target="ILIdesDGYVWNeA5FY_8v-62">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-24" target="ILIdesDGYVWNeA5FY_8v-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-20" value="连接公网ip" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-19">
          <mxGeometry x="0.3966" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-24" target="ILIdesDGYVWNeA5FY_8v-43">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-24" target="ILIdesDGYVWNeA5FY_8v-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-23" value="连接fake-ip&lt;div&gt;服务通过red socket类透明路由相关组件accept&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-22">
          <mxGeometry x="0.2285" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-24" value="连接ip:80/443" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="20" y="190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-26" target="ILIdesDGYVWNeA5FY_8v-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-26" value="收到TCP连接请求" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="398" y="320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-27" value="返回gateway ip" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="190" y="-135" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-28" value="P2P协议" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#FF3333;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-29" target="ILIdesDGYVWNeA5FY_8v-90">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-29" value="根据fake-ip得到$zoneid,尝试建立到OOD的P2P连接（有端口映射会非常简单）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="398" y="430" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-30" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-32" target="ILIdesDGYVWNeA5FY_8v-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-31" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-32" target="ILIdesDGYVWNeA5FY_8v-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-32" value="有端口映射？" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="350" width="216" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-33" value="在SN上查询ZoneIP并返回" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="190" y="15" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-34" value="客户端浏览器" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="30" y="-520" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-35" value="cyfs-gateway@客户端" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="387" y="-520" width="142" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-36" value="cyfs-gateway@Gateway Node" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="808" y="-520" width="172" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-37" value="cyfs-gateway@OOD" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1480.5" y="-520" width="122" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-38" value="如果$zoneid是buckyos.org的子域名，且支持端口映射，那么返回OOD外网IP" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="156" y="-300" width="156" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-39" value="收到TCP连接请求" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="833" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-41" target="ILIdesDGYVWNeA5FY_8v-45">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-41" value="返回连接成功" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="833" y="350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-43" target="ILIdesDGYVWNeA5FY_8v-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-43" value="SSL握手" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="20" y="570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-45" target="ILIdesDGYVWNeA5FY_8v-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-45" value="处理SSL握手（可读取证书）" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="832" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-46" value="发送HTTP请求" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="20" y="780" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-48" target="ILIdesDGYVWNeA5FY_8v-50">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-48" value="根据URL路由配置分析HTTP请求" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="832" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-50" target="ILIdesDGYVWNeA5FY_8v-51">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-50" value="gateway上有Cache?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="812" y="880" width="162" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-51" value="返回Cache" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="730" y="1030" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-53" target="ILIdesDGYVWNeA5FY_8v-55">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-53" value="使用system-config查询相关服务的EP,$device-id" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="932" y="1030" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-55" target="ILIdesDGYVWNeA5FY_8v-59">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-55" value="使用内部协议连接$device-id" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="932" y="1140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#fa0000;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-59" target="ILIdesDGYVWNeA5FY_8v-85">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1540" y="1420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-57" value="P2P协议" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-56">
          <mxGeometry x="-0.1497" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-59" target="ILIdesDGYVWNeA5FY_8v-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-59" value="发送请求/等待回复&lt;br&gt;这里可以确定性的重试逻辑" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="932" y="1240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-60" value="返回请求" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="932" y="1340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-62" target="ILIdesDGYVWNeA5FY_8v-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-62" value="收到TCP连接请求" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1483" y="190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-64" target="ILIdesDGYVWNeA5FY_8v-66">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-64" value="返回连接成功" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1483" y="280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-66" target="ILIdesDGYVWNeA5FY_8v-68">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-66" value="处理SSL握手（可读取证书）" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1482.5" y="690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-68" target="ILIdesDGYVWNeA5FY_8v-70">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-68" value="根据URL路由配置分析HTTP请求" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1482.5" y="800" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-70" target="ILIdesDGYVWNeA5FY_8v-71">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-70" value="gateway上有Cache?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1461.5" y="920" width="162" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-71" value="返回Cache" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1379.5" y="1070" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-72" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-73" target="ILIdesDGYVWNeA5FY_8v-75">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-73" value="使用system-config查询相关服务的EP,$device-id" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1581.5" y="1070" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-75" target="ILIdesDGYVWNeA5FY_8v-77">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-75" value="直连 服务EP" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1581.5" y="1180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-77">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1910" y="1295" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-77" value="发送请求/等待回复&lt;br&gt;这里可以确定性的重试逻辑" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1581.5" y="1280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-78" value="http service$device" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1912" y="-520" width="122" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-80" target="ILIdesDGYVWNeA5FY_8v-81">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-80" value="收到请求" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1912" y="1270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-81" value="处理并返回结果" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1913" y="1380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-82" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.654;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-70" target="ILIdesDGYVWNeA5FY_8v-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.559;entryY=-0.016;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-50" target="ILIdesDGYVWNeA5FY_8v-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-84" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-85" target="ILIdesDGYVWNeA5FY_8v-86">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-85" value="收到来自P2P协议的连接请求" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1483" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-86" value="转发成到$device-ip,port的直连" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1662" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.006;entryY=0.682;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-86" target="ILIdesDGYVWNeA5FY_8v-80">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-88" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.498;entryY=-0.05;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-39" target="ILIdesDGYVWNeA5FY_8v-41">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-89" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-90" target="ILIdesDGYVWNeA5FY_8v-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-90" value="收到来自P2P协议的连接请求" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1302.5" y="280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-91" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-92" target="ILIdesDGYVWNeA5FY_8v-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-92" value="&lt;div&gt;标准DNS返回&lt;/div&gt;返回Gateway Node IP" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="164" y="-395" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-93" value="如果支持端口映射，那么每1分钟刷新一次DDNS" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1472" y="-370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-94" value="这里还有一个规则引擎，本质上是一个运行在socks代理中的tunnel的选择器" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="590" y="490" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-96" target="ILIdesDGYVWNeA5FY_8v-98">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-96" value="Front1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="152" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-97" value="P2P" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#b85450;fillColor=#f8cecc;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-98" target="ILIdesDGYVWNeA5FY_8v-108">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="752" y="-890" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-98" value="proxy@cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="272" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-99" value="Old service" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1072" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-100" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-102" target="ILIdesDGYVWNeA5FY_8v-103">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-101" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-102" target="ILIdesDGYVWNeA5FY_8v-105">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-102" value="nginx" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="492" y="-850" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-103" value="cyfs-server" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="632" y="-850" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-104" value="P2P" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-105" target="ILIdesDGYVWNeA5FY_8v-108">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="832" y="-810" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-105" value="proxy@cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="632" y="-800" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-106" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-108" target="ILIdesDGYVWNeA5FY_8v-99">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-107" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-108" target="ILIdesDGYVWNeA5FY_8v-115">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-108" value="bdt-stack.forwoard" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="842" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-109" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-112" target="ILIdesDGYVWNeA5FY_8v-102">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-110" value="最常见" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-109">
          <mxGeometry x="-0.1542" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-111" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-112" target="ILIdesDGYVWNeA5FY_8v-96">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-112" value="OldClient" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-113" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-115" target="ILIdesDGYVWNeA5FY_8v-117">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-115" target="ILIdesDGYVWNeA5FY_8v-118">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-115" value="nginx" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="962" y="-855" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-116" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-117" target="ILIdesDGYVWNeA5FY_8v-129">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-117" value="cyfs-server" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="962" y="-760" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-118" value="Old service" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1072" y="-855" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-119" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="452" y="-715" as="sourcePoint" />
            <mxPoint x="452" y="-965" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-120" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="772" y="-715" as="sourcePoint" />
            <mxPoint x="772" y="-965" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-121" value="Client Device" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="188" y="-1020" width="117" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-122" value="GatewayNode" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="542" y="-1020" width="117" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-123" value="OOD" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="925" y="-1020" width="117" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-124" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-125" target="ILIdesDGYVWNeA5FY_8v-117">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-125" value="NewClient" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="272" y="-760" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-126" value="P2P" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.675;entryY=0.944;entryDx=0;entryDy=0;entryPerimeter=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-135" target="ILIdesDGYVWNeA5FY_8v-108">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-127" value="端口映射" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-128" target="ILIdesDGYVWNeA5FY_8v-115">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-128" value="OldClient" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="212" y="-970" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-129" value="New Service" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1072" y="-760" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-130" value="Service可以选择注册在bdt-forward上，nginx上，cyfs-server上" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="925" y="-710" width="188" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-131" value="&amp;nbsp;在理论上不能连通的环境里，通过配置bdt-sn让P2P协议通是P2P协议的细节。用户可以没有GatewayNode但有bdt-sn" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="530" y="-690" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-132" value="bdt-sn" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="610" y="-740" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-133" value="bdt-stack" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="-905" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-134" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.675;entryY=0.944;entryDx=0;entryDy=0;entryPerimeter=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-125" target="ILIdesDGYVWNeA5FY_8v-135">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="352" y="-745" as="sourcePoint" />
            <mxPoint x="896" y="-877" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-135" value="bdt-stack" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="-760" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-136" value="bdt-stack是同一个" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="352" y="-825" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-137" value="proxy-core" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1285" y="-900" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-138" value="bdt-stack" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1285" y="-860" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-139" value="bdt-stack.forward" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1285" y="-820" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-140" value="cyfs-server" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1285" y="-780" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-141" value="cyfs-gatway" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1302.5" y="-973" width="85" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-142" value="cyfs-dns&lt;br&gt;（support ddns）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1285" y="-940" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-143" value="bdt-sn" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1285" y="-740" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-144" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-39" target="ILIdesDGYVWNeA5FY_8v-36">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="860" y="-300" as="sourcePoint" />
            <mxPoint x="910" y="-350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-145" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-80">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1972.29" y="170" as="sourcePoint" />
            <mxPoint x="1972.29" y="-490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-146" value="cyfs-gateway @ WLAN" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1910" y="-973" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-147" value="cyfs-gateway @ LAN" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2290" y="-973" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-148" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-146" target="ILIdesDGYVWNeA5FY_8v-147">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2100" y="-930" as="sourcePoint" />
            <mxPoint x="2150" y="-980" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-149" value="Tunnel" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-148">
          <mxGeometry x="0.2885" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-150" value="Tunnel" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-151" target="ILIdesDGYVWNeA5FY_8v-147">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-151" value="cyfs-stack@laptop&lt;br&gt;like OpenVPN Client" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1650" y="-900" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-152" value="协助" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" target="ILIdesDGYVWNeA5FY_8v-146">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1970" y="-870" as="sourcePoint" />
            <mxPoint x="2030" y="-830" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-153" value="Dispatch&amp;nbsp; Serivce Config&lt;br&gt;TCP/UDP/BDT : Port -&amp;gt; Target" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="100" y="1870" width="216" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-154" value="cyfs-dns&lt;br&gt;(support ddns)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="434" y="1630" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-155" value="cyfs-socks" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="433" y="1730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-156" value="device_id : port&lt;br&gt;(need tunnel)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="433" y="1920" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-157" value="ip : port" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="433" y="2000" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-158" value="hostname : port" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="434" y="2080" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-159" value="TunnelSelector.selet_tunnel" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="620" y="1730" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-160" value="tunnel mgr" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="902" y="1780" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-161" value="cyfs-warp&lt;br&gt;http engine" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="434" y="1830" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-162" value="RouterConfig&lt;br&gt;URL-&amp;gt; Up Stream target" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="620" y="1830" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-163" value="nginx&lt;br&gt;URL-&amp;gt;UpStream （）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-260" y="1870" width="216" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-164" value="Target" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1255" y="1780" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-165" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-166" target="ILIdesDGYVWNeA5FY_8v-170">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-166" value="标准httpsURL（没有app_port）&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2120" y="1690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-167" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-170" target="ILIdesDGYVWNeA5FY_8v-173">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-168" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-170" target="ILIdesDGYVWNeA5FY_8v-178">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-169" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-170" target="ILIdesDGYVWNeA5FY_8v-180">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-170" value="域名解析" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2120" y="1810" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-171" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-173" target="ILIdesDGYVWNeA5FY_8v-199">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-172" value="要避免源和目标都是LAN设备，结果还走到WLAN绕了一圈" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-171">
          <mxGeometry x="0.0606" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-173" value="返回可直连的IP&lt;br&gt;GatewayNode IP&lt;br&gt;OOD IP" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1960" y="1960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-174" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-175" target="ILIdesDGYVWNeA5FY_8v-202">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-175" value="socks5@cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2320" y="2230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-176" value="dapp" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1960" y="2720" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-177" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-178" target="ILIdesDGYVWNeA5FY_8v-195">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-178" value="返回127.0.0.1&lt;br&gt;（cyfs-dns or cyfs-dns-client）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2120" y="1960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-179" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-180" target="ILIdesDGYVWNeA5FY_8v-205">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-180" value="返回fake_ip&lt;br&gt;(cyfs-dns or cyfs-dns-client,本地路由可识别）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2320" y="1960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-181" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-182" target="ILIdesDGYVWNeA5FY_8v-188">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-182" value="kRPC.select_service&lt;br&gt;必然可以使用cyfs基础设施" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2530" y="1550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-183" value="可以直连&lt;br&gt;URL中就有device_ip" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-188" target="ILIdesDGYVWNeA5FY_8v-176">
          <mxGeometry x="-0.0033" y="-30" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2590" y="1750" />
              <mxPoint x="2590" y="2765" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-184" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-188" target="ILIdesDGYVWNeA5FY_8v-205">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-185" value="不能直连&lt;br&gt;URL中是fake_ip" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-184">
          <mxGeometry x="0.628" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-186" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-188" target="ILIdesDGYVWNeA5FY_8v-195">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2650" y="2100" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2440" y="1720" />
              <mxPoint x="2440" y="1925" />
              <mxPoint x="2270" y="1925" />
              <mxPoint x="2270" y="2130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-187" value="不能直连,target_ip是127.0.0.1&lt;br&gt;http协议不需要app_port" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-186">
          <mxGeometry x="0.3266" y="-1" relative="1" as="geometry">
            <mxPoint x="169" y="-134" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-188" value="URL是target_ip:app_port" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2530" y="1690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-189" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-190" target="ILIdesDGYVWNeA5FY_8v-166">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-190" value="浏览器" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2120" y="1550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-191" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-195" target="ILIdesDGYVWNeA5FY_8v-202">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-192" value="不可直连&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;Tunnel转发" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-191">
          <mxGeometry x="-0.0889" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-193" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-195" target="ILIdesDGYVWNeA5FY_8v-176">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-194" value="可直连&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;转发 device_ip:port" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-193">
          <mxGeometry x="-0.3419" y="-1" relative="1" as="geometry">
            <mxPoint y="53" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-195" value="本机cyfs-gateway" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2120" y="2100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-196" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=-0.007;entryY=0.349;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-199" target="ILIdesDGYVWNeA5FY_8v-176">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-197" value="可直连&lt;br&gt;转发 device_ip:port&lt;br&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-196">
          <mxGeometry x="-0.3314" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-198" value="不可直连&lt;br&gt;Tunnel转发" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-199" target="ILIdesDGYVWNeA5FY_8v-202">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-199" value="cyfs-gateway@GatewayNode" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1750" y="2410" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-200" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-202" target="ILIdesDGYVWNeA5FY_8v-176">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-201" value="本机转发&lt;br&gt;device_id:port" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ILIdesDGYVWNeA5FY_8v-200">
          <mxGeometry x="-0.1951" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-202" value="cyfs-gateway@ood" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1960" y="2570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-203" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-173" target="ILIdesDGYVWNeA5FY_8v-202">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1950" y="2220" as="sourcePoint" />
            <mxPoint x="2000" y="2170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-204" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-205" target="ILIdesDGYVWNeA5FY_8v-175">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-205" value="TUN-device逻辑&lt;br&gt;(TAP类似，也是把必要的包发到socks5)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2320" y="2100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-206" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1780" y="2320" as="sourcePoint" />
            <mxPoint x="2820" y="2320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-207" value="从安全角度，所有到dapp的直连也可以全部变成到cyfs_gatway@ood的直连，这样可以在流量到dapp前多一步通用的身份认证和权限控制" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2240" y="2710" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-208" value="注意所有的Gateway都要配置https证书" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1875" y="1760" width="165" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-209" value="boot.get_sys_config_urls" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2370" y="1550" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-210" value="ood的ip在zone_config里写了" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2330" y="1230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-211" value="可以通过mDNS reslove得到(ood_hostname.local)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2480" y="1230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-212" value="使用SN-DNS&lt;br&gt;ood_hostname.d.$zonename" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2850" y="1230" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-213" value="使用 SN-HTTP api 查询" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2630" y="1230" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-214" value="使用UDP广播（未实现）" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3070" y="1230" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-215" value="cyfs-gateway基于 device_id的转发成功的前提&lt;br&gt;&lt;br&gt;1. 对方已经主动连上来了（已有）&lt;br&gt;2. 如果已经连上了system_config,则通过查询system_config里的信息可以知道怎么连&lt;br&gt;3. 如果没连上system_config,那么就要查询SN来尝试得到device的信息。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1499.5" y="2420" width="217" height="210" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-216" value="如何得到ood的IP?进而连接上system_config_service" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2580" y="1180" width="490" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-217" value="内部通过&lt;div&gt;service_name@device_id来定位一个服务&lt;/div&gt;&lt;div&gt;根据service name可以知道port和api路径&lt;/div&gt;&lt;div&gt;根据device_id可以建立stream&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="250" y="-690" width="227" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-218" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-220" target="ILIdesDGYVWNeA5FY_8v-222">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-219" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-220" target="ILIdesDGYVWNeA5FY_8v-224">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-220" value="网页需要身份信息或授权" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="2275" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-221" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-222" target="ILIdesDGYVWNeA5FY_8v-226">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-222" value="Web2.5 SSO弹出授权确认" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="2200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-223" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-224" target="ILIdesDGYVWNeA5FY_8v-230">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-224" value="插件弹出授权确认" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="2350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-225" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-226" target="ILIdesDGYVWNeA5FY_8v-228">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-226" value="用户名密码登陆" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="2200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-227" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-228" target="ILIdesDGYVWNeA5FY_8v-233">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-228" value="授权完成" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="2200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-229" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-230" target="ILIdesDGYVWNeA5FY_8v-232">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-230" value="密码确认" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="2350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-231" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-232" target="ILIdesDGYVWNeA5FY_8v-233">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-232" value="授权完成" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="2350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-233" value="得到授权结果&lt;br&gt;（可服用的验证信息）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="750" y="2275" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-234" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-235" target="ILIdesDGYVWNeA5FY_8v-240">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-235" value="Zone Gateway" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="2545" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-236" value="请求,带上验证信息" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-237" target="ILIdesDGYVWNeA5FY_8v-235">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-237" value="网页" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="130" y="2545" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-238" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-240" target="ILIdesDGYVWNeA5FY_8v-242">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-239" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-240" target="ILIdesDGYVWNeA5FY_8v-244">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-240" value="验证信息" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="490" y="2665" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-241" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-242" target="ILIdesDGYVWNeA5FY_8v-245">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-242" value="是相关身份的签名？&lt;br&gt;（提权操作）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="370" y="2795" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-243" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ILIdesDGYVWNeA5FY_8v-244" target="ILIdesDGYVWNeA5FY_8v-245">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-244" value="在认证中心验证session-key" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="2785" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ILIdesDGYVWNeA5FY_8v-245" value="得到验证结果&lt;br&gt;userid:app" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="2925" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
