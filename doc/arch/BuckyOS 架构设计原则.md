# buckyos系统架构的设计原则

buckyos面向C端的Cloud OS (Network OS).其首要设计目标是，然让消费者能拥有一个自己的集群/云（为了和常规的术语进行区分，我们把这个集群称作Zone），消费者自己拥有的所有设备，设备上的计算资源都接入这个集群。消费者可以像安装App一样在自己的Zone内安装Service(我们称作DEC App Service 或则缩写成dApp).基于buckyos,用户可以拥有可以访问自己的所有数据、设备、和服务的AI Agent。

buckyos要实现“人人都有自己的云”的目标，必须实现Zero Operation：普通消费者不可能有专业的运维能力。我们要在此前提下保障系统的可靠性、安全性、稳定性。也需要提供足够的范式/限制给dApp的开发者。这也是buckyos要解决的核心问题。

我们也希望buckyos可以被应用在传统的云计算（更好的IaaS + PaaS）, 可以在一个物理Zone内部创建多个完全隔离的逻辑Zone, 也可以由多个物理Zone组成一个大的逻辑Zone。以实现共享云计算。当上述两个目标发生冲突时，我们会优先保障第一个目标。


## 核心的设计原则
1. Zero Dpendency & Zero Trust（0依赖与0信任）


2. Zero OPS (0运维)

3. 简单可靠
- 能不在内核中实现的功能就不在内核中实现
- 能不在系统服务中实现的功能就不在系统服务中实现
- 显然的可靠：谨慎的选择一样简单可靠的第三方库，并保持review
- 模块划分时可以为简单性放弃一些可复用性，任何模块的实现都应尽力减少review代码时的心智负担，谨慎的添加我们专有的概念

4. Let it crash
- 在分布式系统中不要害怕Crash,当出现异常（预期外的任何情况）时，留下日志，然后crash(退出)。
- 默认不做任何重试，也不要尝试“拉起”任何自己的依赖项。系统里有几个核心的组件会上

6. log first
- 日志系统是分布式系统中的重要基础设施，他不但在开发阶段为开发者诊断BUG服务，更是很多功能在需要“”
- 理解buckyos日志规范(尤其是info级别以上)，是所有开发者的首要任务。系统默认运行在info级别。完成了请求，或更新了状态，都要写入一行Info级别的日志
  - trace/debug用于开发状态， 
  - warning是产生了常规的错误
  - error是产生了异常，但并不影响进程的基础工作（期待会恢复）
  - fatal通常代表故障，一个进程打玩fatal后通常会自我结束

5. 无call时调度器（没有潜规则）
基于Zone的状态进行实时的调度是一个美好的愿望，但这通常并不是一个好主意：分布式系统里的全局状态，通常是难以完整且实时的得到的，而基于该状态下发的指令，也很难做到完整的，实时的执行。因此应减少直觉性的“控制->反馈”操作，在分布式系统繁忙（也是最需要调度的时候），反馈的准确性会下降，控制的延迟会上升。应该多用可收敛的，单节点逻辑，通过自组织的方法来实现调度的目的。

没有潜规则的概念来源于网络研发中的：不要随意添加Queue或重试机制。应用开发者在大部分情况下能做到完整，直接的资源的控制。


## 系统资源的释放
因为Personl Server的资源相比Cloud有限，所以任何一个写入操作，都要考虑是否有对应的删除机会。

资源的释放主要有两种

1. 删除数据，主要是自动的缓存清理和手工的应用数据\用户数据清理。从已知服务的运行情况来看，除非有BUG，任何用户都不应该需要删除重要的数据
2. 减少硬件（配置降级），这对大规模集群来说是常事，但对于普通人拥有的Zero DevOps环境，我们认为释放硬件资源是小概率事件（处非用户一开始购买的硬件资源实在是超出实际需要太多），因此系统并不强求能在任何情况下，都能释放硬件资源。






