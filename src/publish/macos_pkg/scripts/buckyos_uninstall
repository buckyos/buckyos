#!/bin/zsh
set -e
BUCKYOS_ROOT="${BUCKYOS_ROOT:-/opt/buckyos}"
PLIST="/Library/LaunchDaemons/buckyos.service.plist"
echo "[buckyos] uninstall: stopping service"
launchctl kickstart -k "system/buckyos.service" >/dev/null 2>&1 || true
launchctl bootout system "$PLIST" >/dev/null 2>&1 || true
rm -f "$PLIST" || true
echo "[buckyos] uninstall: removing modules + clean_paths"
# BEGIN AUTO-GENERATED: modules
rm -rf "$BUCKYOS_ROOT/bin/node-daemon"
rm -rf "$BUCKYOS_ROOT/bin/system-config"
rm -rf "$BUCKYOS_ROOT/bin/verify-hub"
rm -rf "$BUCKYOS_ROOT/bin/scheduler"
rm -rf "$BUCKYOS_ROOT/bin/control-panel"
rm -rf "$BUCKYOS_ROOT/bin/smb-service"
rm -rf "$BUCKYOS_ROOT/bin/repo-service"
rm -rf "$BUCKYOS_ROOT/bin/buckycli"
rm -rf "$BUCKYOS_ROOT/bin/node-active"
rm -rf "$BUCKYOS_ROOT/bin/sys-test"
rm -rf "$BUCKYOS_ROOT/bin/app-loader"
rm -rf "$BUCKYOS_ROOT/etc/scheduler"
rm -rf "$BUCKYOS_ROOT/etc/boot_gateway.yaml"
rm -rf "$BUCKYOS_ROOT/bin/util.py"
rm -rf "$BUCKYOS_ROOT/bin/stop.py"
# END AUTO-GENERATED: modules
# BEGIN AUTO-GENERATED: clean_paths
rm -rf "$BUCKYOS_ROOT/cache"
rm -rf "$BUCKYOS_ROOT/logs"
rm -rf "$BUCKYOS_ROOT/tmp"
rm -rf "$BUCKYOS_ROOT/local"
rm -rf "$BUCKYOS_ROOT/etc"
# END AUTO-GENERATED: clean_paths
