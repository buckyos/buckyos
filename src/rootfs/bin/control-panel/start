#!/usr/bin/python3

import os
import sys
current_dir = os.path.dirname(os.path.abspath(__file__))
sys.path.append(current_dir)
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
sys.path.append(os.path.dirname(os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))))
import util

# 考虑上一个进程可能是卡死的，因此需要先kill掉
print("try to kill control_panel")
util.kill_process("control_panel")

# 启动新的进程，注意使用nohup模式
util.nohup_start(f"{current_dir}/control_panel")
print("control_panel service started")