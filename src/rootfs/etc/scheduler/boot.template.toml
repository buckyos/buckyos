# users : users/$user_id/setting , user_id is never changed, user_name can changed. User root cann't be deleted and always exists
# password_hash : shaObj.update(org_password+username+".buckyos");ï¼ŒshaObj.getHash("B64")
# password_hash : echo -n "org_password+username+.buckyos" | openssl dgst -sha256 -binary | openssl base64


# pre_install_apps: {app_id: install_configs}
# service_port will automatically generated by scheduler
"system/install_settings" = """
{
    "pre_install_apps": {
        "buckyos_filebrowser": {
            "data_mount_point": {
                "/srv/": "/home/{{user_name}}/",
                "/database/": "/data/{{user_name}}/buckyos_filebrowser/database/",
                "/config/": "/data/{{user_name}}/buckyos_filebrowser/config/"
            },
            "cache_mount_point": [
            ],
            "local_cache_mount_point": [
            ],
            "expose_config": {
                "www": {
                    "sub_hostname": ["filebrowser"]
                }
            },
            "bind_address": "0.0.0.0",
            "res_pool_id": "default"
        }
    }
}
"""

"services/gateway/settings" = """
{
    "shortcuts": {
        "www": {
            "type":"app",
            "user_id":"{{user_name}}",
            "app_id":"buckyos_filebrowser"
        },
        "_":{
            "type":"app",
            "user_id":"{{user_name}}",
            "app_id":"buckyos_filebrowser"
        }
    }
}
"""

"system/rbac/base_policy" = """
p, kernel, kv://*, read|write,allow
p, kernel, dfs://*, read|write,allow
p, kernel, ndn://*, read|write,allow

p, root, kv://*, read|write,allow
p, root, dfs://*, read|write,allow
p, root, ndn://*, read|write,allow

p, ood,kv://*,read,allow
p, ood,kv://users/*/apps/*,read|write,allow
p, ood,kv://nodes/{device}/*,read|write,allow
p, ood,kv://services/*,read|write,allow
p, ood,kv://system/rbac/policy,read|write,allow

p, client, kv://boot/*, read,allow
p, client,kv://devices/{device}/*,read,allow
p, client,kv://devices/{device}/info,read|write,allow

p, service, kv://boot/*, read,allow
p, service,kv://services/{service}/*,read|write,allow
p, service,kv://services/*/info,read,allow
p, service,kv://users*,read,allow
p, service,kv://users/*/*,read,allow
p, service,kv://system/*,read,allow
p, service,dfs://system/data/{service}/*,read|write,allow
p, service,dfs://system/cache/{service}/*,read|write,allow

p, app, kv://boot/*, read,allow
p, app, kv://users/*/apps/{app}/settings,read|write,allow
p, app, kv://users/*/apps/{app}/spec,read,allow
p, app, kv://users/*/apps/{app}/info,read,allow
p, app, dfs://users/*/appdata/{app}/*, read|write,allow
p, app, dfs://users/*/cache/{app}/*, read|write,allow
p, admin, kv://boot/*, read,allow
p, admin,kv://users/{user}/*,read|write,allow
p, admin,dfs://users/{user}/*,read|write,allow
p, admin,kv://services/*,read|write,allow
p, admin,dfs://library/*,read|write,allow
p, user, kv://boot/*, read,allow
p, user,kv://users/{user}/*,read,allow
p, user,kv://users/{user}/apps/*/*,read|write,allow
p, user,dfs://users/{user}/*,read|write,allow
p, user,dfs://users/{user}/home/*,read|write,allow
p, user,dfs://library/*,read,allow

g, node-daemon, kernel
g, scheduler, kernel
g, system-config, kernel
g, verify-hub, kernel
g, control-panel, kernel
g, buckycli, kernel
g, cyfs-gateway, kernel
"""

